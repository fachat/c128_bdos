
PR.a65


    5 T:27fe  00 28                              .word $2800

    7 T:2800                                    ;PRA 2.4 .S50 ==0801==
    8 T:2800                                    ;****
    9 T:2800                                    fmn=0           ; 1 falls ohne menu
   10 T:2800                                    fci=0           ; 1 falls ohne cli
   11 T:2800                                    eng=0           ; 1 falls englisch
   12 T:2800                                    ;****
   13 T:2800                                    mix=(1-fmn)*(1-fci)
   14 T:2800                                    prg=1
   15 T:2800                                    c128=1
   16 T:2800                                    bdos=$a000
   17 T:2800                                    rs232=0           ; 1 falls rs232 im menue
   18 T:2800                                    ;****

   20 T:2800                                    bufanf=$6c00           ;a-version
   21 T:2800                                    buflen=$0400

   23 T:2800                                    ;****
   24 T:2800                                    keystp=3

   30 T:2800                                    ;BDK 1.41.S17 ==0801==
   31 T:2800                                    setfpar=$ffba
   32 T:2800                                    setfnpar=$ffbd
   33 T:2800                                    open=$ffc0
   34 T:2800                                    close=$ffc3
   35 T:2800                                    chkin=$ffc6
   36 T:2800                                    ckout=$ffc9
   37 T:2800                                    clrch=$ffcc
   38 T:2800                                    basin=$ffcf
   39 T:2800                                    bsout=$ffd2
   40 T:2800                                    getkey=$ffe4
   41 T:2800                                    ;****
   42 T:2800                                    rwbzei=$2e
   43 T:2800                                    abszei=$fc
   44 T:2800                                    dtadr=$fe
   45 T:2800                                    dirzei=$2a
   46 T:2800                                    bf1z=$16
   47 T:2800                                    zei=$18
   48 T:2800                                    pzei=$1a
   49 T:2800                                    tzei=$1e
   50 T:2800                                    dzei=$20
   51 T:2800                                    bfzei=$24
   52 T:2800                                    przei=$3c
   53 T:2800                                    fpzei=$28
   54 T:2800                                    status=$90
   55 T:2800                                    stavec=$02b9
   56 T:2800                                    stash=$02af
   57 T:2800                                    fetvec=$02aa
   58 T:2800                                    fetch=$02a2
   59 T:2800                                    serial=$0a1c
   60 T:2800                                    basirq=$0a04
   61 T:2800                                    ;****
   62 T:2800                                    cia1=$dc00
   63 T:2800                                    cia2=$dd00
   64 T:2800                                    sdr=cia1+$0c
   65 T:2800                                    icr=cia1+$0d
   66 T:2800                                    dra=cia2+$00
   67 T:2800                                    nmicr=cia2+$0d
   68 T:2800                                    cra=cia1+$0e
   69 T:2800                                    mmureg=$d505
   70 T:2800                                    timal=cia1+$04
   71 T:2800                                    timah=cia1+$05
   72 T:2800                                    tcia=cia1
   73 T:2800                                    ;****
   74 T:2800                                    unit=8
   75 T:2800                                    ff=255
   76 T:2800                                    clkin=%01000000
   77 T:2800                                    clkout=%00010000
   78 T:2800                                    backs=$5c
   79 T:2800                                    prgbank=$0e

   87 T:2800                                    ;BDJ 1.45.S31 ==0801==

   89 T:2800                                    init=bdos             ; start von vorne
   90 T:2800                                    exit=bdos+3       ; start von vorne
   91 T:2800                                    query=bdos+6       ; disk-format feststellen
   92 T:2800                                    mediach=bdos+9       ; disk gewechselt
   93 T:2800                                    getbpb=bdos+12       ; adr des bpb holen
   94 T:2800                                    floprw=bdos+15       ; pfloprw  ; block lesen/schreiben
   95 T:2800                                    rwabs=bdos+18       ; blockreihe r/w ueber log blocknummer
   96 T:2800                                    flopfmt=bdos+21       ; floppy formatieren
   97 T:2800                                    sgdta=bdos+24       ; adresse dta-puffer setzten/holen
   98 T:2800                                    sgdrive=bdos+27       ; drive holen/setzen
   99 T:2800                                    gtpath=bdos+30       ; holt adresse des aktuellen pfades
  100 T:2800                                    sgnexcl=bdos+33       ; folgecluster holen/setzen
  101 T:2800                                    sfrclus=bdos+36       ; naechsten freien sektor suchen
  102 T:2800                                    gtdskfr=bdos+39       ; freien platz auf der diskette berechnen
  103 T:2800                                    sfirst=bdos+42       ; ersten eintrag in dir suchen nach dta
  104 T:2800                                    sfirso=bdos+45       ; file umbenennen
  105 T:2800                                    snext=bdos+48       ; naechsten eintrag
  106 T:2800                                    chdir=bdos+51       ; directory wechseln
  107 T:2800                                    namedtp=bdos+54       ; pfad fuer prg setzen
  108 T:2800                                    wrentry=bdos+57       ; entry in dta auf disk schreiben
  109 T:2800                                    delete=bdos+60       ; file loeschen
  110 T:2800                                    dcreate=bdos+63       ; file zum ersten mal oeffnen
  111 T:2800                                    mkdir=bdos+66       ; directory anlegen
  112 T:2800                                    rmdir=bdos+69       ; directory loeschen
  113 T:2800                                    dopen=bdos+72       ; file oeffnen
  114 T:2800                                    dclose=bdos+75       ; file schliessen
  115 T:2800                                    dread=bdos+78       ; aus file lesen
  116 T:2800                                    dwrite=bdos+81       ; in file schreiben
  117 T:2800                                    lseek=bdos+84       ; position in file bestimmen
  118 T:2800                                    version=bdos+87       ; versionsblock holen
  119 T:2800                                    reschain=bdos+90       ;
  120 T:2800                                    irqchain=bdos+93       ;
  121 T:2800                                    nmichain=bdos+96       ;
  122 T:2800                                    sgtime=bdos+99       ;
  123 T:2800                                    sgdate=bdos+102       ;
  124 T:2800                                    salarm=bdos+105       ;
  125 T:2800                                    writfat=bdos+108
  126 T:2800                                    readfat=bdos+111
  127 T:2800                                    writbuf=bdos+114
  128 T:2800                                    readbuf=bdos+117
  129 T:2800                                    sfrbuf=bdos+120
  130 T:2800                                    rlbuf=bdos+123
  131 T:2800                                    bufabs=bdos+126
  132 T:2800                                    bfzset=bdos+129
  133 T:2800                                    bfset=bdos+132
  134 T:2800                                    bfget=bdos+135
  135 T:2800                                    bout=bdos+138
  136 T:2800                                    bin=bdos+141
  137 T:2800                                    bcan=bdos+144
  138 T:2800                                    bcaus=bdos+147
  139 T:2800                                    bbcol=bdos+150
  140 T:2800                                    btcol=bdos+153
  141 T:2800                                    bcpos=bdos+156
  142 T:2800                                    bgkey=bdos+159
  143 T:2800                                    bfetch=bdos+162
  144 T:2800                                    bstash=bdos+165
  145 T:2800                                    bfadr=bdos+168
  146 T:2800                                    bsadr=bdos+171
  147 T:2800                                    setvec=bdos+174
  148 T:2800                                    chout=bdos+177
  149 T:2800                                    chodev=bdos+180
  150 T:2800                                    chost=bdos+183
  151 T:2800                                    chin=bdos+186
  152 T:2800                                    chidev=bdos+189
  153 T:2800                                    chist=bdos+192
  154 T:2800                                    devout=bdos+195
  155 T:2800                                    devin=bdos+198
  156 T:2800                                    devcmd=bdos+201

  164 T:2800                                    ;BDS 1.44.S24 ==0801==
  165 T:2800                                    dfval=%10000000
  166 T:2800                                    dfwrit=%01000000
  167 T:2800                                    pathlen=64
  168 T:2800                                    ;****  struktur versions-block
  169 T:2800                                    vever=0           ;2 byte version
  170 T:2800                                    vebufanz=2           ;bufanz
  171 T:2800                                    vepathle=3           ;pathlen
  172 T:2800                                    veanzdrv=4           ;anzdrv
  173 T:2800                                    vefpbanz=5           ;fpbanz
  174 T:2800                                    vejmpadr=6           ;adresse jmp-tabelle
  175 T:2800                                    vetext=16           ;text by a.fachat
  176 T:2800                                    ;****  struktur pblock fuer floprw
  177 T:2800                                    pbrwflag=0           ;byte
  178 T:2800                                    pbdrive=1           ;byte
  179 T:2800                                    pbside=2           ;byte
  180 T:2800                                    pbtrack=3           ;byte
  181 T:2800                                    pbsector=4           ;byte
  182 T:2800                                    pbbuffer=5           ;word
  183 T:2800                                    pbbank=7           ;byte
  184 T:2800                                    ;****  struktur bios-parameter-block (32 byte)
  185 T:2800                                    bprecsiz=0           ;word
  186 T:2800                                    bpclsiz=2           ;word
  187 T:2800                                    bpclsizb=4           ;word
  188 T:2800                                    bprdlen=6           ;word
  189 T:2800                                    bpfsiz=8           ;word
  190 T:2800                                    bpfatrec=10           ;word
  191 T:2800                                    bpdatrec=12           ;word
  192 T:2800                                    bpnumcl=14           ;word
  193 T:2800                                    bflags=16           ;word
  194 T:2800                                    bptracks=18           ;word
  195 T:2800                                    bpsides=20           ;word
  196 T:2800                                    bpspts=22           ;word
  197 T:2800                                    bpspt=24           ;word
  198 T:2800                                    bphidden=26           ;word
  199 T:2800                                    bpserial=28           ;3 byte
  200 T:2800                                    bpbval=31           ;byte
  201 T:2800                                    bpbfat=32           ;byte
  202 T:2800                                    bpbflag=33           ;byte
  203 T:2800                                    bpblen=34
  204 T:2800                                    bpdirclu=34           ;word
  205 T:2800                                    bppath=36           ;64 byte
  206 T:2800                                    bpplen=bppath+pathlen
  207 T:2800                                    ;**** struktur boot-sektor (8-29)
  208 T:2800                                    btserial=8           ;3 byte
  209 T:2800                                    btbps=11           ;word
  210 T:2800                                    btspc=13           ;byte
  211 T:2800                                    btres=14           ;word
  212 T:2800                                    btfat=16           ;byte
  213 T:2800                                    btdir=17           ;word
  214 T:2800                                    btsec=19           ;word
  215 T:2800                                    btmedia=21           ;byte
  216 T:2800                                    btspf=22           ;word
  217 T:2800                                    btspt=24           ;word
  218 T:2800                                    btside=26           ;word
  219 T:2800                                    bthid=28           ;word
  220 T:2800                                    ;**** struktur abspar
  221 T:2800                                    aprwflag=0           ;byte
  222 T:2800                                    apdrive=1           ;byte
  223 T:2800                                    aprecord=2           ;word
  224 T:2800                                    apanz=4           ;word
  225 T:2800                                    apbuffer=6           ;word
  226 T:2800                                    apbank=8           ;byte
  227 T:2800                                    ;**** struktur disk-transfer-puffer
  228 T:2800                                    dsname=0           ;name 8 byte
  229 T:2800                                    dsext=8           ;ext 3 byte
  230 T:2800                                    dsattr=11           ;fileattribut als suchmaske
  231 T:2800                                    dgname=12           ;gefundener name
  232 T:2800                                    dgext=20           ;gefundene ext
  233 T:2800                                    dgattr=23           ;gefundenes attr
  234 T:2800                                    dgclus=24           ;first cluster
  235 T:2800                                    dgsize=26           ;groesse
  236 T:2800                                    dgsec=30           ;sekunden
  237 T:2800                                    dgmin=31           ;minuten
  238 T:2800                                    dghour=32           ;stunden
  239 T:2800                                    dgday=33           ;tag
  240 T:2800                                    dgmonth=34           ;monat
  241 T:2800                                    dgyear=35           ;jahr-1980
  242 T:2800                                    dtpos=36           ;nummer des dir-eintrags
  243 T:2800                                    dtflag=37           ;flag fuer leeren/gueltigen eintrag suchen
  244 T:2800                                    dtanz=38           ;max anz eintraege in 1 block
  245 T:2800                                    dtdrv=39           ;drive
  246 T:2800                                    dtclus=40           ;aktueller cluster
  247 T:2800                                    dtsec=42           ;aktueller sektor (im cluster)
  248 T:2800                                    dtstart=44           ;startcluster des dir
  249 T:2800                                    dtplen=46           ;laenge des dtp
  250 T:2800                                    ;**** struktur dir-eintrag
  251 T:2800                                    dename=0           ;name 8 byte
  252 T:2800                                    deext=8           ;ext 3 byte
  253 T:2800                                    deattr=11           ;fileattribut als suchmaske
  254 T:2800                                    deuhr=22           ;uhrzeit
  255 T:2800                                    dedate=24           ;datum
  256 T:2800                                    defclus=26           ;erster cluster
  257 T:2800                                    desize=28           ;file-laenge
  258 T:2800                                    ;**** struktur file-parameter-block
  259 T:2800                                    fpname=dgname             ;name
  260 T:2800                                    fpext=dgext             ;extension
  261 T:2800                                    fpdrive=dtdrv             ;drive
  262 T:2800                                    fphandle=dtplen+0       ;file-handle nr
  263 T:2800                                    fpos=dtplen+1       ;position read-write in datei
  264 T:2800                                    fpsize=dgsize             ;groesse der datei
  265 T:2800                                    fpstart=dgclus             ;startcluster der datei
  266 T:2800                                    fpclus=dtplen+5       ;aktueller cluster
  267 T:2800                                    fpsec=dtplen+7       ;aktueller sektor im cluster
  268 T:2800                                    fpbyt=dtplen+9       ;aktuelles byte im sektor
  269 T:2800                                    fpanz=dtplen+11       ;anzahl zu lesender byte
  270 T:2800                                    fpadr=dtplen+13       ;adresse fuer read-write
  271 T:2800                                    fpshift=dtplen+15       ;anzahl fuer lseek
  272 T:2800                                    fpdir=dtplen+19       ;flag fuer lseek
  273 T:2800                                    fpbuf=dtplen+20       ;puffer-nr
  274 T:2800                                    fpflag=dtplen+21       ;flag fuer wrentry bei close
  275 T:2800                                    fpbank=dtplen+22       ;bank fuer r/w
  276 T:2800                                    fpblen=dtplen+23       ;laenge des fpb
  277 T:2800                                    ;**** struktur getname-transfer-puffer
  278 T:2800                                    gndrive=0           ;drive
  279 T:2800                                    gnflag=1           ;flag fuer letzten namen im suchpfad
  280 T:2800                                    gnact=2           ;cluster des root-dir des letzten eintrags
  281 T:2800                                    gnfile=4           ;startcluster des letzten suchnamens
  282 T:2800                                    gnpath=6           ;64 byte gefundener pfad
  283 T:2800                                    ;**** struktur getpath
  284 T:2800                                    gpclus=0           ; startcluster
  285 T:2800                                    gppath=2           ; path
  286 T:2800                                    ;**** struktur setvektor
  287 T:2800                                    svanz=0           ; anzahl zu linkender vektoren
  288 T:2800                                    ; svadr/new/old sind zeiger auf arrays der angegebenen adressen
  289 T:2800                                    svadr=2           ; adressen in der vektor-tabelle [ (xxx-bdos)*2/3 ]
  290 T:2800                                    svnew=4           ; liste der neuen vektor-adressen
  291 T:2800                                    svold=6           ; platz fuer alte vektor-adressen

  299 T:2800                                    ;BDE 1.4 .S14 ==0801==
  300 T:2800                                    enok=0
  301 T:2800                                    ennotimp=<-1
  302 T:2800                                    entxrx=<-2
  303 T:2800                                    enslow=<-3
  304 T:2800                                    engcr=<-4
  305 T:2800                                    enprange=<-5
  306 T:2800                                    enclnf=<-6
  307 T:2800                                    endnfnd=<-7
  308 T:2800                                    enactdir=<-8
  309 T:2800                                    ennotfnd=<-9
  310 T:2800                                    enpovr=<-10
  311 T:2800                                    enillnam=<-11
  312 T:2800                                    endskful=<-12
  313 T:2800                                    enfexist=<-13
  314 T:2800                                    ennempty=<-14
  315 T:2800                                    enilldrv=<-15
  316 T:2800                                    endnrdy=<-16
  317 T:2800                                    entmnyf=<-17
  318 T:2800                                    enfopen=<-18
  319 T:2800                                    enfnopen=<-19
  320 T:2800                                    eneof=<-20
  321 T:2800                                    ennbfre=<-21
  322 T:2800                                    enbreak=<-22

  330 T:2800                                    ;WPK 2.0 .S4  ==0801==
  331 T:2800                                    lzei=$0e
  332 T:2800                                    lmzei=$10
  333 T:2800                                    wzei=$12
  334 T:2800                                    wszei=$1c
  335 T:2800                                    wczei=$22
  336 T:2800                                    oldfpb=$26
  337 T:2800                                    newfpb=$2c
  338 T:2800                                    ;****
  339 T:2800                                    iobuf=$0200

  347 T:2800                                    ;PR1 2.4 .S63 ==0801==
  348 T:2800                                    czei=$30
  349 T:2800  85 30                              sta czei
  350 T:2802  84 31                              sty czei+1
  351 T:2804  20 92 3a                           jsr prtinit
  352 T:2807  a9 08                              lda #8
  353 T:2809  8d 33 40                           sta iecunit
  354 T:280c  a9 00                              lda #0
  355 T:280e  8d 34 40                           sta prtdev
  356 T:2811  8d 35 40                           sta prtfl
  357 T:2814                                    ;lda #0
  358 T:2814  a2 0d                              ldx #13

  360 T:2816  8d 70 40                           sta clibcol
  361 T:2819  8e 6f 40                           stx clitcol

  363 T:281c  8d 8f 40                           sta menubcol
  364 T:281f  8e 8e 40                           stx menutcol
  365 T:2822  a9 80                              lda #128
  366 T:2824  8d 91 40                           sta sofl
  367 T:2827  a9 00                              lda #0
  368 T:2829  8d 92 40                           sta sonk

  370 T:282c  20 2b 29                           jsr gbyt
  371 T:282f  b0 0c                              bcs gblfe
  372 T:2831  8a                                 txa 
  373 T:2832  c9 10                              cmp #16
  374 T:2834  90 02                              bcc gbl1
  375 T:2836  e9 06                              sbc #6
  376 T:2838  29 0f                    gbl1      and #15
  377 T:283a  8d 33 40                           sta iecunit
  378 T:283d  20 2b 29                 gblfe     jsr gbyt
  379 T:2840  b0 06                              bcs gbl3b
  380 T:2842  8a                                 txa 
  381 T:2843  29 0f                              and #15
  382 T:2845  8d 34 40                           sta prtdev
  383 T:2848  20 2b 29                 gbl3b     jsr gbyt
  384 T:284b  b0 06                              bcs gbl3a
  385 T:284d  8a                                 txa 
  386 T:284e  29 3f                              and #63
  387 T:2850  8d 35 40                           sta prtfl
  388 T:2853  20 2b 29                 gbl3a     jsr gbyt
  389 T:2856  b0 06                              bcs gbl3

  391 T:2858  8e 6f 40                           stx clitcol

  393 T:285b  8e 8e 40                           stx menutcol

  395 T:285e  20 2b 29                 gbl3      jsr gbyt
  396 T:2861  b0 06                              bcs gbl4

  398 T:2863  8e 70 40                           stx clibcol

  400 T:2866  8e 8f 40                           stx menubcol

  402 T:2869  20 eb 28                 gbl4      jsr gadr
  403 T:286c  90 04                              bcc gblok
  404 T:286e  a2 00                              ldx #<buflen
  405 T:2870  a0 04                              ldy #>buflen
  406 T:2872  8e 00 40                 gblok     stx prblen
  407 T:2875  8c 01 40                           sty prblen+1

  409 T:2878  a9 01                              lda #1
  410 T:287a  8d 54 40                           sta flag
  411 T:287d  a2 05                              ldx #5
  412 T:287f  bd 00 01                 p001      lda $0100,x
  413 T:2882  9d 39 40                           sta dosd0,x
  414 T:2885  ca                                 dex 
  415 T:2886  10 f7                              bpl p001
  416 T:2888  a2 a4                              ldx #<datum
  417 T:288a  a0 57                              ldy #>datum
  418 T:288c  38                                 sec 
  419 T:288d  20 66 a0                           jsr sgdate

  421 T:2890  4c f6 3a                           jmp menuprg

  423 T:2893                                    ;********** c128

  425 T:2893                                    buf=$0200
  426 T:2893  e6 30                    chrget    inc czei
  427 T:2895  d0 02                              bne chrgot
  428 T:2897  e6 31                              inc czei+1
  429 T:2899  a0 00                    chrgot    ldy #0
  430 T:289b  b1 30                              lda (czei),y
  431 T:289d  f0 04                              beq chrg1
  432 T:289f  c9 20                              cmp #" "
  433 T:28a1  f0 f0                              beq chrget
  434 T:28a3  60                       chrg1     rts 

  436 T:28a4                                    ;**********
  437 T:28a4  a2 00                    linein    ldx #0
  438 T:28a6  20 cf ff                 l1        jsr $ffcf
  439 T:28a9  f0 fb                              beq l1
  440 T:28ab  c9 0d                              cmp #13
  441 T:28ad  f0 08                              beq l2
  442 T:28af  9d 00 02                           sta buf,x
  443 T:28b2  e8                                 inx 
  444 T:28b3  e0 50                              cpx #80
  445 T:28b5  90 ef                              bcc l1
  446 T:28b7  a9 00                    l2        lda #0
  447 T:28b9  9d 00 02                           sta buf,x
  448 T:28bc  a9 0d                              lda #13
  449 T:28be  20 b1 a0                           jsr chout
  450 T:28c1  a9 00                              lda #<buf
  451 T:28c3  a0 02                              ldy #>buf
  452 T:28c5  60                                 rts 

  454 T:28c6                                    ;****
  455 T:28c6  20 99 28                 gfnib     jsr chrgot
  456 T:28c9  4c d2 28                           jmp glnib
  457 T:28cc  e6 30                    gnib      inc czei
  458 T:28ce  d0 02                              bne glnib
  459 T:28d0  e6 31                              inc czei+1
  460 T:28d2  a0 00                    glnib     ldy #0
  461 T:28d4  b1 30                              lda (czei),y
  462 T:28d6  f0 11                              beq glend
  463 T:28d8  c9 20                              cmp #" "
  464 T:28da  f0 0d                              beq glend
  465 T:28dc  38                                 sec 
  466 T:28dd  e9 30                              sbc #"0"
  467 T:28df  c9 0a                              cmp #10
  468 T:28e1  90 02                              bcc glok
  469 T:28e3  e9 07                              sbc #7
  470 T:28e5  29 0f                    glok      and #$0f
  471 T:28e7  18                                 clc 
  472 T:28e8  60                                 rts 
  473 T:28e9  38                       glend     sec 
  474 T:28ea  60                                 rts 
  475 T:28eb  a9 00                    gadr      lda #0
  476 T:28ed  8d 31 40                           sta fadr
  477 T:28f0  8d 32 40                           sta fadr+1
  478 T:28f3  20 c6 28                           jsr gfnib
  479 T:28f6  b0 2a                              bcs gadre1
  480 T:28f8  4c fe 28                           jmp gadr1
  481 T:28fb  20 cc 28                 gnnib     jsr gnib
  482 T:28fe  b0 21                    gadr1     bcs gadre
  483 T:2900  0e 31 40                           asl fadr
  484 T:2903  2e 32 40                           rol fadr+1
  485 T:2906  0e 31 40                           asl fadr
  486 T:2909  2e 32 40                           rol fadr+1
  487 T:290c  0e 31 40                           asl fadr
  488 T:290f  2e 32 40                           rol fadr+1
  489 T:2912  0e 31 40                           asl fadr
  490 T:2915  2e 32 40                           rol fadr+1
  491 T:2918  0d 31 40                           ora fadr
  492 T:291b  8d 31 40                           sta fadr
  493 T:291e  4c fb 28                           jmp gnnib
  494 T:2921  18                       gadre     clc 
  495 T:2922  ae 31 40                 gadre1    ldx fadr
  496 T:2925  ac 32 40                           ldy fadr+1
  497 T:2928  a9 00                              lda #0
  498 T:292a  60                                 rts 
  499 T:292b  20 eb 28                 gbyt      jsr gadr
  500 T:292e  98                                 tya 
  501 T:292f  d0 01                              bne gbyte
  502 T:2931  60                                 rts 
  503 T:2932  a9 fb                    gbyte     lda #enprange
  504 T:2934  60                                 rts 

  506 T:2935  20 2b 29                 gdrv      jsr gbyt
  507 T:2938  d0 10                              bne gdrve
  508 T:293a  b0 0f                              bcs gdrvold
  509 T:293c  e0 0a                              cpx #$0a
  510 T:293e  90 08                              bcc gdrve1
  511 T:2940  8a                                 txa 
  512 T:2941  38                                 sec 
  513 T:2942  e9 0a                              sbc #$0a
  514 T:2944  aa                                 tax 
  515 T:2945  a9 00                              lda #0
  516 T:2947  60                                 rts 
  517 T:2948  a9 f1                    gdrve1    lda #enilldrv
  518 T:294a  60                       gdrve     rts 
  519 T:294b  18                       gdrvold   clc 
  520 T:294c  20 1b a0                           jsr sgdrive
  521 T:294f  aa                                 tax 
  522 T:2950  a9 00                              lda #0
  523 T:2952  60                                 rts 
  524 T:2953  a9 20                    spout     lda #" "
  525 T:2955  4c b1 a0                           jmp chout
  526 T:2958                                    ;**********
  527 T:2958  ad 70 40                 cliprg    lda clibcol
  528 T:295b  20 ca 51                           jsr setbck
  529 T:295e  ad 6f 40                           lda clitcol
  530 T:2961  20 cd 51                           jsr settxt
  531 T:2964  a9 88                              lda #<coprt
  532 T:2966  a0 56                              ldy #>coprt
  533 T:2968  20 8f 38                           jsr textout
  534 T:296b  a9 01                              lda #1
  535 T:296d  8d 54 40                           sta flag
  536 T:2970  20 55 2a                           jsr crout
  537 T:2973  20 57 a0                           jsr version
  538 T:2976  8a                                 txa 
  539 T:2977  18                                 clc 
  540 T:2978  69 10                              adc #vetext
  541 T:297a  90 01                              bcc ver1
  542 T:297c  c8                                 iny 
  543 T:297d  20 8f 38                 ver1      jsr textout
  544 T:2980  20 55 2a                           jsr crout
  545 T:2983  20 55 2a                           jsr crout
  546 T:2986  ad 54 40                 prg1      lda flag
  547 T:2989  29 01                              and #1
  548 T:298b  f0 0f                              beq prg1a
  549 T:298d  18                                 clc 
  550 T:298e  20 1b a0                           jsr sgdrive
  551 T:2991  18                                 clc 
  552 T:2992  69 41                              adc #"A"             ;"a"
  553 T:2994  20 b1 a0                           jsr chout
  554 T:2997  a9 3e                              lda #">"
  555 T:2999  20 b1 a0                           jsr chout
  556 T:299c  20 a4 28                 prg1a     jsr linein
  557 T:299f  18                                 clc 
  558 T:29a0  69 ff                              adc #$ff
  559 T:29a2  85 30                              sta czei
  560 T:29a4  98                                 tya 
  561 T:29a5  69 ff                              adc #$ff
  562 T:29a7  85 31                              sta czei+1
  563 T:29a9  20 93 28                 prg3      jsr chrget
  564 T:29ac  c9 3e                              cmp #">"
  565 T:29ae  f0 f9                              beq prg3
  566 T:29b0  a0 01                              ldy #1
  567 T:29b2  b1 30                              lda (czei),y
  568 T:29b4  c9 3e                              cmp #">"
  569 T:29b6  f0 f1                              beq prg3
  570 T:29b8  20 e5 29                           jsr sbef
  571 T:29bb  f0 09                              beq prg2
  572 T:29bd  20 d3 29                           jsr exec
  573 T:29c0  20 38 2a                 prg6      jsr errout
  574 T:29c3  4c 86 29                           jmp prg1

  576 T:29c6                           prg2      

  578 T:29c6  a5 30                    prg4      lda czei
  579 T:29c8  a4 31                              ldy czei+1
  580 T:29ca  20 33 a0                           jsr chdir
  581 T:29cd  20 38 2a                           jsr errout
  582 T:29d0  4c 86 29                           jmp prg1
  583 T:29d3  aa                       exec      tax 
  584 T:29d4  ca                                 dex 
  585 T:29d5  8a                                 txa 
  586 T:29d6  0a                                 asl 
  587 T:29d7  a8                                 tay 
  588 T:29d8  b9 43 56                           lda adr+1,y
  589 T:29db  48                                 pha 
  590 T:29dc  b9 42 56                           lda adr,y
  591 T:29df  48                                 pha 
  592 T:29e0  a5 30                              lda czei
  593 T:29e2  a4 31                              ldy czei+1
  594 T:29e4  60                                 rts 
  595 T:29e5                                    ;**********
  596 T:29e5  a2 01                    sbef      ldx #1
  597 T:29e7  8e 50 40                           stx cnt
  598 T:29ea  ca                                 dex 
  599 T:29eb  a0 00                    sb1       ldy #0
  600 T:29ed  bd d0 55                 sb2       lda bef,x
  601 T:29f0  f0 38                              beq notf
  602 T:29f2  38                                 sec 
  603 T:29f3  f1 30                              sbc (czei),y
  604 T:29f5  f0 06                              beq nexc
  605 T:29f7  c9 80                              cmp #$80
  606 T:29f9  d0 06                              bne nexb
  607 T:29fb  f0 12                              beq fnd
  608 T:29fd  e8                       nexc      inx 
  609 T:29fe  c8                                 iny 
  610 T:29ff  d0 ec                              bne sb2
  611 T:2a01  bd d0 55                 nexb      lda bef,x
  612 T:2a04  10 06                              bpl sb3
  613 T:2a06  e8                                 inx 
  614 T:2a07  ee 50 40                           inc cnt
  615 T:2a0a  d0 df                              bne sb1
  616 T:2a0c  e8                       sb3       inx 
  617 T:2a0d  d0 f2                              bne nexb
  618 T:2a0f  c8                       fnd       iny 
  619 T:2a10  b1 30                              lda (czei),y
  620 T:2a12  f0 08                              beq fnd2
  621 T:2a14  c9 41                              cmp #"A"
  622 T:2a16  90 04                              bcc fnd2
  623 T:2a18  c9 5b                              cmp #"Z"+1
  624 T:2a1a  90 e5                              bcc nexb
  625 T:2a1c  98                       fnd2      tya 
  626 T:2a1d  18                                 clc 
  627 T:2a1e  65 30                              adc czei
  628 T:2a20  85 30                              sta czei
  629 T:2a22  90 02                              bcc fnd1
  630 T:2a24  e6 31                              inc czei+1
  631 T:2a26  ad 50 40                 fnd1      lda cnt
  632 T:2a29  60                                 rts 
  633 T:2a2a  a9 00                    notf      lda #0
  634 T:2a2c  60                                 rts 
  635 T:2a2d  ad 54 40                 pp        lda flag
  636 T:2a30  49 01                              eor #1
  637 T:2a32  8d 54 40                           sta flag                ; prompt
  638 T:2a35  a9 00                              lda #0
  639 T:2a37  60                                 rts 
  640 T:2a38                                    ;*********
  641 T:2a38  aa                       errout    tax 
  642 T:2a39  f0 1a                              beq crout
  643 T:2a3b  20 55 2a                           jsr crout
  644 T:2a3e  8a                                 txa 
  645 T:2a3f  20 5f 2a                           jsr errtxt
  646 T:2a42  85 18                              sta zei
  647 T:2a44  84 19                              sty zei+1
  648 T:2a46  a0 00                              ldy #0
  649 T:2a48  b1 18                    erro1     lda (zei),y
  650 T:2a4a  f0 06                              beq erro2
  651 T:2a4c  20 b1 a0                           jsr chout
  652 T:2a4f  c8                                 iny 
  653 T:2a50  d0 f6                              bne erro1
  654 T:2a52                           erro2     
  655 T:2a52  20 55 2a                           jsr crout
  656 T:2a55  a9 0d                    crout     lda #13
  657 T:2a57  4c b1 a0                           jmp chout
  658 T:2a5a                                    ;**********

  660 T:2a5a  68                       pmenu     pla 
  661 T:2a5b  68                                 pla 
  662 T:2a5c  4c f6 3a                           jmp menuprg

  664 T:2a5f                                    ;**********
  665 T:2a5f  a2 00                    errtxt    ldx #0
  666 T:2a61  dd a7 57                 errt1     cmp errnum,x
  667 T:2a64  f0 1a                              beq errt2
  668 T:2a66  e8                                 inx 
  669 T:2a67  e0 2d                              cpx #erranz
  670 T:2a69  d0 f6                              bne errt1
  671 T:2a6b  a2 00                              ldx #0
  672 T:2a6d  20 57 4e                           jsr hexbuf
  673 T:2a70  bd 03 5b                 errt3     lda errnumt-2,x
  674 T:2a73  9d 00 02                           sta iobuf,x
  675 T:2a76  f0 03                              beq errte
  676 T:2a78  e8                                 inx 
  677 T:2a79  d0 f5                              bne errt3
  678 T:2a7b  a9 00                    errte     lda #<iobuf
  679 T:2a7d  a0 02                              ldy #>iobuf
  680 T:2a7f  60                                 rts 
  681 T:2a80  a9 d4                    errt2     lda #<ert
  682 T:2a82  85 18                              sta zei
  683 T:2a84  a9 57                              lda #>ert
  684 T:2a86  85 19                              sta zei+1
  685 T:2a88  e8                                 inx 
  686 T:2a89  a0 00                    errt4     ldy #0
  687 T:2a8b  ca                                 dex 
  688 T:2a8c  f0 14                              beq errtok
  689 T:2a8e  b1 18                    errt5     lda (zei),y
  690 T:2a90  f0 03                              beq errt6
  691 T:2a92  c8                                 iny 
  692 T:2a93  d0 f9                              bne errt5
  693 T:2a95  c8                       errt6     iny 
  694 T:2a96  98                                 tya 
  695 T:2a97  18                                 clc 
  696 T:2a98  65 18                              adc zei
  697 T:2a9a  85 18                              sta zei
  698 T:2a9c  90 eb                              bcc errt4
  699 T:2a9e  e6 19                              inc zei+1
  700 T:2aa0  d0 e7                              bne errt4
  701 T:2aa2  a5 18                    errtok    lda zei
  702 T:2aa4  a4 19                              ldy zei+1
  703 T:2aa6  60                                 rts 
  704 T:2aa7                                    ;********

  712 T:2aa7                                    ;PR2 2.4 .S60 ==0801==

  714 T:2aa7  85 18                    lload     sta zei
  715 T:2aa9  84 19                              sty zei+1
  716 T:2aab  a0 00                              ldy #0
  717 T:2aad  b1 18                    lll0      lda (zei),y
  718 T:2aaf  f0 08                              beq lll2
  719 T:2ab1  c9 2f                              cmp #"/"
  720 T:2ab3  f0 03                              beq lll1
  721 T:2ab5  c8                                 iny 
  722 T:2ab6  d0 f5                              bne lll0
  723 T:2ab8  c8                       lll1      iny 
  724 T:2ab9  98                       lll2      tya 
  725 T:2aba  18                                 clc 
  726 T:2abb  65 18                              adc zei
  727 T:2abd  8d 59 40                           sta fad2
  728 T:2ac0  a5 19                              lda zei+1
  729 T:2ac2  69 00                              adc #0
  730 T:2ac4  8d 5a 40                           sta fad2+1
  731 T:2ac7  a5 18                              lda zei
  732 T:2ac9  a4 19                              ldy zei+1
  733 T:2acb  20 28 2c                           jsr rwopen
  734 T:2ace  d0 2e                              bne llor1a
  735 T:2ad0  a0 39                              ldy #fpanz
  736 T:2ad2  a9 02                              lda #2
  737 T:2ad4  91 18                              sta (zei),y
  738 T:2ad6  c8                                 iny 
  739 T:2ad7  a9 00                              lda #0
  740 T:2ad9  91 18                              sta (zei),y
  741 T:2adb  a0 44                              ldy #fpbank
  742 T:2add  a9 0e                              lda #prgbank
  743 T:2adf  91 18                              sta (zei),y
  744 T:2ae1  a0 3b                              ldy #fpadr
  745 T:2ae3  a9 00                              lda #<buffer
  746 T:2ae5  91 18                              sta (zei),y
  747 T:2ae7  c8                                 iny 
  748 T:2ae8  a9 6c                              lda #>buffer
  749 T:2aea  91 18                              sta (zei),y
  750 T:2aec  a5 18                              lda zei
  751 T:2aee  8d 5d 40                           sta fl1
  752 T:2af1  a5 19                              lda zei+1
  753 T:2af3  8d 5e 40                           sta fl1+1
  754 T:2af6  ae 51 40                           ldx handle
  755 T:2af9  20 4e a0                           jsr dread
  756 T:2afc  d0 3b                              bne lloe
  757 T:2afe  d0 58                    llor1a    bne llor
  758 T:2b00  ad 5d 40                           lda fl1
  759 T:2b03  85 18                              sta zei
  760 T:2b05  ad 5e 40                           lda fl1+1
  761 T:2b08  85 19                              sta zei+1
  762 T:2b0a  a0 3b                              ldy #fpadr
  763 T:2b0c  ad 00 6c                           lda buffer
  764 T:2b0f  8d 57 40                           sta nadr
  765 T:2b12  91 18                              sta (zei),y
  766 T:2b14  ad 01 6c                           lda buffer+1
  767 T:2b17  8d 58 40                           sta nadr+1
  768 T:2b1a  c8                                 iny 
  769 T:2b1b  91 18                              sta (zei),y
  770 T:2b1d  a0 1a                              ldy #fpsize
  771 T:2b1f  b1 18                              lda (zei),y
  772 T:2b21  aa                                 tax 
  773 T:2b22  c8                                 iny 
  774 T:2b23  b1 18                              lda (zei),y
  775 T:2b25  a0 3a                              ldy #fpanz+1
  776 T:2b27  91 18                              sta (zei),y
  777 T:2b29  88                                 dey 
  778 T:2b2a  8a                                 txa 
  779 T:2b2b  91 18                              sta (zei),y
  780 T:2b2d  ae 51 40                           ldx handle
  781 T:2b30  20 4e a0                           jsr dread
  782 T:2b33  c9 ec                              cmp #eneof
  783 T:2b35  d0 02                              bne lloe
  784 T:2b37  a9 00                              lda #0
  785 T:2b39  48                       lloe      pha 
  786 T:2b3a  ae 51 40                           ldx handle
  787 T:2b3d  20 4b a0                           jsr dclose
  788 T:2b40  68                                 pla 
  789 T:2b41  d0 15                              bne llor
  790 T:2b43  ad 57 40                           lda nadr
  791 T:2b46  8d 6d 40                           sta llvec
  792 T:2b49  ad 58 40                           lda nadr+1
  793 T:2b4c  8d 6e 40                           sta llvec+1
  794 T:2b4f  ad 59 40                           lda fad2
  795 T:2b52  ac 5a 40                           ldy fad2+1
  796 T:2b55  6c 6d 40                           jmp (llvec)
  797 T:2b58  60                       llor      rts 
  798 T:2b59                                    ;**********
  799 T:2b59  a2 e7                    del       ldx #$e7
  800 T:2b5b  4c 3c a0                           jmp delete
  801 T:2b5e                                    ;**********
  802 T:2b5e  4c 42 a0                 md        jmp mkdir
  803 T:2b61                                    ;**********
  804 T:2b61  4c 45 a0                 rd        jmp rmdir
  805 T:2b64                                    ;**********
  806 T:2b64  a2 20                    cr        ldx #$20
  807 T:2b66  4c 3f a0                           jmp dcreate
  808 T:2b69                                    ;**********

  810 T:2b69  85 30                    pformat   sta czei
  811 T:2b6b  84 31                              sty czei+1
  812 T:2b6d  a9 01                              lda #1
  813 T:2b6f  8d 30 40                           sta fformat
  814 T:2b72  20 99 28                 pff0      jsr chrgot
  815 T:2b75  f0 27                              beq pfo1
  816 T:2b77  c9 2f                              cmp #"/"
  817 T:2b79  d0 0d                              bne pff1
  818 T:2b7b  20 93 28                           jsr chrget
  819 T:2b7e  20 2b 29                           jsr gbyt
  820 T:2b81  d0 ef                              bne pff0
  821 T:2b83  8e 30 40                           stx fformat
  822 T:2b86  f0 ea                              beq pff0
  823 T:2b88  aa                       pff1      tax 
  824 T:2b89  a0 01                              ldy #1
  825 T:2b8b  b1 30                              lda (czei),y
  826 T:2b8d  c9 3a                              cmp #":"
  827 T:2b8f  d0 0d                              bne pfo1
  828 T:2b91  20 93 28                           jsr chrget
  829 T:2b94  20 93 28                           jsr chrget
  830 T:2b97  8a                                 txa 
  831 T:2b98  38                                 sec 
  832 T:2b99  e9 41                              sbc #"A"
  833 T:2b9b  4c a2 2b                           jmp pfo2
  834 T:2b9e  18                       pfo1      clc 
  835 T:2b9f  20 1b a0                           jsr sgdrive
  836 T:2ba2  8d 31 40                 pfo2      sta fadr
  837 T:2ba5  ae 30 40                           ldx fformat
  838 T:2ba8  20 15 a0                           jsr flopfmt
  839 T:2bab  d0 71                              bne pfoe
  840 T:2bad  20 99 28                           jsr chrgot
  841 T:2bb0  f0 6c                              beq pfoe
  842 T:2bb2  ad 31 40                           lda fadr
  843 T:2bb5  38                                 sec 
  844 T:2bb6  20 1b a0                           jsr sgdrive
  845 T:2bb9  d0 63                              bne pfoe
  846 T:2bbb  a9 02                              lda #<ddtp
  847 T:2bbd  a0 40                              ldy #>ddtp
  848 T:2bbf  38                                 sec 
  849 T:2bc0  20 18 a0                           jsr sgdta
  850 T:2bc3  a9 00                              lda #0
  851 T:2bc5  aa                                 tax 
  852 T:2bc6  a0 01                              ldy #1             ; ersten leeren eintrag
  853 T:2bc8  20 2d a0                           jsr sfirso
  854 T:2bcb  d0 51                              bne pfoe
  855 T:2bcd  a0 00                              ldy #0
  856 T:2bcf  a2 00                              ldx #0
  857 T:2bd1  b1 30                    pfo3      lda (czei),y
  858 T:2bd3  f0 18                              beq pfoleer
  859 T:2bd5  c9 2e                              cmp #"."
  860 T:2bd7  f0 15                              beq pfoext
  861 T:2bd9  9d 0e 40                           sta ddtp+dgname,x
  862 T:2bdc  c8                                 iny 
  863 T:2bdd  e8                                 inx 
  864 T:2bde  e0 08                              cpx #8
  865 T:2be0  90 ef                              bcc pfo3
  866 T:2be2  b1 30                    pfo3a     lda (czei),y
  867 T:2be4  f0 07                              beq pfoleer
  868 T:2be6  c9 2e                              cmp #"."
  869 T:2be8  f0 04                              beq pfoext
  870 T:2bea  c8                                 iny 
  871 T:2beb  d0 f5                              bne pfo3a
  872 T:2bed  88                       pfoleer   dey 
  873 T:2bee  a9 20                    pfoext    lda #" "
  874 T:2bf0  e0 08                              cpx #8
  875 T:2bf2  f0 06                              beq pfoex1
  876 T:2bf4  9d 0e 40                           sta ddtp+dgname,x
  877 T:2bf7  e8                                 inx 
  878 T:2bf8  d0 f4                              bne pfoext
  879 T:2bfa  c8                       pfoex1    iny 
  880 T:2bfb  a2 00                              ldx #0
  881 T:2bfd  b1 30                    pfo4      lda (czei),y
  882 T:2bff  f0 09                              beq pfoend
  883 T:2c01  9d 16 40                           sta ddtp+dgext,x
  884 T:2c04  c8                                 iny 
  885 T:2c05  e8                                 inx 
  886 T:2c06  e0 03                              cpx #3
  887 T:2c08  d0 f3                              bne pfo4
  888 T:2c0a  a9 20                    pfoend    lda #" "
  889 T:2c0c  e0 03                              cpx #3
  890 T:2c0e  f0 06                              beq pfoe1
  891 T:2c10  9d 16 40                           sta ddtp+dgext,x
  892 T:2c13  e8                                 inx 
  893 T:2c14  d0 f4                              bne pfoend
  894 T:2c16  a9 08                    pfoe1     lda #$08
  895 T:2c18  8d 19 40                           sta ddtp+dgattr
  896 T:2c1b  4c 39 a0                           jmp wrentry
  897 T:2c1e  60                       pfoe      rts 

  899 T:2c1f                                    ;**********
  900 T:2c1f  4c 33 a0                 cd        jmp chdir
  901 T:2c22                                    ;**********
  902 T:2c22  20 03 a0                 ex        jsr exit
  903 T:2c25  6c fc ff                           jmp ($fffc)
  904 T:2c28                                    ;**********
  905 T:2c28  20 48 a0                 rwopen    jsr dopen
  906 T:2c2b  86 18                              stx zei
  907 T:2c2d  84 19                              sty zei+1
  908 T:2c2f  d0 19                              bne prwe
  909 T:2c31  8e 31 40                           stx fadr
  910 T:2c34  8c 32 40                           sty fadr+1
  911 T:2c37  a0 2e                              ldy #fphandle
  912 T:2c39  b1 18                              lda (zei),y
  913 T:2c3b  8d 51 40                           sta handle
  914 T:2c3e  a0 1a                              ldy #fpsize
  915 T:2c40  b1 18                    flen2     lda (zei),y
  916 T:2c42  99 45 40                           sta laenge-fpsize,y
  917 T:2c45  c8                                 iny 
  918 T:2c46  c0 1e                              cpy #fpsize+4
  919 T:2c48  d0 f6                              bne flen2
  920 T:2c4a  60                       prwe      rts 
  921 T:2c4b                                    ;****
  922 T:2c4b  20 28 2c                 pread     jsr rwopen
  923 T:2c4e  d0 6e                              bne preade
  924 T:2c50  20 32 3a                           jsr prttst
  925 T:2c53  ad 31 40                 read      lda fadr
  926 T:2c56  85 18                              sta zei
  927 T:2c58  ad 32 40                           lda fadr+1
  928 T:2c5b  85 19                              sta zei+1
  929 T:2c5d  a0 39                              ldy #fpanz
  930 T:2c5f  ad 00 40                           lda prblen
  931 T:2c62  91 18                              sta (zei),y
  932 T:2c64  c8                                 iny 
  933 T:2c65  ad 01 40                           lda prblen+1
  934 T:2c68  91 18                              sta (zei),y
  935 T:2c6a  a0 3b                              ldy #fpadr
  936 T:2c6c  a9 00                              lda #<buffer
  937 T:2c6e  91 18                              sta (zei),y
  938 T:2c70  c8                                 iny 
  939 T:2c71  a9 6c                              lda #>buffer
  940 T:2c73  91 18                              sta (zei),y
  941 T:2c75  a0 44                              ldy #fpbank
  942 T:2c77  a9 0e                              lda #prgbank
  943 T:2c79  91 18                              sta (zei),y
  944 T:2c7b  ae 51 40                           ldx handle
  945 T:2c7e  20 4e a0                           jsr dread
  946 T:2c81  d0 2e                              bne pread1
  947 T:2c83  ae 00 40                           ldx prblen
  948 T:2c86  ac 01 40                           ldy prblen+1
  949 T:2c89  20 ca 2c                           jsr rdprint
  950 T:2c8c  b0 23                              bcs pread1
  951 T:2c8e  ad 5f 40                           lda laenge
  952 T:2c91  38                                 sec 
  953 T:2c92  ed 00 40                           sbc prblen
  954 T:2c95  8d 5f 40                           sta laenge
  955 T:2c98  ad 60 40                           lda laenge+1
  956 T:2c9b  ed 01 40                           sbc prblen+1
  957 T:2c9e  8d 60 40                           sta laenge+1
  958 T:2ca1  b0 0b                              bcs rd1
  959 T:2ca3  ad 61 40                           lda laenge+2
  960 T:2ca6  d0 03                              bne rd2
  961 T:2ca8  ce 62 40                           dec laenge+3
  962 T:2cab  ce 61 40                 rd2       dec laenge+2
  963 T:2cae  4c 53 2c                 rd1       jmp read
  964 T:2cb1  c9 ec                    pread1    cmp #eneof
  965 T:2cb3  d0 09                              bne preade
  966 T:2cb5  ae 5f 40                           ldx laenge
  967 T:2cb8  ac 60 40                           ldy laenge+1
  968 T:2cbb  20 ca 2c                           jsr rdprint
  969 T:2cbe  48                       preade    pha 
  970 T:2cbf  ae 51 40                           ldx handle
  971 T:2cc2  20 4b a0                           jsr dclose
  972 T:2cc5  20 49 3a                           jsr prtoff
  973 T:2cc8  68                                 pla 
  974 T:2cc9  60                                 rts 
  975 T:2cca                                    ;****
  976 T:2cca  8e 5b 40                 rdprint   stx tplen
  977 T:2ccd  8c 5c 40                           sty tplen+1
  978 T:2cd0  8a                                 txa 
  979 T:2cd1  0d 5c 40                           ora tplen+1
  980 T:2cd4  f0 33                              beq wrle
  981 T:2cd6  a9 00                              lda #<buffer
  982 T:2cd8  85 18                              sta zei
  983 T:2cda  a9 6c                              lda #>buffer
  984 T:2cdc  85 19                              sta zei+1
  985 T:2cde  a0 00                    rdp1      ldy #0
  986 T:2ce0  b1 18                              lda (zei),y
  987 T:2ce2  20 b1 a0                           jsr chout
  988 T:2ce5  20 9f a0                           jsr bgkey
  989 T:2ce8  c9 03                              cmp #3
  990 T:2cea  d0 04                              bne wrls
  991 T:2cec  a9 ea                              lda #enbreak
  992 T:2cee  38                                 sec 
  993 T:2cef  60                                 rts 
  994 T:2cf0  e6 18                    wrls      inc zei
  995 T:2cf2  d0 02                              bne rdp1a
  996 T:2cf4  e6 19                              inc zei+1
  997 T:2cf6  ad 5b 40                 rdp1a     lda tplen
  998 T:2cf9  d0 03                              bne rdp2
  999 T:2cfb  ce 5c 40                           dec tplen+1
 1000 T:2cfe  ce 5b 40                 rdp2      dec tplen
 1001 T:2d01  ad 5b 40                           lda tplen
 1002 T:2d04  0d 5c 40                           ora tplen+1
 1003 T:2d07  d0 d5                              bne rdp1
 1004 T:2d09  18                       wrle      clc 
 1005 T:2d0a  60                                 rts 
 1006 T:2d0b                                    ;**********
 1007 T:2d0b  8d 57 40                 pwrite    sta nadr
 1008 T:2d0e  8c 58 40                           sty nadr+1
 1009 T:2d11  a2 20                              ldx #$20
 1010 T:2d13  20 3f a0                           jsr dcreate
 1011 T:2d16  d0 f1                              bne wrle
 1012 T:2d18  ad 57 40                           lda nadr
 1013 T:2d1b  ac 58 40                           ldy nadr+1
 1014 T:2d1e  20 28 2c                           jsr rwopen
 1015 T:2d21  d0 43                              bne pwritee
 1016 T:2d23  20 6f 2d                 wrloop    jsr wrinput
 1017 T:2d26  8d 53 40                           sta st1
 1018 T:2d29  8e 5b 40                           stx tplen
 1019 T:2d2c  8c 5c 40                           sty tplen+1
 1020 T:2d2f  ad 31 40                           lda fadr
 1021 T:2d32  85 18                              sta zei
 1022 T:2d34  ad 32 40                           lda fadr+1
 1023 T:2d37  85 19                              sta zei+1
 1024 T:2d39  a0 39                              ldy #fpanz
 1025 T:2d3b  ad 5b 40                           lda tplen
 1026 T:2d3e  91 18                              sta (zei),y
 1027 T:2d40  c8                                 iny 
 1028 T:2d41  ad 5c 40                           lda tplen+1
 1029 T:2d44  91 18                              sta (zei),y
 1030 T:2d46  a0 3b                              ldy #fpadr
 1031 T:2d48  a9 00                              lda #<buffer
 1032 T:2d4a  91 18                              sta (zei),y
 1033 T:2d4c  c8                                 iny 
 1034 T:2d4d  a9 6c                              lda #>buffer
 1035 T:2d4f  91 18                              sta (zei),y
 1036 T:2d51  a0 44                              ldy #fpbank
 1037 T:2d53  a9 0e                              lda #prgbank
 1038 T:2d55  91 18                              sta (zei),y
 1039 T:2d57  ae 51 40                           ldx handle
 1040 T:2d5a  20 51 a0                           jsr dwrite
 1041 T:2d5d  d0 07                              bne pwritee
 1042 T:2d5f  ad 53 40                           lda st1
 1043 T:2d62  f0 bf                              beq wrloop
 1044 T:2d64  a9 00                              lda #0
 1045 T:2d66  48                       pwritee   pha 
 1046 T:2d67  ae 51 40                           ldx handle
 1047 T:2d6a  20 4b a0                           jsr dclose
 1048 T:2d6d  68                                 pla 
 1049 T:2d6e  60                                 rts 
 1050 T:2d6f                                    ;****
 1051 T:2d6f  a9 00                    wrinput   lda #<buffer
 1052 T:2d71  85 18                              sta zei
 1053 T:2d73  a9 6c                              lda #>buffer
 1054 T:2d75  85 19                              sta zei+1
 1055 T:2d77  a9 00                              lda #0
 1056 T:2d79  8d 5b 40                           sta tplen
 1057 T:2d7c  8d 5c 40                           sta tplen+1
 1058 T:2d7f  20 9f a0                 wril      jsr bgkey
 1059 T:2d82  f0 fb                              beq wril
 1060 T:2d84  20 b1 a0                           jsr chout
 1061 T:2d87  a0 00                              ldy #0
 1062 T:2d89  91 18                              sta (zei),y
 1063 T:2d8b  48                                 pha 
 1064 T:2d8c  e6 18                              inc zei
 1065 T:2d8e  d0 02                              bne wri1
 1066 T:2d90  e6 19                              inc zei+1
 1067 T:2d92  ee 5b 40                 wri1      inc tplen
 1068 T:2d95  d0 03                              bne wri2
 1069 T:2d97  ee 5c 40                           inc tplen+1
 1070 T:2d9a  68                       wri2      pla 
 1071 T:2d9b  c9 03                              cmp #3             ;run/stop
 1072 T:2d9d  f0 13                              beq wrie
 1073 T:2d9f  ad 5c 40                           lda tplen+1
 1074 T:2da2  cd 01 40                           cmp prblen+1
 1075 T:2da5  d0 d8                              bne wril
 1076 T:2da7  ad 5b 40                           lda tplen
 1077 T:2daa  cd 00 40                           cmp prblen
 1078 T:2dad  d0 d0                              bne wril
 1079 T:2daf  a9 00                              lda #0
 1080 T:2db1  2c                                 .byt $2c
 1081 T:2db2  a9 ec                    wrie      lda #eneof
 1082 T:2db4  ae 5b 40                           ldx tplen
 1083 T:2db7  ac 5c 40                           ldy tplen+1
 1084 T:2dba  60                                 rts 
 1085 T:2dbb                                    ;*********
 1086 T:2dbb  85 18                    pcopy     sta zei
 1087 T:2dbd  84 19                              sty zei+1
 1088 T:2dbf  a2 00                              ldx #0
 1089 T:2dc1  a0 ff                              ldy #<-1
 1090 T:2dc3  c8                       pcc1      iny 
 1091 T:2dc4  b1 18                              lda (zei),y
 1092 T:2dc6  f0 15                              beq pcce
 1093 T:2dc8  c9 20                              cmp #" "
 1094 T:2dca  f0 f7                              beq pcc1
 1095 T:2dcc  b1 18                    pcc2      lda (zei),y
 1096 T:2dce  c9 20                              cmp #" "
 1097 T:2dd0  f0 0b                              beq pcc3a
 1098 T:2dd2  9d 00 01                           sta dbuf,x
 1099 T:2dd5  c9 00                              cmp #0
 1100 T:2dd7  f0 04                              beq pcce
 1101 T:2dd9  c8                                 iny 
 1102 T:2dda  e8                                 inx 
 1103 T:2ddb  d0 ef                              bne pcc2
 1104 T:2ddd  a9 00                    pcc3a pcce lda #0
 1105 T:2ddf  9d 00 01                           sta dbuf,x
 1106 T:2de2  88                                 dey 
 1107 T:2de3  c8                       pcc4      iny 
 1108 T:2de4  b1 18                              lda (zei),y
 1109 T:2de6  c9 20                              cmp #" "
 1110 T:2de8  f0 f9                              beq pcc4
 1111 T:2dea  98                                 tya 
 1112 T:2deb  18                                 clc 
 1113 T:2dec  65 18                              adc zei
 1114 T:2dee  8d 57 40                           sta nadr
 1115 T:2df1  a5 19                              lda zei+1
 1116 T:2df3  69 00                              adc #0
 1117 T:2df5  8d 58 40                           sta nadr+1
 1118 T:2df8  20 15 31                           jsr gsoutar
 1119 T:2dfb  d0 03                              bne pcc3
 1120 T:2dfd  a9 ea                              lda #enbreak
 1121 T:2dff  60                                 rts 
 1122 T:2e00  a9 00                    pcc3      lda #<dbuf
 1123 T:2e02  a0 01                              ldy #>dbuf
 1124 T:2e04  20 28 2c                           jsr rwopen
 1125 T:2e07  d0 0b                              bne pcerr1a
 1126 T:2e09  ad 57 40                           lda nadr
 1127 T:2e0c  ac 58 40                           ldy nadr+1
 1128 T:2e0f  a2 20                              ldx #$20
 1129 T:2e11  20 3f a0                           jsr dcreate
 1130 T:2e14  d0 79                    pcerr1a   bne pcerr1b
 1131 T:2e16  ad 57 40                           lda nadr
 1132 T:2e19  ac 58 40                           ldy nadr+1
 1133 T:2e1c  20 48 a0                           jsr dopen
 1134 T:2e1f  8e 59 40                           stx fad2
 1135 T:2e22  8c 5a 40                           sty fad2+1
 1136 T:2e25  08                                 php 
 1137 T:2e26  86 18                              stx zei
 1138 T:2e28  84 19                              sty zei+1
 1139 T:2e2a  a0 2e                              ldy #fphandle
 1140 T:2e2c  b1 18                              lda (zei),y
 1141 T:2e2e  8d 52 40                           sta handl2
 1142 T:2e31  28                                 plp 
 1143 T:2e32  d0 5d                              bne pcerr2a
 1144 T:2e34  ad 31 40                 pcread    lda fadr
 1145 T:2e37  85 18                              sta zei
 1146 T:2e39  ad 32 40                           lda fadr+1
 1147 T:2e3c  85 19                              sta zei+1
 1148 T:2e3e  a0 39                              ldy #fpanz
 1149 T:2e40  ad 00 40                           lda prblen
 1150 T:2e43  91 18                              sta (zei),y
 1151 T:2e45  c8                                 iny 
 1152 T:2e46  ad 01 40                           lda prblen+1
 1153 T:2e49  91 18                              sta (zei),y
 1154 T:2e4b  a0 3b                              ldy #fpadr
 1155 T:2e4d  a9 00                              lda #<buffer
 1156 T:2e4f  91 18                              sta (zei),y
 1157 T:2e51  c8                                 iny 
 1158 T:2e52  a9 6c                              lda #>buffer
 1159 T:2e54  91 18                              sta (zei),y
 1160 T:2e56  a0 44                              ldy #fpbank
 1161 T:2e58  a9 0e                              lda #prgbank
 1162 T:2e5a  91 18                              sta (zei),y
 1163 T:2e5c  ae 51 40                           ldx handle
 1164 T:2e5f  20 4e a0                           jsr dread
 1165 T:2e62  8d 53 40                           sta st1
 1166 T:2e65  c9 ec                              cmp #eneof
 1167 T:2e67  f0 35                              beq pcrwa
 1168 T:2e69  ad 01 40                           lda prblen+1
 1169 T:2e6c  8d 5c 40                           sta tplen+1
 1170 T:2e6f  ad 00 40                           lda prblen
 1171 T:2e72  8d 5b 40                           sta tplen
 1172 T:2e75  ad 5f 40                           lda laenge
 1173 T:2e78  38                                 sec 
 1174 T:2e79  ed 00 40                           sbc prblen
 1175 T:2e7c  8d 5f 40                           sta laenge
 1176 T:2e7f  ad 60 40                           lda laenge+1
 1177 T:2e82  ed 01 40                           sbc prblen+1
 1178 T:2e85  8d 60 40                           sta laenge+1
 1179 T:2e88  b0 0f                              bcs pcrw1
 1180 T:2e8a  ad 61 40                           lda laenge+2
 1181 T:2e8d  d0 07                              bne pcrw2
 1182 T:2e8f  d0 5c                    pcerr1b   bne pcerr1
 1183 T:2e91  d0 52                    pcerr2a   bne pcerr2
 1184 T:2e93  ce 62 40                           dec laenge+3
 1185 T:2e96  ce 61 40                 pcrw2     dec laenge+2
 1186 T:2e99  4c aa 2e                 pcrw1     jmp pcrw3
 1187 T:2e9c  f0 96                    pcreada   beq pcread
 1188 T:2e9e  ad 5f 40                 pcrwa     lda laenge
 1189 T:2ea1  8d 5b 40                           sta tplen
 1190 T:2ea4  ad 60 40                           lda laenge+1
 1191 T:2ea7  8d 5c 40                           sta tplen+1
 1192 T:2eaa  ad 59 40                 pcrw3     lda fad2
 1193 T:2ead  85 18                              sta zei
 1194 T:2eaf  ad 5a 40                           lda fad2+1
 1195 T:2eb2  85 19                              sta zei+1
 1196 T:2eb4  a0 39                              ldy #fpanz
 1197 T:2eb6  ad 5b 40                           lda tplen
 1198 T:2eb9  91 18                              sta (zei),y
 1199 T:2ebb  c8                                 iny 
 1200 T:2ebc  ad 5c 40                           lda tplen+1
 1201 T:2ebf  91 18                              sta (zei),y
 1202 T:2ec1  a0 3b                              ldy #fpadr
 1203 T:2ec3  a9 00                              lda #<buffer
 1204 T:2ec5  91 18                              sta (zei),y
 1205 T:2ec7  c8                                 iny 
 1206 T:2ec8  a9 6c                              lda #>buffer
 1207 T:2eca  91 18                              sta (zei),y
 1208 T:2ecc  a0 44                              ldy #fpbank
 1209 T:2ece  a9 0e                              lda #prgbank
 1210 T:2ed0  91 18                              sta (zei),y
 1211 T:2ed2  ae 52 40                           ldx handl2
 1212 T:2ed5  20 51 a0                           jsr dwrite
 1213 T:2ed8  d0 0b                              bne pcerr2
 1214 T:2eda  ad 53 40                           lda st1
 1215 T:2edd  f0 bd                              beq pcreada
 1216 T:2edf  c9 ec                              cmp #eneof
 1217 T:2ee1  d0 02                              bne pcerr2
 1218 T:2ee3  a9 00                              lda #0
 1219 T:2ee5  48                       pcerr2    pha 
 1220 T:2ee6  ae 52 40                           ldx handl2
 1221 T:2ee9  20 4b a0                           jsr dclose
 1222 T:2eec  68                                 pla 
 1223 T:2eed  48                       pcerr1    pha 
 1224 T:2eee  ae 51 40                           ldx handle
 1225 T:2ef1  20 4b a0                           jsr dclose
 1226 T:2ef4  68                                 pla 
 1227 T:2ef5  60                                 rts 
 1228 T:2ef6                                    ;**********
 1229 T:2ef6  85 18                    psave     sta zei
 1230 T:2ef8  84 19                              sty zei+1
 1231 T:2efa  a2 00                              ldx #0
 1232 T:2efc  a0 ff                              ldy #<-1
 1233 T:2efe  c8                       pss1      iny 
 1234 T:2eff  b1 18                              lda (zei),y
 1235 T:2f01  f0 15                              beq psse
 1236 T:2f03  c9 20                              cmp #" "
 1237 T:2f05  f0 f7                              beq pss1
 1238 T:2f07  b1 18                    pss2      lda (zei),y
 1239 T:2f09  c9 20                              cmp #" "
 1240 T:2f0b  f0 0b                              beq pss3a
 1241 T:2f0d  9d 00 01                           sta dbuf,x
 1242 T:2f10  c9 00                              cmp #0
 1243 T:2f12  f0 04                              beq psse
 1244 T:2f14  c8                                 iny 
 1245 T:2f15  e8                                 inx 
 1246 T:2f16  d0 ef                              bne pss2
 1247 T:2f18  a9 00                    pss3a psse lda #0
 1248 T:2f1a  9d 00 01                           sta dbuf,x
 1249 T:2f1d  88                                 dey 
 1250 T:2f1e  c8                       pss4      iny 
 1251 T:2f1f  b1 18                              lda (zei),y
 1252 T:2f21  c9 20                              cmp #" "
 1253 T:2f23  f0 f9                              beq pss4
 1254 T:2f25  98                                 tya 
 1255 T:2f26  18                                 clc 
 1256 T:2f27  65 18                              adc zei
 1257 T:2f29  85 18                              sta zei
 1258 T:2f2b  a5 19                              lda zei+1
 1259 T:2f2d  69 00                              adc #0
 1260 T:2f2f  85 19                              sta zei+1
 1261 T:2f31  a0 00                              ldy #0
 1262 T:2f33  b1 18                    psa1      lda (zei),y
 1263 T:2f35  99 00 02                           sta buf,y
 1264 T:2f38  f0 03                              beq psa2
 1265 T:2f3a  c8                                 iny 
 1266 T:2f3b  d0 f6                              bne psa1
 1267 T:2f3d  8c 41 40                 psa2      sty dint1
 1268 T:2f40  98                                 tya 
 1269 T:2f41  a2 00                              ldx #<buf
 1270 T:2f43  a0 02                              ldy #>buf
 1271 T:2f45  20 bd ff                           jsr setfnpar
 1272 T:2f48  ae 33 40                           ldx iecunit
 1273 T:2f4b  a9 01                              lda #1
 1274 T:2f4d  a0 01                              ldy #1
 1275 T:2f4f  20 ba ff                           jsr setfpar
 1276 T:2f52                                    ;****
 1277 T:2f52  a0 00                              ldy #0
 1278 T:2f54  b9 00 02                 pts1      lda buf,y
 1279 T:2f57  c8                                 iny 
 1280 T:2f58  c9 20                              cmp #" "
 1281 T:2f5a  f0 f8                              beq pts1
 1282 T:2f5c  29 0f                              and #$0f
 1283 T:2f5e  8d 55 40                           sta dr1
 1284 T:2f61  b9 00 02                           lda buf,y
 1285 T:2f64  c9 3a                              cmp #":"
 1286 T:2f66  f0 05                              beq pts2
 1287 T:2f68  a9 00                              lda #0
 1288 T:2f6a  8d 55 40                           sta dr1
 1289 T:2f6d  a0 00                    pts2      ldy #0
 1290 T:2f6f  b9 00 01                 pts3      lda dbuf,y
 1291 T:2f72  c8                                 iny 
 1292 T:2f73  c9 20                              cmp #" "
 1293 T:2f75  f0 f8                              beq pts3
 1294 T:2f77  38                                 sec 
 1295 T:2f78  e9 41                              sbc #"A"
 1296 T:2f7a  8d 56 40                           sta dr2
 1297 T:2f7d  b9 00 01                           lda dbuf,y
 1298 T:2f80  c9 3a                              cmp #":"
 1299 T:2f82  f0 07                              beq pts4
 1300 T:2f84  18                                 clc 
 1301 T:2f85  20 1b a0                           jsr sgdrive
 1302 T:2f88  8d 56 40                           sta dr2
 1303 T:2f8b  20 fe 32                 pts4      jsr drvtest
 1304 T:2f8e  90 03                              bcc pls1
 1305 T:2f90  4c 7b 30                           jmp pss
 1306 T:2f93                                    ;****
 1307 T:2f93  20 15 31                 pls1      jsr gsoutar
 1308 T:2f96  d0 03                              bne pls1a
 1309 T:2f98  a9 ea                              lda #enbreak
 1310 T:2f9a  60                                 rts 
 1311 T:2f9b  a9 00                    pls1a     lda #<dbuf
 1312 T:2f9d  a0 01                              ldy #>dbuf
 1313 T:2f9f  20 28 2c                           jsr rwopen
 1314 T:2fa2  d0 09                              bne psaerr1a
 1315 T:2fa4  20 c0 ff                           jsr open
 1316 T:2fa7  90 06                              bcc psa3
 1317 T:2fa9  a9 ff                              lda #ennotimp
 1318 T:2fab  d0 73                              bne psaerr2
 1319 T:2fad  d0 78                    psaerr1a  bne psaerr1
 1320 T:2faf                           psa3      
 1321 T:2faf  ad 31 40                 psread    lda fadr
 1322 T:2fb2  85 18                              sta zei
 1323 T:2fb4  ad 32 40                           lda fadr+1
 1324 T:2fb7  85 19                              sta zei+1
 1325 T:2fb9  a0 39                              ldy #fpanz
 1326 T:2fbb  ad 00 40                           lda prblen
 1327 T:2fbe  91 18                              sta (zei),y
 1328 T:2fc0  c8                                 iny 
 1329 T:2fc1  ad 01 40                           lda prblen+1
 1330 T:2fc4  91 18                              sta (zei),y
 1331 T:2fc6  a0 3b                              ldy #fpadr
 1332 T:2fc8  a9 00                              lda #<buffer
 1333 T:2fca  91 18                              sta (zei),y
 1334 T:2fcc  c8                                 iny 
 1335 T:2fcd  a9 6c                              lda #>buffer
 1336 T:2fcf  91 18                              sta (zei),y
 1337 T:2fd1  a0 44                              ldy #fpbank
 1338 T:2fd3  a9 0e                              lda #prgbank
 1339 T:2fd5  91 18                              sta (zei),y
 1340 T:2fd7  ae 51 40                           ldx handle
 1341 T:2fda  20 4e a0                           jsr dread
 1342 T:2fdd  d0 32                              bne psa4
 1343 T:2fdf  ae 00 40                           ldx prblen
 1344 T:2fe2  ac 01 40                           ldy prblen+1
 1345 T:2fe5  20 30 30                 psa5      jsr ppsave
 1346 T:2fe8  f0 04                              beq psa4a
 1347 T:2fea  a9 f0                              lda #endnrdy
 1348 T:2fec  d0 23                              bne psa4
 1349 T:2fee  ad 5f 40                 psa4a     lda laenge
 1350 T:2ff1  38                                 sec 
 1351 T:2ff2  ed 00 40                           sbc prblen
 1352 T:2ff5  8d 5f 40                           sta laenge
 1353 T:2ff8  ad 60 40                           lda laenge+1
 1354 T:2ffb  ed 01 40                           sbc prblen+1
 1355 T:2ffe  8d 60 40                           sta laenge+1
 1356 T:3001  b0 0b                              bcs rs1
 1357 T:3003  ad 61 40                           lda laenge+2
 1358 T:3006  d0 03                              bne rs2
 1359 T:3008  ce 62 40                           dec laenge+3
 1360 T:300b  ce 61 40                 rs2       dec laenge+2
 1361 T:300e  4c af 2f                 rs1       jmp psread
 1362 T:3011  c9 ec                    psa4      cmp #eneof
 1363 T:3013  d0 0b                              bne psaerr2
 1364 T:3015  ae 5f 40                           ldx laenge
 1365 T:3018  ac 60 40                           ldy laenge+1
 1366 T:301b  20 30 30                           jsr ppsave
 1367 T:301e  a9 00                              lda #0
 1368 T:3020  48                       psaerr2   pha 
 1369 T:3021  a9 01                              lda #1
 1370 T:3023  20 c3 ff                           jsr close
 1371 T:3026  68                                 pla 
 1372 T:3027  48                       psaerr1   pha 
 1373 T:3028  ae 51 40                           ldx handle
 1374 T:302b  20 4b a0                           jsr dclose
 1375 T:302e  68                                 pla 
 1376 T:302f  60                                 rts 
 1377 T:3030  8e 5b 40                 ppsave    stx tplen
 1378 T:3033  8c 5c 40                           sty tplen+1
 1379 T:3036  8a                                 txa 
 1380 T:3037  0d 5c 40                           ora tplen+1
 1381 T:303a  f0 3e                              beq pssx
 1382 T:303c  a9 00                              lda #0
 1383 T:303e  85 90                              sta status
 1384 T:3040  a2 01                              ldx #1
 1385 T:3042  20 c9 ff                           jsr ckout
 1386 T:3045  90 04                              bcc ppsav1
 1387 T:3047  09 40                              ora #64
 1388 T:3049  d0 2f                              bne pssx
 1389 T:304b  a9 00                    ppsav1    lda #<buffer
 1390 T:304d  85 18                              sta zei
 1391 T:304f  a9 6c                              lda #>buffer
 1392 T:3051  85 19                              sta zei+1
 1393 T:3053  a0 00                              ldy #0
 1394 T:3055  b1 18                    ppsa1     lda (zei),y
 1395 T:3057  20 d2 ff                           jsr bsout
 1396 T:305a  e6 18                              inc zei
 1397 T:305c  d0 02                              bne pssa2
 1398 T:305e  e6 19                              inc zei+1
 1399 T:3060  ad 5b 40                 pssa2     lda tplen
 1400 T:3063  d0 03                              bne pssa3
 1401 T:3065  ce 5c 40                           dec tplen+1
 1402 T:3068  ce 5b 40                 pssa3     dec tplen
 1403 T:306b  ad 5b 40                           lda tplen
 1404 T:306e  0d 5c 40                           ora tplen+1
 1405 T:3071  d0 e2                              bne ppsa1
 1406 T:3073  20 cc ff                           jsr clrch
 1407 T:3076  a5 90                              lda status
 1408 T:3078  29 bf                              and #255-64
 1409 T:307a  60                       pssx      rts 
 1410 T:307b                                    ;****
 1411 T:307b  20 f7 30                 pss       jsr gsource
 1412 T:307e  f0 71                              beq psse3
 1413 T:3080  a9 00                              lda #<dbuf
 1414 T:3082  a0 01                              ldy #>dbuf
 1415 T:3084  20 28 2c                           jsr rwopen
 1416 T:3087  d0 24                              bne pssee1
 1417 T:3089  a0 39                              ldy #fpanz
 1418 T:308b  ad 00 40                           lda prblen
 1419 T:308e  91 18                              sta (zei),y
 1420 T:3090  c8                                 iny 
 1421 T:3091  ad 01 40                           lda prblen+1
 1422 T:3094  91 18                              sta (zei),y
 1423 T:3096  a0 3b                              ldy #fpadr
 1424 T:3098  a9 00                              lda #<buffer
 1425 T:309a  91 18                              sta (zei),y
 1426 T:309c  c8                                 iny 
 1427 T:309d  a9 6c                              lda #>buffer
 1428 T:309f  91 18                              sta (zei),y
 1429 T:30a1  a0 44                              ldy #fpbank
 1430 T:30a3  a9 0e                              lda #prgbank
 1431 T:30a5  91 18                              sta (zei),y
 1432 T:30a7  ae 51 40                           ldx handle
 1433 T:30aa  20 4e a0                           jsr dread
 1434 T:30ad  48                       pssee1    pha 
 1435 T:30ae  ae 51 40                           ldx handle
 1436 T:30b1  20 4b a0                           jsr dclose
 1437 T:30b4  68                                 pla 
 1438 T:30b5  f0 37                              beq psse1
 1439 T:30b7  c9 ec                              cmp #eneof
 1440 T:30b9  d0 3b                              bne pssee
 1441 T:30bb  20 06 31                           jsr gtarget
 1442 T:30be  f0 31                              beq psse3
 1443 T:30c0  ad 41 40                           lda dint1
 1444 T:30c3  a2 00                              ldx #<buf
 1445 T:30c5  a0 02                              ldy #>buf
 1446 T:30c7  20 bd ff                           jsr setfnpar
 1447 T:30ca  ae 33 40                           ldx iecunit
 1448 T:30cd  a9 01                              lda #1
 1449 T:30cf  a0 01                              ldy #1
 1450 T:30d1  20 ba ff                           jsr setfpar
 1451 T:30d4  20 c0 ff                           jsr open
 1452 T:30d7  b0 1b                              bcs psse2
 1453 T:30d9  ae 5f 40                           ldx laenge
 1454 T:30dc  ac 60 40                           ldy laenge+1
 1455 T:30df  20 30 30                           jsr ppsave
 1456 T:30e2  f0 02                              beq pssex
 1457 T:30e4  a9 f0                              lda #endnrdy
 1458 T:30e6  48                       pssex     pha 
 1459 T:30e7  a9 01                              lda #1
 1460 T:30e9  20 c3 ff                           jsr close
 1461 T:30ec  68                                 pla 
 1462 T:30ed  60                                 rts 
 1463 T:30ee  a9 fb                    psse1     lda #enprange
 1464 T:30f0  2c                                 .byt $2c
 1465 T:30f1  a9 ea                    psse3     lda #enbreak
 1466 T:30f3  2c                                 .byt $2c
 1467 T:30f4  a9 ff                    psse2     lda #ennotimp
 1468 T:30f6  60                       pssee     rts 
 1469 T:30f7                                    ;****
 1470 T:30f7  a9 c9                    gsource   lda #<tsource
 1471 T:30f9  a0 56                              ldy #>tsource
 1472 T:30fb  20 8f 38                           jsr textout
 1473 T:30fe  20 9f a0                 pllo7     jsr bgkey
 1474 T:3101  f0 fb                              beq pllo7
 1475 T:3103  c9 03                              cmp #keystp
 1476 T:3105  60                                 rts 
 1477 T:3106  a9 09                    gtarget   lda #<ttarget
 1478 T:3108  a0 57                              ldy #>ttarget
 1479 T:310a  20 8f 38                           jsr textout
 1480 T:310d  20 9f a0                 pllo6     jsr bgkey
 1481 T:3110  f0 fb                              beq pllo6
 1482 T:3112  c9 03                              cmp #keystp
 1483 T:3114  60                                 rts 
 1484 T:3115  a9 49                    gsoutar   lda #<tsoutar
 1485 T:3117  a0 57                              ldy #>tsoutar
 1486 T:3119  20 8f 38                           jsr textout
 1487 T:311c  20 9f a0                 ptttt     jsr bgkey
 1488 T:311f  f0 fb                              beq ptttt
 1489 T:3121  c9 03                              cmp #keystp
 1490 T:3123  60                                 rts 
 1491 T:3124                                    ;**********
 1492 T:3124                           pload                      ;
 1493 T:3124  85 18                              sta zei
 1494 T:3126  84 19                              sty zei+1
 1495 T:3128  a2 00                              ldx #0
 1496 T:312a  a0 ff                              ldy #<-1
 1497 T:312c  c8                       plc1      iny 
 1498 T:312d  b1 18                              lda (zei),y
 1499 T:312f  f0 15                              beq plce
 1500 T:3131  c9 20                              cmp #" "
 1501 T:3133  f0 f7                              beq plc1
 1502 T:3135  b1 18                    plc2      lda (zei),y
 1503 T:3137  c9 20                              cmp #" "
 1504 T:3139  f0 0b                              beq plc3a
 1505 T:313b  9d 00 01                           sta dbuf,x
 1506 T:313e  c9 00                              cmp #0
 1507 T:3140  f0 04                              beq plce
 1508 T:3142  c8                                 iny 
 1509 T:3143  e8                                 inx 
 1510 T:3144  d0 ef                              bne plc2
 1511 T:3146  a9 00                    plc3a plce lda #0
 1512 T:3148  9d 00 01                           sta dbuf,x
 1513 T:314b  8e 53 40                           stx st1
 1514 T:314e  88                                 dey 
 1515 T:314f  c8                       plc4      iny 
 1516 T:3150  b1 18                              lda (zei),y
 1517 T:3152  c9 20                              cmp #" "
 1518 T:3154  f0 f9                              beq plc4
 1519 T:3156  98                                 tya 
 1520 T:3157  18                                 clc 
 1521 T:3158  65 18                              adc zei
 1522 T:315a  8d 57 40                           sta nadr
 1523 T:315d  a5 19                              lda zei+1
 1524 T:315f  69 00                              adc #0
 1525 T:3161  8d 58 40                           sta nadr+1
 1526 T:3164  a0 00                              ldy #0
 1527 T:3166  b9 00 01                 ptl1      lda dbuf,y
 1528 T:3169  c8                                 iny 
 1529 T:316a  c9 20                              cmp #" "
 1530 T:316c  f0 f8                              beq ptl1
 1531 T:316e  29 0f                              and #$0f
 1532 T:3170  8d 55 40                           sta dr1
 1533 T:3173  b9 00 01                           lda dbuf,y
 1534 T:3176  c9 3a                              cmp #":"
 1535 T:3178  f0 05                              beq ptl2
 1536 T:317a  a9 00                              lda #0
 1537 T:317c  8d 55 40                           sta dr1
 1538 T:317f  a0 00                    ptl2      ldy #0
 1539 T:3181  b9 00 02                 ptl3      lda buf,y
 1540 T:3184  c8                                 iny 
 1541 T:3185  c9 20                              cmp #" "
 1542 T:3187  f0 f8                              beq ptl3
 1543 T:3189  38                                 sec 
 1544 T:318a  e9 41                              sbc #"A"
 1545 T:318c  8d 56 40                           sta dr2
 1546 T:318f  b9 00 02                           lda buf,y
 1547 T:3192  c9 3a                              cmp #":"
 1548 T:3194  f0 07                              beq ptl4
 1549 T:3196  18                                 clc 
 1550 T:3197  20 1b a0                           jsr sgdrive
 1551 T:319a  8d 56 40                           sta dr2
 1552 T:319d  ad 53 40                 ptl4      lda st1
 1553 T:31a0  a2 00                              ldx #<dbuf
 1554 T:31a2  a0 01                              ldy #>dbuf
 1555 T:31a4  20 bd ff                           jsr setfnpar
 1556 T:31a7  ae 33 40                           ldx iecunit
 1557 T:31aa  a9 01                              lda #1
 1558 T:31ac  a0 00                              ldy #0
 1559 T:31ae  20 ba ff                           jsr setfpar
 1560 T:31b1  20 fe 32                           jsr drvtest
 1561 T:31b4  b0 7c                              bcs pll1
 1562 T:31b6                                    ;****
 1563 T:31b6  20 15 31                 pll1y     jsr gsoutar
 1564 T:31b9  d0 03                              bne pll1a
 1565 T:31bb  a9 ea                              lda #enbreak
 1566 T:31bd  60                                 rts 
 1567 T:31be  20 c0 ff                 pll1a     jsr open
 1568 T:31c1  90 04                              bcc plo3
 1569 T:31c3  a9 ff                              lda #ennotimp
 1570 T:31c5  d0 63                              bne plerr2
 1571 T:31c7  ad 57 40                 plo3      lda nadr
 1572 T:31ca  ac 58 40                           ldy nadr+1
 1573 T:31cd  a2 20                              ldx #$20
 1574 T:31cf  20 3f a0                           jsr dcreate
 1575 T:31d2  d0 56                              bne plerr2
 1576 T:31d4  ad 57 40                           lda nadr
 1577 T:31d7  ac 58 40                           ldy nadr+1
 1578 T:31da  20 28 2c                           jsr rwopen
 1579 T:31dd  d0 4b                              bne plerr2
 1580 T:31df  20 b0 32                 plloop    jsr plinput
 1581 T:31e2  8d 53 40                           sta st1
 1582 T:31e5  8e 5b 40                           stx tplen
 1583 T:31e8  8c 5c 40                           sty tplen+1
 1584 T:31eb  ad 31 40                           lda fadr
 1585 T:31ee  85 18                              sta zei
 1586 T:31f0  ad 32 40                           lda fadr+1
 1587 T:31f3  85 19                              sta zei+1
 1588 T:31f5  a0 39                              ldy #fpanz
 1589 T:31f7  ad 5b 40                           lda tplen
 1590 T:31fa  91 18                              sta (zei),y
 1591 T:31fc  c8                                 iny 
 1592 T:31fd  ad 5c 40                           lda tplen+1
 1593 T:3200  91 18                              sta (zei),y
 1594 T:3202  a0 3b                              ldy #fpadr
 1595 T:3204  a9 00                              lda #<buffer
 1596 T:3206  91 18                              sta (zei),y
 1597 T:3208  c8                                 iny 
 1598 T:3209  a9 6c                              lda #>buffer
 1599 T:320b  91 18                              sta (zei),y
 1600 T:320d  a0 44                              ldy #fpbank
 1601 T:320f  a9 0e                              lda #prgbank
 1602 T:3211  91 18                              sta (zei),y
 1603 T:3213  ae 51 40                           ldx handle
 1604 T:3216  20 51 a0                           jsr dwrite
 1605 T:3219  d0 0f                              bne plerr2
 1606 T:321b  ad 53 40                           lda st1
 1607 T:321e  f0 bf                              beq plloop
 1608 T:3220  a9 00                              lda #0
 1609 T:3222  48                       plerr1    pha 
 1610 T:3223  ae 51 40                           ldx handle
 1611 T:3226  20 4b a0                           jsr dclose
 1612 T:3229  68                                 pla 
 1613 T:322a  48                       plerr2    pha 
 1614 T:322b  a9 01                              lda #1
 1615 T:322d  20 c3 ff                           jsr close
 1616 T:3230  68                                 pla 
 1617 T:3231  60                       plerr1a   rts 
 1618 T:3232                                    ;****
 1619 T:3232  20 f7 30                 pll1      jsr gsource
 1620 T:3235  f0 20                              beq pllo4c
 1621 T:3237  20 c0 ff                           jsr open
 1622 T:323a  90 04                              bcc pllo3
 1623 T:323c  a9 ff                              lda #ennotimp
 1624 T:323e  d0 22                              bne plloerr
 1625 T:3240  20 b0 32                 pllo3     jsr plinput
 1626 T:3243  8d 53 40                           sta st1
 1627 T:3246  29 bf                              and #255-64
 1628 T:3248  d0 10                              bne pllo4b
 1629 T:324a  ad 53 40                           lda st1
 1630 T:324d  29 40                              and #64
 1631 T:324f  d0 03                              bne pllo4a
 1632 T:3251  a9 fb                    pllo4     lda #enprange
 1633 T:3253  2c                                 .byt $2c
 1634 T:3254  a9 00                    pllo4a    lda #enok
 1635 T:3256  2c                                 .byt $2c
 1636 T:3257  a9 ea                    pllo4c    lda #enbreak
 1637 T:3259  2c                                 .byt $2c
 1638 T:325a  a9 f0                    pllo4b    lda #endnrdy
 1639 T:325c  8e 5b 40                           stx tplen
 1640 T:325f  8c 5c 40                           sty tplen+1
 1641 T:3262  48                       plloerr   pha 
 1642 T:3263  a9 01                              lda #1
 1643 T:3265  20 c3 ff                           jsr close
 1644 T:3268  68                                 pla 
 1645 T:3269  f0 01                              beq pllo5
 1646 T:326b  60                                 rts 
 1647 T:326c  20 06 31                 pllo5     jsr gtarget
 1648 T:326f  f0 e6                              beq pllo4c
 1649 T:3271  ad 57 40                           lda nadr
 1650 T:3274  ac 58 40                           ldy nadr+1
 1651 T:3277  a2 20                              ldx #$20
 1652 T:3279  20 3f a0                           jsr dcreate
 1653 T:327c  d0 b3                              bne plerr1a
 1654 T:327e  ad 57 40                           lda nadr
 1655 T:3281  ac 58 40                           ldy nadr+1
 1656 T:3284  20 28 2c                           jsr rwopen
 1657 T:3287  d0 99                              bne plerr1
 1658 T:3289  a0 39                              ldy #fpanz
 1659 T:328b  ad 5b 40                           lda tplen
 1660 T:328e  91 18                              sta (zei),y
 1661 T:3290  c8                                 iny 
 1662 T:3291  ad 5c 40                           lda tplen+1
 1663 T:3294  91 18                              sta (zei),y
 1664 T:3296  a0 3b                              ldy #fpadr
 1665 T:3298  a9 00                              lda #<buffer
 1666 T:329a  91 18                              sta (zei),y
 1667 T:329c  c8                                 iny 
 1668 T:329d  a9 6c                              lda #>buffer
 1669 T:329f  91 18                              sta (zei),y
 1670 T:32a1  a0 44                              ldy #fpbank
 1671 T:32a3  a9 0e                              lda #prgbank
 1672 T:32a5  91 18                              sta (zei),y
 1673 T:32a7  ae 51 40                           ldx handle
 1674 T:32aa  20 51 a0                           jsr dwrite
 1675 T:32ad  4c 22 32                           jmp plerr1
 1676 T:32b0                                    ;****
 1677 T:32b0  a9 00                    plinput   lda #0
 1678 T:32b2  8d 5b 40                           sta tplen
 1679 T:32b5  8d 5c 40                           sta tplen+1
 1680 T:32b8  85 90                              sta status
 1681 T:32ba  a2 01                              ldx #1
 1682 T:32bc  20 c6 ff                           jsr chkin
 1683 T:32bf  a9 00                              lda #<buffer
 1684 T:32c1  85 18                              sta zei
 1685 T:32c3  a9 6c                              lda #>buffer
 1686 T:32c5  85 19                              sta zei+1
 1687 T:32c7  20 cf ff                 pliloop   jsr basin
 1688 T:32ca  a0 00                              ldy #0
 1689 T:32cc  91 18                              sta (zei),y
 1690 T:32ce  e6 18                              inc zei
 1691 T:32d0  d0 02                              bne pli1
 1692 T:32d2  e6 19                              inc zei+1
 1693 T:32d4  ee 5b 40                 pli1      inc tplen
 1694 T:32d7  d0 03                              bne pli2
 1695 T:32d9  ee 5c 40                           inc tplen+1
 1696 T:32dc  a5 90                    pli2      lda status
 1697 T:32de  d0 12                              bne plie
 1698 T:32e0  ad 5b 40                           lda tplen
 1699 T:32e3  cd 00 40                           cmp prblen
 1700 T:32e6  d0 df                              bne pliloop
 1701 T:32e8  ad 5c 40                           lda tplen+1
 1702 T:32eb  cd 01 40                           cmp prblen+1
 1703 T:32ee  d0 d7                              bne pliloop
 1704 T:32f0  a9 00                              lda #0
 1705 T:32f2  48                       plie      pha 
 1706 T:32f3  20 cc ff                           jsr clrch
 1707 T:32f6  ae 5b 40                           ldx tplen
 1708 T:32f9  ac 5c 40                           ldy tplen+1
 1709 T:32fc  68                                 pla 
 1710 T:32fd  60                                 rts 
 1711 T:32fe                                    ;**********
 1712 T:32fe  ad 56 40                 drvtest   lda dr2
 1713 T:3301  a2 00                              ldx #0
 1714 T:3303  dd 39 40                           cmp dosd0,x
 1715 T:3306  f0 06                              beq drt1
 1716 T:3308  e8                                 inx 
 1717 T:3309  dd 39 40                           cmp dosd0,x
 1718 T:330c  d0 12                              bne drte
 1719 T:330e  ad 33 40                 drt1      lda iecunit
 1720 T:3311  dd 3b 40                           cmp iecd0,x
 1721 T:3314  d0 0a                              bne drte
 1722 T:3316  ad 55 40                           lda dr1
 1723 T:3319  dd 3d 40                           cmp drvd0,x
 1724 T:331c  d0 02                              bne drte
 1725 T:331e  38                                 sec 
 1726 T:331f  60                                 rts 
 1727 T:3320  18                       drte      clc 
 1728 T:3321  60                                 rts 
 1729 T:3322                                    ;**********
 1730 T:3322  8d 31 40                 copycon   sta fadr
 1731 T:3325  8c 32 40                           sty fadr+1
 1732 T:3328  a2 20                              ldx #$20
 1733 T:332a  20 3f a0                           jsr dcreate
 1734 T:332d  d0 6d                              bne cpcend
 1735 T:332f  ad 31 40                           lda fadr
 1736 T:3332  ac 32 40                           ldy fadr+1
 1737 T:3335  20 28 2c                           jsr rwopen
 1738 T:3338  d0 62                              bne cpcend
 1739 T:333a  20 a4 28                 cpcl      jsr linein
 1740 T:333d  85 18                              sta zei
 1741 T:333f  84 19                              sty zei+1
 1742 T:3341  a0 00                              ldy #0
 1743 T:3343  b1 18                    cpca      lda (zei),y
 1744 T:3345  99 00 02                           sta buf,y
 1745 T:3348  f0 03                              beq cpcb
 1746 T:334a  c8                                 iny 
 1747 T:334b  d0 f6                              bne cpca
 1748 T:334d  ad 31 40                 cpcb      lda fadr
 1749 T:3350  85 18                              sta zei
 1750 T:3352  ad 32 40                           lda fadr+1
 1751 T:3355  85 19                              sta zei+1
 1752 T:3357  a0 ff                              ldy #<-1
 1753 T:3359  c8                       cpc0      iny 
 1754 T:335a  b9 00 02                           lda buf,y
 1755 T:335d  f0 35                              beq cpcen
 1756 T:335f  c9 20                              cmp #" "
 1757 T:3361  f0 f6                              beq cpc0
 1758 T:3363  c8                       cpc1      iny 
 1759 T:3364  b9 00 02                           lda buf,y
 1760 T:3367  c9 00                              cmp #0
 1761 T:3369  d0 f8                              bne cpc1
 1762 T:336b  a9 0d                              lda #13
 1763 T:336d  99 00 02                           sta buf,y
 1764 T:3370  c8                                 iny 
 1765 T:3371  98                                 tya 
 1766 T:3372  a0 39                              ldy #fpanz
 1767 T:3374  91 18                              sta (zei),y
 1768 T:3376  c8                                 iny 
 1769 T:3377  a9 00                              lda #0
 1770 T:3379  91 18                              sta (zei),y
 1771 T:337b  a9 00                              lda #<buf
 1772 T:337d  a0 3b                              ldy #fpadr
 1773 T:337f  91 18                              sta (zei),y
 1774 T:3381  c8                                 iny 
 1775 T:3382  a9 02                              lda #>buf
 1776 T:3384  91 18                              sta (zei),y
 1777 T:3386  a0 44                              ldy #fpbank
 1778 T:3388  a9 0e                              lda #prgbank
 1779 T:338a  91 18                              sta (zei),y
 1780 T:338c  ae 51 40                           ldx handle
 1781 T:338f  20 51 a0                           jsr dwrite
 1782 T:3392  f0 a6                              beq cpcl
 1783 T:3394  48                       cpcen     pha 
 1784 T:3395  ae 51 40                           ldx handle
 1785 T:3398  20 4b a0                           jsr dclose
 1786 T:339b  68                                 pla 
 1787 T:339c  60                       cpcend    rts 

 1789 T:339d                                     .end 

 1797 T:339d                                    ;PR3 2.4 .S26 ==0801==

 1799 T:339d  20 2b 29                 pu        jsr gbyt
 1800 T:33a0  d0 0e                              bne pue
 1801 T:33a2  8a                                 txa 
 1802 T:33a3  c9 10                              cmp #16
 1803 T:33a5  90 02                              bcc pu1
 1804 T:33a7  e9 06                              sbc #6
 1805 T:33a9  29 0f                    pu1       and #15
 1806 T:33ab  8d 33 40                           sta iecunit
 1807 T:33ae  a9 00                              lda #0
 1808 T:33b0  60                       pue       rts 
 1809 T:33b1  20 35 29                 pq        jsr gdrv
 1810 T:33b4  d0 1f                              bne perr
 1811 T:33b6  8a                                 txa 
 1812 T:33b7  20 06 a0                           jsr query
 1813 T:33ba  48                                 pha 
 1814 T:33bb  86 18                              stx zei
 1815 T:33bd  84 19                              sty zei+1
 1816 T:33bf  20 55 2a                           jsr crout
 1817 T:33c2  a0 00                              ldy #0
 1818 T:33c4  b1 18                    pq1       lda (zei),y
 1819 T:33c6  20 a5 38                           jsr hexout
 1820 T:33c9  20 53 29                           jsr spout
 1821 T:33cc  c8                                 iny 
 1822 T:33cd  c0 06                              cpy #6
 1823 T:33cf  d0 f3                              bne pq1
 1824 T:33d1  20 55 2a                           jsr crout
 1825 T:33d4  68                                 pla 
 1826 T:33d5  60                       perr      rts 
 1827 T:33d6  20 35 29                 pc        jsr gdrv
 1828 T:33d9  d0 fa                              bne perr
 1829 T:33db  8a                                 txa 
 1830 T:33dc  4c 09 a0                           jmp mediach
 1831 T:33df  20 35 29                 pb        jsr gdrv
 1832 T:33e2  d0 f1                              bne perr
 1833 T:33e4  8a                                 txa 
 1834 T:33e5  20 0c a0                           jsr getbpb
 1835 T:33e8  48                                 pha 
 1836 T:33e9  86 18                              stx zei
 1837 T:33eb  84 19                              sty zei+1
 1838 T:33ed  a0 00                              ldy #0
 1839 T:33ef  b1 18                    pb1       lda (zei),y
 1840 T:33f1  99 00 6c                           sta buffer,y
 1841 T:33f4  c8                                 iny 
 1842 T:33f5  c0 64                              cpy #bpplen
 1843 T:33f7  d0 f6                              bne pb1
 1844 T:33f9  68                                 pla 
 1845 T:33fa  60                       prwea     rts 
 1846 T:33fb  a9 00                    pr        lda #0
 1847 T:33fd  2c                                 .byt $2c
 1848 T:33fe  a9 01                    pw        lda #1
 1849 T:3400  8d 63 40                           sta pblock+pbrwflag
 1850 T:3403  20 35 29                           jsr gdrv
 1851 T:3406  f0 11                              beq prw1
 1852 T:3408  c9 f1                              cmp #enilldrv
 1853 T:340a  d0 ee                              bne prwea
 1854 T:340c  8e 65 40                           stx pblock+pbside
 1855 T:340f  18                                 clc 
 1856 T:3410  20 1b a0                           jsr sgdrive
 1857 T:3413  8d 64 40                           sta pblock+pbdrive
 1858 T:3416  4c 24 34                           jmp prw2
 1859 T:3419  8e 64 40                 prw1      stx pblock+pbdrive
 1860 T:341c  20 2b 29                           jsr gbyt
 1861 T:341f  d0 d9                              bne prwea
 1862 T:3421  8e 65 40                           stx pblock+pbside
 1863 T:3424  20 2b 29                 prw2      jsr gbyt
 1864 T:3427  d0 d1                              bne prwea
 1865 T:3429  8e 66 40                           stx pblock+pbtrack
 1866 T:342c  20 2b 29                           jsr gbyt
 1867 T:342f  d0 c9                              bne prwea
 1868 T:3431  b0 c7                              bcs prwea
 1869 T:3433  8e 67 40                           stx pblock+pbsector
 1870 T:3436  a9 00                              lda #<buffer
 1871 T:3438  8d 68 40                           sta pblock+pbbuffer
 1872 T:343b  a9 6c                              lda #>buffer
 1873 T:343d  8d 69 40                           sta pblock+pbbuffer+1
 1874 T:3440  a9 0e                              lda #prgbank
 1875 T:3442  8d 6a 40                           sta pblock+pbbank
 1876 T:3445  a9 63                              lda #<pblock
 1877 T:3447  a0 40                              ldy #>pblock
 1878 T:3449  4c 0f a0                           jmp floprw
 1879 T:344c  a9 00                    pra       lda #0
 1880 T:344e  2c                                 .byt $2c
 1881 T:344f  a9 01                    pwa       lda #1
 1882 T:3451  8d 63 40                           sta pblock+aprwflag
 1883 T:3454  20 eb 28                           jsr gadr
 1884 T:3457  f0 01                              beq prwa1
 1885 T:3459  60                                 rts 
 1886 T:345a  8e 65 40                 prwa1     stx pblock+aprecord
 1887 T:345d  8c 66 40                           sty pblock+aprecord+1
 1888 T:3460  18                                 clc 
 1889 T:3461  20 1b a0                           jsr sgdrive
 1890 T:3464  8d 64 40                           sta pblock+apdrive
 1891 T:3467  a0 00                              ldy #0
 1892 T:3469  8c 68 40                           sty pblock+apanz+1
 1893 T:346c  c8                                 iny 
 1894 T:346d  8c 67 40                           sty pblock+apanz
 1895 T:3470  a9 00                              lda #<buffer
 1896 T:3472  8d 69 40                           sta pblock+apbuffer
 1897 T:3475  a9 6c                              lda #>buffer
 1898 T:3477  8d 6a 40                           sta pblock+apbuffer+1
 1899 T:347a  a9 0e                              lda #prgbank
 1900 T:347c  8d 6b 40                           sta pblock+apbank
 1901 T:347f  a9 63                              lda #<pblock
 1902 T:3481  a0 40                              ldy #>pblock
 1903 T:3483  4c 12 a0                           jmp rwabs
 1904 T:3486  20 eb 28                 pm        jsr gadr
 1905 T:3489  8e 59 40                           stx fad2
 1906 T:348c  8c 5a 40                           sty fad2+1
 1907 T:348f  8a                                 txa 
 1908 T:3490  18                                 clc 
 1909 T:3491  69 00                              adc #<buffer
 1910 T:3493  85 18                              sta zei
 1911 T:3495  98                                 tya 
 1912 T:3496  69 6c                              adc #>buffer
 1913 T:3498  85 19                              sta zei+1
 1914 T:349a  20 eb 28                           jsr gadr
 1915 T:349d  b0 7c                              bcs pme

 1917 T:349f  8a                                 txa 
 1918 T:34a0  18                                 clc 
 1919 T:34a1  69 00                              adc #<buffer
 1920 T:34a3  8d 31 40                           sta fadr
 1921 T:34a6  98                                 tya 
 1922 T:34a7  69 6c                              adc #>buffer
 1923 T:34a9  8d 32 40                           sta fadr+1
 1924 T:34ac  20 32 3a                           jsr prttst
 1925 T:34af  a9 3e                    pmout     lda #">"
 1926 T:34b1  20 b1 a0                           jsr chout
 1927 T:34b4  a9 3b                              lda #";"
 1928 T:34b6  20 b1 a0                           jsr chout
 1929 T:34b9  ad 5a 40                           lda fad2+1
 1930 T:34bc  20 a5 38                           jsr hexout
 1931 T:34bf  ad 59 40                           lda fad2
 1932 T:34c2  20 a5 38                           jsr hexout
 1933 T:34c5  20 53 29                           jsr spout
 1934 T:34c8  a0 00                              ldy #0
 1935 T:34ca  b1 18                    pm1       lda (zei),y
 1936 T:34cc  20 a5 38                           jsr hexout
 1937 T:34cf  20 53 29                           jsr spout
 1938 T:34d2  c8                                 iny 
 1939 T:34d3  c0 08                              cpy #8
 1940 T:34d5  90 f3                              bcc pm1
 1941 T:34d7  a0 00                              ldy #0
 1942 T:34d9  b1 18                    pm2       lda (zei),y
 1943 T:34db  aa                                 tax 
 1944 T:34dc  29 7f                              and #127
 1945 T:34de  c9 20                              cmp #32
 1946 T:34e0  b0 02                              bcs pm3
 1947 T:34e2  a2 2e                              ldx #"."
 1948 T:34e4  8a                       pm3       txa 
 1949 T:34e5  20 b1 a0                           jsr chout
 1950 T:34e8  c8                                 iny 
 1951 T:34e9  c0 08                              cpy #8
 1952 T:34eb  90 ec                              bcc pm2
 1953 T:34ed  20 55 2a                           jsr crout
 1954 T:34f0  a9 08                              lda #8
 1955 T:34f2  18                                 clc 
 1956 T:34f3  6d 59 40                           adc fad2
 1957 T:34f6  8d 59 40                           sta fad2
 1958 T:34f9  90 03                              bcc pm4
 1959 T:34fb  ee 5a 40                           inc fad2+1
 1960 T:34fe  a9 08                    pm4       lda #8
 1961 T:3500  18                                 clc 
 1962 T:3501  65 18                              adc zei
 1963 T:3503  85 18                              sta zei
 1964 T:3505  90 02                              bcc pm5
 1965 T:3507  e6 19                              inc zei+1
 1966 T:3509  a5 19                    pm5       lda zei+1
 1967 T:350b  cd 32 40                           cmp fadr+1
 1968 T:350e  90 9f                              bcc pmout
 1969 T:3510  d0 07                              bne pmend
 1970 T:3512  a5 18                              lda zei
 1971 T:3514  cd 31 40                           cmp fadr
 1972 T:3517  90 96                              bcc pmout
 1973 T:3519  a9 00                    pmend     lda #0
 1974 T:351b  48                       pme       pha 
 1975 T:351c  20 49 3a                           jsr prtoff
 1976 T:351f  68                                 pla 
 1977 T:3520  60                                 rts 
 1978 T:3521  20 eb 28                 pg        jsr gadr
 1979 T:3524  d0 23                              bne pge
 1980 T:3526  8a                                 txa 
 1981 T:3527  18                                 clc 
 1982 T:3528  69 00                              adc #<buffer
 1983 T:352a  85 18                              sta zei
 1984 T:352c  98                                 tya 
 1985 T:352d  69 6c                              adc #>buffer
 1986 T:352f  85 19                              sta zei+1
 1987 T:3531  a9 00                              lda #0
 1988 T:3533  8d 59 40                           sta fad2
 1989 T:3536  20 2b 29                 pg1       jsr gbyt
 1990 T:3539  d0 0e                              bne pge
 1991 T:353b  8a                                 txa 
 1992 T:353c  ac 59 40                           ldy fad2
 1993 T:353f  91 18                              sta (zei),y
 1994 T:3541  c8                                 iny 
 1995 T:3542  8c 59 40                           sty fad2
 1996 T:3545  c0 08                              cpy #8
 1997 T:3547  d0 ed                              bne pg1
 1998 T:3549  a9 00                    pge       lda #0
 1999 T:354b  60                                 rts 
 2000 T:354c  20 2b 29                 pcol      jsr gbyt
 2001 T:354f  8e 70 40                           stx clibcol
 2002 T:3552  20 2b 29                           jsr gbyt
 2003 T:3555  b0 03                              bcs pcol1
 2004 T:3557  8e 6f 40                           stx clitcol
 2005 T:355a  ad 70 40                 pcol1     lda clibcol
 2006 T:355d  20 ca 51                           jsr setbck
 2007 T:3560  ad 6f 40                           lda clitcol
 2008 T:3563  20 cd 51                           jsr settxt
 2009 T:3566  a9 00                              lda #0
 2010 T:3568  60                                 rts 
 2011 T:3569  20 99 28                 gdati     jsr chrgot
 2012 T:356c  d0 02                              bne pda1
 2013 T:356e  18                                 clc 
 2014 T:356f  60                                 rts 
 2015 T:3570  a9 ff                    pda1      lda #$ff
 2016 T:3572  18                                 clc 
 2017 T:3573  65 30                              adc czei
 2018 T:3575  85 30                              sta czei
 2019 T:3577  a9 ff                              lda #$ff
 2020 T:3579  65 31                              adc czei+1
 2021 T:357b  85 31                              sta czei+1
 2022 T:357d  a9 00                              lda #0
 2023 T:357f  8d 5f 40                           sta laenge
 2024 T:3582  8d 60 40                           sta laenge+1
 2025 T:3585  8d 61 40                           sta laenge+2
 2026 T:3588  20 db 35                           jsr dezbyt
 2027 T:358b  8d 5f 40                           sta laenge
 2028 T:358e  b0 1a                              bcs pda2
 2029 T:3590  20 99 28                           jsr chrgot
 2030 T:3593  f0 15                              beq pda2
 2031 T:3595  20 db 35                           jsr dezbyt
 2032 T:3598  8d 60 40                           sta laenge+1
 2033 T:359b  b0 0d                              bcs pda2
 2034 T:359d  20 99 28                           jsr chrgot
 2035 T:35a0  f0 08                              beq pda2
 2036 T:35a2  20 db 35                           jsr dezbyt
 2037 T:35a5  8d 61 40                           sta laenge+2
 2038 T:35a8  b0 00                              bcs pda2
 2039 T:35aa  38                       pda2      sec 
 2040 T:35ab  a2 5f                              ldx #<laenge
 2041 T:35ad  a0 40                              ldy #>laenge
 2042 T:35af  60                                 rts 
 2043 T:35b0  20 69 35                 ptime     jsr gdati
 2044 T:35b3  90 23                              bcc ptime1
 2045 T:35b5  ad 5f 40                           lda laenge
 2046 T:35b8  48                                 pha 
 2047 T:35b9  ad 61 40                           lda laenge+2
 2048 T:35bc  8d 5f 40                           sta laenge
 2049 T:35bf  68                                 pla 
 2050 T:35c0  8d 61 40                           sta laenge+2
 2051 T:35c3  4c 63 a0                           jmp sgtime
 2052 T:35c6  20 69 35                 pdate     jsr gdati
 2053 T:35c9  90 0d                              bcc ptime1
 2054 T:35cb  ad 61 40                           lda laenge+2
 2055 T:35ce  38                                 sec 
 2056 T:35cf  e9 50                              sbc #80
 2057 T:35d1  8d 61 40                           sta laenge+2
 2058 T:35d4  38                                 sec 
 2059 T:35d5  4c 66 a0                           jmp sgdate
 2060 T:35d8  a9 00                    ptime1    lda #0
 2061 T:35da  60                                 rts 
 2062 T:35db  a9 00                    dezbyt    lda #0
 2063 T:35dd  8d 31 40                           sta fadr
 2064 T:35e0  20 1d 36                           jsr numget
 2065 T:35e3  b0 20                              bcs dezbe
 2066 T:35e5  8d 31 40                           sta fadr
 2067 T:35e8  20 1d 36                           jsr numget
 2068 T:35eb  b0 18                              bcs dezbe
 2069 T:35ed  48                                 pha 
 2070 T:35ee  0e 31 40                           asl fadr
 2071 T:35f1  ad 31 40                           lda fadr
 2072 T:35f4  0a                                 asl 
 2073 T:35f5  0a                                 asl 
 2074 T:35f6  18                                 clc 
 2075 T:35f7  6d 31 40                           adc fadr
 2076 T:35fa  8d 31 40                           sta fadr
 2077 T:35fd  68                                 pla 
 2078 T:35fe  18                                 clc 
 2079 T:35ff  6d 31 40                           adc fadr
 2080 T:3602  18                                 clc 
 2081 T:3603  90 0e                              bcc dezbn
 2082 T:3605  c9 00                    dezbe     cmp #0
 2083 T:3607  d0 05                              bne dezbe1
 2084 T:3609  ad 31 40                           lda fadr
 2085 T:360c  38                                 sec 
 2086 T:360d  60                                 rts 
 2087 T:360e  ad 31 40                 dezbe1    lda fadr
 2088 T:3611  18                                 clc 
 2089 T:3612  60                                 rts 
 2090 T:3613  08                       dezbn     php 
 2091 T:3614  48                                 pha 
 2092 T:3615  20 1d 36                 dezbm     jsr numget
 2093 T:3618  90 fb                              bcc dezbm
 2094 T:361a  68                                 pla 
 2095 T:361b  28                                 plp 
 2096 T:361c  60                                 rts 
 2097 T:361d  20 93 28                 numget    jsr chrget
 2098 T:3620  f0 0c                              beq numge
 2099 T:3622  c9 30                              cmp #"0"
 2100 T:3624  90 08                              bcc numge
 2101 T:3626  c9 3a                              cmp #$3a
 2102 T:3628  b0 04                              bcs numge
 2103 T:362a  29 0f                              and #$0f
 2104 T:362c  18                                 clc 
 2105 T:362d  60                                 rts 
 2106 T:362e  38                       numge     sec 
 2107 T:362f  60                                 rts 
 2108 T:3630  85 18                    prename   sta zei
 2109 T:3632  84 19                              sty zei+1
 2110 T:3634  a0 ff                              ldy #<-1
 2111 T:3636  c8                       prn0      iny 
 2112 T:3637  b1 18                              lda (zei),y
 2113 T:3639  f0 13                              beq prne1
 2114 T:363b  c9 20                              cmp #" "
 2115 T:363d  f0 f7                              beq prn0
 2116 T:363f  a2 00                              ldx #0
 2117 T:3641  b1 18                    prn1      lda (zei),y
 2118 T:3643  9d 00 01                           sta dbuf,x
 2119 T:3646  f0 06                              beq prne1
 2120 T:3648  c9 5c                              cmp #$5c             ;"\"
 2121 T:364a  f0 02                              beq prne1
 2122 T:364c  c9 3a                              cmp #":"
 2123 T:364e  f0 71                    prne1     beq prne
 2124 T:3650  c9 20                              cmp #" "
 2125 T:3652  f0 04                              beq prn1a
 2126 T:3654  c8                                 iny 
 2127 T:3655  e8                                 inx 
 2128 T:3656  d0 e9                              bne prn1
 2129 T:3658  a9 00                    prn1a     lda #0
 2130 T:365a  9d 00 01                           sta dbuf,x
 2131 T:365d  98                                 tya 
 2132 T:365e  18                                 clc 
 2133 T:365f  65 18                              adc zei
 2134 T:3661  85 18                              sta zei
 2135 T:3663  90 02                              bcc mrnx
 2136 T:3665  e6 19                              inc zei+1

 2138 T:3667  a0 ff                    mrnx      ldy #<-1
 2139 T:3669  c8                       prn2      iny 
 2140 T:366a  b1 18                              lda (zei),y
 2141 T:366c  f0 53                              beq prne
 2142 T:366e  c9 20                              cmp #" "
 2143 T:3670  f0 f7                              beq prn2
 2144 T:3672  b1 18                    prn3      lda (zei),y
 2145 T:3674  f0 0b                              beq prn4
 2146 T:3676  c9 5c                              cmp #$5c             ;"\"
 2147 T:3678  f0 47                              beq prne
 2148 T:367a  c9 3a                              cmp #":"
 2149 T:367c  f0 43                              beq prne
 2150 T:367e  c8                                 iny 
 2151 T:367f  d0 f1                              bne prn3
 2152 T:3681  a5 18                    prn4      lda zei
 2153 T:3683  a4 19                              ldy zei+1
 2154 T:3685  a2 ff                              ldx #$ff
 2155 T:3687  20 36 a0                           jsr namedtp
 2156 T:368a  f0 38                              beq prne2
 2157 T:368c  c9 f7                              cmp #ennotfnd
 2158 T:368e  d0 36                              bne prnex
 2159 T:3690  18                                 clc 
 2160 T:3691  20 18 a0                           jsr sgdta
 2161 T:3694  85 2e                              sta rwbzei
 2162 T:3696  84 2f                              sty rwbzei+1
 2163 T:3698  a0 00                              ldy #dsname
 2164 T:369a  b1 2e                    prnx1     lda (rwbzei),y
 2165 T:369c  99 02 40                           sta ddtp,y
 2166 T:369f  c8                                 iny 
 2167 T:36a0  c0 0c                              cpy #dsname+12
 2168 T:36a2  90 f6                              bcc prnx1
 2169 T:36a4  a9 00                              lda #<dbuf
 2170 T:36a6  a0 01                              ldy #>dbuf
 2171 T:36a8  a2 ff                              ldx #$ff
 2172 T:36aa  20 36 a0                           jsr namedtp
 2173 T:36ad  d0 17                              bne prnex
 2174 T:36af  a2 00                              ldx #dsname
 2175 T:36b1  a0 0c                              ldy #dgname
 2176 T:36b3  bd 02 40                 prnx2     lda ddtp,x
 2177 T:36b6  91 2e                              sta (rwbzei),y
 2178 T:36b8  e8                                 inx 
 2179 T:36b9  c8                                 iny 
 2180 T:36ba  c0 17                              cpy #dgname+11
 2181 T:36bc  90 f5                              bcc prnx2
 2182 T:36be  4c 39 a0                           jmp wrentry
 2183 T:36c1  a9 f5                    prne      lda #enillnam
 2184 T:36c3  2c                                 .byt $2c
 2185 T:36c4  a9 f3                    prne2     lda #enfexist
 2186 T:36c6  60                       prnex     rts 

 2188 T:36c7  a9 40                    mrename   lda #64
 2189 T:36c9  a2 06                              ldx #6
 2190 T:36cb  20 d6 49                           jsr mdirpin
 2191 T:36ce  f0 01                              beq mrn1
 2192 T:36d0  60                       mrnr      rts 
 2193 T:36d1                           mrn1      
 2194 T:36d1  ad 87 40                           lda lanz
 2195 T:36d4  f0 fa                              beq mrnr
 2196 T:36d6  20 b7 4d                           jsr lzeibuf
 2197 T:36d9  85 18                              sta zei
 2198 T:36db  84 19                              sty zei+1
 2199 T:36dd  a0 00                              ldy #0
 2200 T:36df  b1 18                    mrn2      lda (zei),y
 2201 T:36e1  99 00 01                           sta dbuf,y
 2202 T:36e4  f0 03                              beq mrn3
 2203 T:36e6  c8                                 iny 
 2204 T:36e7  d0 f6                              bne mrn2
 2205 T:36e9                           mrn3      
 2206 T:36e9  a9 0e                              lda #14
 2207 T:36eb  20 d0 48                           jsr prntcmd
 2208 T:36ee  a9 a4                              lda #<isnpt
 2209 T:36f0  a0 61                              ldy #>isnpt
 2210 T:36f2  20 be 51                           jsr winput
 2211 T:36f5  b0 d9                              bcs mrnr
 2212 T:36f7  86 18                              stx zei
 2213 T:36f9  84 19                              sty zei+1
 2214 T:36fb  4c 67 36                           jmp mrnx

 2216 T:36fe                                     .end 

 2224 T:36fe                                    ;PR4 2.4 .S22 ==0801==

 2226 T:36fe                                    ;zei =$1c
 2227 T:36fe  a2 10                    dir       ldx #$10
 2228 T:3700  20 36 a0                           jsr namedtp
 2229 T:3703  f0 01                              beq dirok
 2230 T:3705  60                                 rts 
 2231 T:3706  86 18                    dirok     stx zei
 2232 T:3708  84 19                              sty zei+1
 2233 T:370a  20 2a 3a                           jsr prtbtst
 2234 T:370d  f0 03                              beq diroo1
 2235 T:370f  4c fe 37                           jmp direx
 2236 T:3712  a0 04                    diroo1    ldy #gnfile
 2237 T:3714  b1 18                              lda (zei),y
 2238 T:3716  8d 4c 40                           sta dcl
 2239 T:3719  c8                                 iny 
 2240 T:371a  b1 18                              lda (zei),y
 2241 T:371c  8d 4d 40                           sta dcl+1
 2242 T:371f  a5 18                              lda zei
 2243 T:3721  18                                 clc 
 2244 T:3722  69 06                              adc #gnpath
 2245 T:3724  8d 4e 40                           sta dpa
 2246 T:3727  a5 19                              lda zei+1
 2247 T:3729  69 00                              adc #0
 2248 T:372b  8d 4f 40                           sta dpa+1
 2249 T:372e  18                                 clc 
 2250 T:372f  20 18 a0                           jsr sgdta
 2251 T:3732  85 18                              sta zei
 2252 T:3734  84 19                              sty zei+1
 2253 T:3736  a9 00                              lda #0
 2254 T:3738  8d 3f 40                           sta dircount
 2255 T:373b  8d 40 40                           sta dircount+1
 2256 T:373e  a9 72                              lda #<dirstext
 2257 T:3740  a0 55                              ldy #>dirstext
 2258 T:3742  20 8f 38                           jsr textout
 2259 T:3745  18                                 clc 
 2260 T:3746  20 1b a0                           jsr sgdrive
 2261 T:3749  18                                 clc 
 2262 T:374a  69 41                              adc #"A"             ; "a"
 2263 T:374c  20 b1 a0                           jsr chout
 2264 T:374f  a9 3a                              lda #":"
 2265 T:3751  20 b1 a0                           jsr chout
 2266 T:3754  a9 89                              lda #<dirntext
 2267 T:3756  a0 55                              ldy #>dirntext
 2268 T:3758  20 8f 38                           jsr textout
 2269 T:375b  a9 02                              lda #<ddtp
 2270 T:375d  a0 40                              ldy #>ddtp
 2271 T:375f  38                                 sec 
 2272 T:3760  20 18 a0                           jsr sgdta
 2273 T:3763  a9 2a                              lda #"*"
 2274 T:3765  8d 02 40                           sta ddtp+dsname
 2275 T:3768  8d 0a 40                           sta ddtp+dsext
 2276 T:376b  a9 08                              lda #%00001000             ;disk-name
 2277 T:376d  8d 0d 40                           sta ddtp+dsattr
 2278 T:3770  ad 4c 40                           lda dcl
 2279 T:3773  ae 4d 40                           ldx dcl+1
 2280 T:3776  a0 00                              ldy #0
 2281 T:3778  20 2d a0                           jsr sfirso
 2282 T:377b  d0 03                              bne dirnonam
 2283 T:377d  20 04 38                           jsr dirnout
 2284 T:3780  a9 0d                    dirnonam  lda #13
 2285 T:3782  20 b1 a0                           jsr chout
 2286 T:3785  ad 4e 40                           lda dpa
 2287 T:3788  ac 4f 40                           ldy dpa+1
 2288 T:378b  85 18                              sta zei
 2289 T:378d  84 19                              sty zei+1
 2290 T:378f  a0 00                              ldy #0
 2291 T:3791  b1 18                    dirnn2    lda (zei),y
 2292 T:3793  f0 06                              beq dirnn1
 2293 T:3795  20 b1 a0                           jsr chout
 2294 T:3798  c8                                 iny 
 2295 T:3799  d0 f6                              bne dirnn2
 2296 T:379b  a9 f7                    dirnn1    lda #%11110111
 2297 T:379d  8d 0d 40                           sta ddtp+dsattr
 2298 T:37a0  ad 4c 40                           lda dcl
 2299 T:37a3  ae 4d 40                           ldx dcl+1
 2300 T:37a6  a0 00                              ldy #0
 2301 T:37a8  20 2d a0                           jsr sfirso
 2302 T:37ab  4c b1 37                           jmp pnexte
 2303 T:37ae  20 30 a0                 pnext     jsr snext
 2304 T:37b1  d0 14                    pnexte    bne dirend
 2305 T:37b3  ee 3f 40                           inc dircount
 2306 T:37b6  d0 03                              bne dira1
 2307 T:37b8  ee 40 40                           inc dircount+1
 2308 T:37bb  20 55 2a                 dira1     jsr crout
 2309 T:37be  20 04 38                           jsr dirnout
 2310 T:37c1  20 22 38                           jsr dirpout
 2311 T:37c4  4c ae 37                           jmp pnext
 2312 T:37c7  c9 f7                    dirend    cmp #ennotfnd
 2313 T:37c9  d0 33                              bne direx
 2314 T:37cb  20 55 2a                 dirend1   jsr crout
 2315 T:37ce  ad 40 40                           lda dircount+1
 2316 T:37d1  20 a5 38                           jsr hexout
 2317 T:37d4  ad 3f 40                           lda dircount
 2318 T:37d7  20 a5 38                           jsr hexout
 2319 T:37da  a9 9e                              lda #<dirftext
 2320 T:37dc  a0 55                              ldy #>dirftext
 2321 T:37de  20 8f 38                           jsr textout
 2322 T:37e1  a9 48                              lda #<dword
 2323 T:37e3  a0 40                              ldy #>dword
 2324 T:37e5  20 27 a0                           jsr gtdskfr                ;anzahl freie bytes auf diskette
 2325 T:37e8  d0 14                              bne direx
 2326 T:37ea  a0 03                              ldy #3
 2327 T:37ec  b9 48 40                 ddfspo    lda dword,y
 2328 T:37ef  20 a5 38                           jsr hexout
 2329 T:37f2  88                                 dey 
 2330 T:37f3  10 f7                              bpl ddfspo
 2331 T:37f5  a9 b9                              lda #<dirbtext
 2332 T:37f7  a0 55                              ldy #>dirbtext
 2333 T:37f9  20 8f 38                           jsr textout
 2334 T:37fc  a9 00                              lda #0
 2335 T:37fe  48                       direx     pha 
 2336 T:37ff  20 49 3a                           jsr prtoff
 2337 T:3802  68                                 pla 
 2338 T:3803  60                                 rts 
 2339 T:3804  a0 00                    dirnout   ldy #0
 2340 T:3806  b9 0e 40                 dir1      lda ddtp+dgname,y
 2341 T:3809  20 b1 a0                           jsr chout
 2342 T:380c  c8                                 iny 
 2343 T:380d  c0 08                              cpy #8
 2344 T:380f  d0 f5                              bne dir1
 2345 T:3811  20 53 29                           jsr spout
 2346 T:3814  a0 00                              ldy #0
 2347 T:3816  b9 16 40                 dir2      lda ddtp+dgext,y
 2348 T:3819  20 b1 a0                           jsr chout
 2349 T:381c  c8                                 iny 
 2350 T:381d  c0 03                              cpy #3
 2351 T:381f  d0 f5                              bne dir2
 2352 T:3821  60                                 rts 
 2353 T:3822  ad 19 40                 dirpout   lda ddtp+dgattr
 2354 T:3825  29 10                              and #%00010000
 2355 T:3827  f0 0a                              beq dirsize
 2356 T:3829  a0 55                              ldy #>dirdtext
 2357 T:382b  a9 68                              lda #<dirdtext
 2358 T:382d  20 8f 38                           jsr textout
 2359 T:3830  4c 4e 38                           jmp dirdate
 2360 T:3833  20 53 29                 dirsize   jsr spout
 2361 T:3836  ad 1f 40                           lda ddtp+dgsize+3
 2362 T:3839  20 a5 38                           jsr hexout
 2363 T:383c  ad 1e 40                           lda ddtp+dgsize+2
 2364 T:383f  20 a5 38                           jsr hexout
 2365 T:3842  ad 1d 40                           lda ddtp+dgsize+1
 2366 T:3845  20 a5 38                           jsr hexout
 2367 T:3848  ad 1c 40                           lda ddtp+dgsize+0
 2368 T:384b  20 a5 38                           jsr hexout
 2369 T:384e  20 53 29                 dirdate   jsr spout
 2370 T:3851  ad 22 40                           lda ddtp+dghour
 2371 T:3854  20 bc 38                           jsr dezbout
 2372 T:3857  a9 3a                              lda #":"
 2373 T:3859  20 b1 a0                           jsr chout
 2374 T:385c  ad 21 40                           lda ddtp+dgmin
 2375 T:385f  20 bc 38                           jsr dezbout
 2376 T:3862  a9 3a                              lda #":"
 2377 T:3864  20 b1 a0                           jsr chout
 2378 T:3867  ad 20 40                           lda ddtp+dgsec
 2379 T:386a  20 bc 38                           jsr dezbout
 2380 T:386d  20 53 29                           jsr spout
 2381 T:3870  ad 23 40                           lda ddtp+dgday
 2382 T:3873  20 bc 38                           jsr dezbout
 2383 T:3876  a9 2e                              lda #"."
 2384 T:3878  20 b1 a0                           jsr chout
 2385 T:387b  ad 24 40                           lda ddtp+dgmonth
 2386 T:387e  20 bc 38                           jsr dezbout
 2387 T:3881  a9 2e                              lda #"."
 2388 T:3883  20 b1 a0                           jsr chout
 2389 T:3886  ad 25 40                           lda ddtp+dgyear
 2390 T:3889  18                                 clc 
 2391 T:388a  69 50                              adc #80
 2392 T:388c  4c bc 38                           jmp dezbout

 2394 T:388f  85 18                    textout   sta zei
 2395 T:3891  84 19                              sty zei+1
 2396 T:3893  a0 00                              ldy #0
 2397 T:3895  b1 18                    texto1    lda (zei),y
 2398 T:3897  f0 0b                              beq textor
 2399 T:3899  20 b1 a0                           jsr chout
 2400 T:389c  e6 18                              inc zei
 2401 T:389e  d0 f5                              bne texto1
 2402 T:38a0  e6 19                              inc zei+1
 2403 T:38a2  d0 f1                              bne texto1
 2404 T:38a4  60                       textor    rts 

 2406 T:38a5  48                       hexout    pha 
 2407 T:38a6  4a                                 lsr 
 2408 T:38a7  4a                                 lsr 
 2409 T:38a8  4a                                 lsr 
 2410 T:38a9  4a                                 lsr 
 2411 T:38aa  20 b0 38                           jsr binout
 2412 T:38ad  68                                 pla 
 2413 T:38ae  29 0f                              and #$0f
 2414 T:38b0  18                       binout    clc 
 2415 T:38b1  69 30                              adc #"0"
 2416 T:38b3  c9 3a                              cmp #"9"+1
 2417 T:38b5  90 02                              bcc bino1
 2418 T:38b7  69 06                              adc #6
 2419 T:38b9  4c b1 a0                 bino1     jmp chout
 2420 T:38bc  8d 41 40                 dezbout   sta dint1
 2421 T:38bf  a9 00                              lda #0
 2422 T:38c1  8d 42 40                           sta dint1+1
 2423 T:38c4  a9 0a                              lda #10
 2424 T:38c6  a2 00                              ldx #0
 2425 T:38c8  20 da 38                           jsr ddiv
 2426 T:38cb  18                                 clc 
 2427 T:38cc  69 30                              adc #"0"
 2428 T:38ce  20 b1 a0                           jsr chout
 2429 T:38d1  ad 41 40                           lda dint1
 2430 T:38d4  18                                 clc 
 2431 T:38d5  69 30                              adc #"0"
 2432 T:38d7  4c b1 a0                           jmp chout
 2433 T:38da                                    ;**** dint1 / a/x = a/x rest dint1
 2434 T:38da  8e 44 40                 ddiv      stx dint2+1
 2435 T:38dd  8d 43 40                           sta dint2
 2436 T:38e0  8c 47 40                           sty dabuf
 2437 T:38e3  a2 01                              ldx #1
 2438 T:38e5  a9 00                              lda #0
 2439 T:38e7  8d 45 40                           sta dint3
 2440 T:38ea  8d 46 40                           sta dint3+1
 2441 T:38ed  ad 43 40                 ddiv1     lda dint2
 2442 T:38f0  0a                                 asl 
 2443 T:38f1  a8                                 tay 
 2444 T:38f2  ad 44 40                           lda dint2+1
 2445 T:38f5  2a                                 rol 
 2446 T:38f6  b0 17                              bcs ddiv3
 2447 T:38f8  cd 42 40                           cmp dint1+1
 2448 T:38fb  90 09                              bcc ddiv2
 2449 T:38fd  d0 10                              bne ddiv3
 2450 T:38ff  cc 41 40                           cpy dint1
 2451 T:3902  90 02                              bcc ddiv2
 2452 T:3904  d0 09                              bne ddiv3
 2453 T:3906  8d 44 40                 ddiv2     sta dint2+1
 2454 T:3909  8c 43 40                           sty dint2
 2455 T:390c  e8                                 inx 
 2456 T:390d  d0 de                              bne ddiv1
 2457 T:390f  ca                       ddiv3     dex 
 2458 T:3910  10 0a                              bpl ddiv6
 2459 T:3912  ac 47 40                           ldy dabuf
 2460 T:3915  ad 45 40                           lda dint3
 2461 T:3918  ae 46 40                           ldx dint3+1
 2462 T:391b  60                                 rts 
 2463 T:391c  ad 42 40                 ddiv6     lda dint1+1
 2464 T:391f  cd 44 40                           cmp dint2+1
 2465 T:3922  90 1f                              bcc ddiv4
 2466 T:3924  d0 08                              bne ddiv5
 2467 T:3926  ad 41 40                           lda dint1
 2468 T:3929  cd 43 40                           cmp dint2
 2469 T:392c  90 15                              bcc ddiv4
 2470 T:392e  ad 41 40                 ddiv5     lda dint1
 2471 T:3931  38                                 sec 
 2472 T:3932  ed 43 40                           sbc dint2
 2473 T:3935  8d 41 40                           sta dint1
 2474 T:3938  ad 42 40                           lda dint1+1
 2475 T:393b  ed 44 40                           sbc dint2+1
 2476 T:393e  8d 42 40                           sta dint1+1
 2477 T:3941  38                                 sec 
 2478 T:3942  24                                 .byt $24
 2479 T:3943  18                       ddiv4     clc 
 2480 T:3944  2e 45 40                           rol dint3
 2481 T:3947  2e 46 40                           rol dint3+1
 2482 T:394a  4e 44 40                           lsr dint2+1
 2483 T:394d  6e 43 40                           ror dint2
 2484 T:3950  4c 0f 39                           jmp ddiv3
 2485 T:3953                                    ;****
 2486 T:3953                                    ;****
 2487 T:3953                           pcat                       ;
 2488 T:3953  20 2a 3a                           jsr prtbtst
 2489 T:3956  38                                 sec 
 2490 T:3957  d0 22                              bne dce1
 2491 T:3959  a9 0d                              lda #13
 2492 T:395b  20 b1 a0                           jsr chout
 2493 T:395e  a9 24                              lda #"$"
 2494 T:3960  8d 00 02                           sta buf
 2495 T:3963  a9 01                              lda #1
 2496 T:3965  a2 00                              ldx #<buf
 2497 T:3967  a0 02                              ldy #>buf
 2498 T:3969  20 bd ff                           jsr setfnpar
 2499 T:396c  ae 33 40                           ldx iecunit
 2500 T:396f  a9 01                              lda #1
 2501 T:3971  a0 00                              ldy #0
 2502 T:3973  20 ba ff                           jsr setfpar
 2503 T:3976  20 c0 ff                           jsr open
 2504 T:3979  09 40                              ora #64
 2505 T:397b  b0 4e                    dce1      bcs dce
 2506 T:397d  a9 00                              lda #0
 2507 T:397f  85 90                              sta status
 2508 T:3981  a2 01                              ldx #1
 2509 T:3983  20 c6 ff                           jsr chkin
 2510 T:3986  09 40                              ora #64
 2511 T:3988  b0 41                              bcs dce
 2512 T:398a  20 cf ff                           jsr basin
 2513 T:398d  20 cf ff                           jsr basin
 2514 T:3990  a9 00                    dcloop    lda #0
 2515 T:3992  85 90                              sta status
 2516 T:3994  20 cf ff                           jsr basin
 2517 T:3997  20 cf ff                           jsr basin
 2518 T:399a  a5 90                              lda status
 2519 T:399c  d0 2b                              bne dcok
 2520 T:399e  20 cf ff                           jsr basin
 2521 T:39a1  8d 41 40                           sta dint1
 2522 T:39a4  20 cf ff                           jsr basin
 2523 T:39a7  8d 42 40                           sta dint1+1
 2524 T:39aa  20 d9 39                           jsr dezout
 2525 T:39ad  20 cf ff                 dcl1      jsr basin
 2526 T:39b0  20 b1 a0                           jsr chout
 2527 T:39b3  c9 00                              cmp #0
 2528 T:39b5  d0 f6                              bne dcl1
 2529 T:39b7  20 cc ff                           jsr clrch
 2530 T:39ba  20 55 2a                           jsr crout
 2531 T:39bd  a2 01                              ldx #1
 2532 T:39bf  20 c6 ff                           jsr chkin
 2533 T:39c2  09 40                              ora #64
 2534 T:39c4  b0 05                              bcs dce
 2535 T:39c6  4c 90 39                           jmp dcloop
 2536 T:39c9  a9 00                    dcok      lda #0
 2537 T:39cb  48                       dce       pha 
 2538 T:39cc  20 49 3a                           jsr prtoff
 2539 T:39cf  20 cc ff                           jsr clrch
 2540 T:39d2  a9 01                              lda #1
 2541 T:39d4  20 c3 ff                           jsr close
 2542 T:39d7  68                                 pla 
 2543 T:39d8  60                                 rts 
 2544 T:39d9                                    ;****
 2545 T:39d9  a0 00                    dezout    ldy #0
 2546 T:39db  b9 c6 55                 do1       lda dhi,y
 2547 T:39de  aa                                 tax 
 2548 T:39df  b9 cb 55                           lda dlo,y
 2549 T:39e2  20 da 38                           jsr ddiv
 2550 T:39e5  c8                                 iny 
 2551 T:39e6  c9 00                              cmp #0
 2552 T:39e8  d0 06                              bne do2
 2553 T:39ea  c0 04                              cpy #4
 2554 T:39ec  d0 ed                              bne do1
 2555 T:39ee  f0 06                              beq do3
 2556 T:39f0  18                       do2       clc 
 2557 T:39f1  69 30                              adc #"0"
 2558 T:39f3  20 b1 a0                           jsr chout
 2559 T:39f6  b9 c6 55                 do3       lda dhi,y
 2560 T:39f9  aa                                 tax 
 2561 T:39fa  b9 cb 55                           lda dlo,y
 2562 T:39fd  20 da 38                           jsr ddiv
 2563 T:3a00  18                                 clc 
 2564 T:3a01  69 30                              adc #"0"
 2565 T:3a03  20 b1 a0                           jsr chout
 2566 T:3a06  c8                                 iny 
 2567 T:3a07  c0 05                              cpy #5
 2568 T:3a09  90 eb                              bcc do3
 2569 T:3a0b  60                                 rts 
 2570 T:3a0c                                    ;********
 2571 T:3a0c  ad 35 40                 pprint    lda prtfl
 2572 T:3a0f  49 80                              eor #128
 2573 T:3a11  8d 35 40                           sta prtfl
 2574 T:3a14  10 0a                              bpl pprt1
 2575 T:3a16  a9 b2                              lda #<tpon
 2576 T:3a18  a0 56                              ldy #>tpon
 2577 T:3a1a  20 8f 38                           jsr textout
 2578 T:3a1d  a9 00                              lda #0
 2579 T:3a1f  60                                 rts 
 2580 T:3a20                           pprt1     
 2581 T:3a20  a9 bd                              lda #<tpoff
 2582 T:3a22  a0 56                              ldy #>tpoff
 2583 T:3a24  20 8f 38                           jsr textout
 2584 T:3a27  a9 00                              lda #0
 2585 T:3a29  60                       pca1      rts 

 2587 T:3a2a                                    ;****
 2588 T:3a2a  ad 34 40                 prtbtst   lda prtdev
 2589 T:3a2d  09 80                              ora #$80
 2590 T:3a2f  aa                                 tax 
 2591 T:3a30  d0 03                              bne prttst1
 2592 T:3a32  ae 34 40                 prttst    ldx prtdev
 2593 T:3a35  ad 35 40                 prttst1   lda prtfl
 2594 T:3a38  10 0c                              bpl pttr
 2595 T:3a3a  ad 35 40                           lda prtfl
 2596 T:3a3d  09 40                              ora #64
 2597 T:3a3f  8d 35 40                           sta prtfl
 2598 T:3a42  8a                                 txa 
 2599 T:3a43  4c b4 a0                           jmp chodev
 2600 T:3a46  a9 00                    pttr      lda #0
 2601 T:3a48  60                                 rts 
 2602 T:3a49                                    ;****
 2603 T:3a49  ad 35 40                 prtoff    lda prtfl
 2604 T:3a4c  29 bf                              and #191
 2605 T:3a4e  8d 35 40                           sta prtfl
 2606 T:3a51  a9 00                              lda #0
 2607 T:3a53  4c b4 a0                           jmp chodev

 2609 T:3a56                                    ;********
 2610 T:3a56  85 30                    pecho     sta czei
 2611 T:3a58  84 31                              sty czei+1
 2612 T:3a5a  20 32 3a                           jsr prttst
 2613 T:3a5d  d0 0c                              bne pecr
 2614 T:3a5f  a5 30                              lda czei
 2615 T:3a61  a4 31                              ldy czei+1
 2616 T:3a63  20 8f 38                           jsr textout
 2617 T:3a66  20 55 2a                           jsr crout
 2618 T:3a69  a9 00                              lda #0
 2619 T:3a6b  48                       pecr      pha 
 2620 T:3a6c  20 49 3a                           jsr prtoff
 2621 T:3a6f  68                                 pla 
 2622 T:3a70  60                                 rts 
 2623 T:3a71                                    ;********
 2624 T:3a71  85 30                    pprtdev   sta czei
 2625 T:3a73  84 31                              sty czei+1
 2626 T:3a75  20 2b 29                           jsr gbyt
 2627 T:3a78  b0 af                              bcs pca1
 2628 T:3a7a  8e 34 40                           stx prtdev
 2629 T:3a7d  20 2b 29                           jsr gbyt
 2630 T:3a80  b0 a7                              bcs pca1
 2631 T:3a82  8a                                 txa 
 2632 T:3a83  29 3f                              and #63
 2633 T:3a85  2c 35 40                           bit prtfl
 2634 T:3a88  10 02                              bpl ppd1
 2635 T:3a8a  09 80                              ora #128
 2636 T:3a8c  8d 35 40                 ppd1      sta prtfl
 2637 T:3a8f  a9 00                              lda #0
 2638 T:3a91  60                                 rts 
 2639 T:3a92                                    ;********

 2641 T:3a92  a9 00                    prtinit   lda #0
 2642 T:3a94  8d 35 40                           sta prtfl
 2643 T:3a97  a2 5c                              ldx #<svtab
 2644 T:3a99  a0 55                              ldy #>svtab
 2645 T:3a9b  20 ae a0                           jsr setvec
 2646 T:3a9e  60                                 rts 
 2647 T:3a9f                                    ;********
 2648 T:3a9f  2c 35 40                 pchout    bit prtfl
 2649 T:3aa2  50 4f                              bvc pcor
 2650 T:3aa4  48                                 pha 
 2651 T:3aa5  ad 35 40                           lda prtfl
 2652 T:3aa8  4a                                 lsr 
 2653 T:3aa9  90 07                              bcc pco1
 2654 T:3aab  68                                 pla 
 2655 T:3aac  20 90 50                           jsr bcbmasc
 2656 T:3aaf  4c bd 3a                           jmp pco3
 2657 T:3ab2  4a                       pco1      lsr 
 2658 T:3ab3  90 07                              bcc pco2
 2659 T:3ab5  68                                 pla 
 2660 T:3ab6  20 7a 50                           jsr basccbm
 2661 T:3ab9  4c bd 3a                           jmp pco3
 2662 T:3abc  68                       pco2      pla 
 2663 T:3abd                           pco3      
 2664 T:3abd  c9 0a                              cmp #10
 2665 T:3abf  d0 0c                              bne pco4
 2666 T:3ac1  ad 35 40                           lda prtfl
 2667 T:3ac4  29 30                              and #%00110000
 2668 T:3ac6  49 10                              eor #%00010000
 2669 T:3ac8  4a                                 lsr 
 2670 T:3ac9  4a                                 lsr 
 2671 T:3aca  4c d6 3a                           jmp pco4a
 2672 T:3acd  c9 0d                    pco4      cmp #13
 2673 T:3acf  d0 22                              bne pcor
 2674 T:3ad1  ad 35 40                           lda prtfl
 2675 T:3ad4  29 0c                              and #%00001100
 2676 T:3ad6                           pco4a     
 2677 T:3ad6  4a                                 lsr 
 2678 T:3ad7  4a                                 lsr 
 2679 T:3ad8  8d 36 40                           sta prtdiv
 2680 T:3adb  c9 02                              cmp #2
 2681 T:3add  90 0a                              bcc pco7
 2682 T:3adf  4a                                 lsr 
 2683 T:3ae0  a9 0a                              lda #10
 2684 T:3ae2  90 02                              bcc pco6
 2685 T:3ae4  a9 0d                              lda #13
 2686 T:3ae6                           pco6      
 2687 T:3ae6  20 f3 3a                           jsr pcor
 2688 T:3ae9  ad 36 40                 pco7      lda prtdiv
 2689 T:3aec  4a                                 lsr 
 2690 T:3aed  a9 0d                              lda #13
 2691 T:3aef  90 02                              bcc pco8
 2692 T:3af1  a9 0a                              lda #10
 2693 T:3af3                           pco8      
 2694 T:3af3  6c 37 40                 pcor      jmp (vchout)
 2695 T:3af6                                     .end 

 2703 T:3af6                                    ;../WP1 2.4 .S96 ==0801==
 2704 T:3af6  a9 00                    menuprg   lda #0
 2705 T:3af8  85 9d                              sta $9d              ; error meldung unterbinden
 2706 T:3afa  20 9a 4e                           jsr sortinit
 2707 T:3afd  20 17 50                           jsr convinit
 2708 T:3b00  20 c3 50                           jsr mprtinit
 2709 T:3b03  a9 30                              lda #"0"
 2710 T:3b05  8d 8c 40                           sta iecdrive
 2711 T:3b08  ad 8f 40                           lda menubcol
 2712 T:3b0b  20 ca 51                           jsr setbck
 2713 T:3b0e  ad 8e 40                           lda menutcol
 2714 T:3b11  20 cd 51                           jsr settxt
 2715 T:3b14  a9 08                              lda #8             ;"{dish}"
 2716 T:3b16  20 97 51                           jsr wout
 2717 T:3b19  a9 8e                              lda #142
 2718 T:3b1b  20 97 51                           jsr wout
 2719 T:3b1e                                    ;********
 2720 T:3b1e  a9 70                    mprg      lda #<mainmenu
 2721 T:3b20  a0 5b                              ldy #>mainmenu
 2722 T:3b22  20 8b 51                           jsr wminit
 2723 T:3b25  20 57 a0                           jsr version
 2724 T:3b28  8a                                 txa 
 2725 T:3b29  18                                 clc 
 2726 T:3b2a  69 10                              adc #vetext
 2727 T:3b2c  90 01                              bcc mver1
 2728 T:3b2e  c8                                 iny 
 2729 T:3b2f  20 b2 51                 mver1     jsr wprnterr
 2730 T:3b32  20 3b 41                 mp3       jsr stline
 2731 T:3b35  20 af 51                           jsr wclrcmd
 2732 T:3b38  a9 07                              lda #7
 2733 T:3b3a  20 97 51                           jsr wout
 2734 T:3b3d  20 8e 51                           jsr wmenloop
 2735 T:3b40  8a                       mp2       txa 
 2736 T:3b41  48                                 pha 
 2737 T:3b42  98                                 tya 
 2738 T:3b43  48                                 pha 
 2739 T:3b44  20 b5 51                           jsr wclrerr
 2740 T:3b47  68                                 pla 
 2741 T:3b48  a8                                 tay 
 2742 T:3b49  68                                 pla 
 2743 T:3b4a  0a                                 asl 
 2744 T:3b4b  aa                                 tax 
 2745 T:3b4c  20 64 3b                           jsr mp1
 2746 T:3b4f  c9 00                              cmp #0
 2747 T:3b51  f0 df                              beq mp3
 2748 T:3b53  20 59 3b                           jsr fehlout
 2749 T:3b56  4c 32 3b                           jmp mp3
 2750 T:3b59  48                       fehlout   pha 
 2751 T:3b5a  20 b5 51                           jsr wclrerr
 2752 T:3b5d  68                                 pla 
 2753 T:3b5e  20 5f 2a                           jsr errtxt
 2754 T:3b61  4c b2 51                           jmp wprnterr
 2755 T:3b64  bd 0f 5b                 mp1       lda mpma+1,x
 2756 T:3b67  48                                 pha 
 2757 T:3b68  bd 0e 5b                           lda mpma,x
 2758 T:3b6b  48                                 pha 
 2759 T:3b6c  60                                 rts 
 2760 T:3b6d  98                       mpm1      tya 
 2761 T:3b6e  0a                                 asl 
 2762 T:3b6f  aa                                 tax 
 2763 T:3b70  bd 19 5b                           lda mpm1a+1,x
 2764 T:3b73  48                                 pha 
 2765 T:3b74  bd 18 5b                           lda mpm1a,x
 2766 T:3b77  48                                 pha 
 2767 T:3b78  60                                 rts 
 2768 T:3b79  98                       mpm2      tya 
 2769 T:3b7a  0a                                 asl 
 2770 T:3b7b  aa                                 tax 
 2771 T:3b7c  bd 2d 5b                           lda mpm2a+1,x
 2772 T:3b7f  48                                 pha 
 2773 T:3b80  bd 2c 5b                           lda mpm2a,x
 2774 T:3b83  48                                 pha 
 2775 T:3b84  60                                 rts 
 2776 T:3b85  98                       mpm3      tya 
 2777 T:3b86  0a                                 asl 
 2778 T:3b87  aa                                 tax 
 2779 T:3b88  bd 43 5b                           lda mpm3a+1,x
 2780 T:3b8b  48                                 pha 
 2781 T:3b8c  bd 42 5b                           lda mpm3a,x
 2782 T:3b8f  48                                 pha 
 2783 T:3b90  60                                 rts 
 2784 T:3b91  98                       mpm4      tya 
 2785 T:3b92  0a                                 asl 
 2786 T:3b93  aa                                 tax 
 2787 T:3b94  bd 4f 5b                           lda mpm4a+1,x
 2788 T:3b97  48                                 pha 
 2789 T:3b98  bd 4e 5b                           lda mpm4a,x
 2790 T:3b9b  48                                 pha 
 2791 T:3b9c  60                                 rts 
 2792 T:3b9d  98                       mpm5      tya 
 2793 T:3b9e  0a                                 asl 
 2794 T:3b9f  aa                                 tax 
 2795 T:3ba0  bd 5d 5b                           lda mpm5a+1,x
 2796 T:3ba3  48                                 pha 
 2797 T:3ba4  bd 5c 5b                           lda mpm5a,x
 2798 T:3ba7  48                                 pha 
 2799 T:3ba8  60                                 rts 
 2800 T:3ba9  18                       mpr       clc 
 2801 T:3baa  60                                 rts 
 2802 T:3bab                                    ;**** copyrights
 2803 T:3bab  20 57 a0                 mpm11     jsr version
 2804 T:3bae  8a                                 txa 
 2805 T:3baf  18                                 clc 
 2806 T:3bb0  69 10                              adc #vetext
 2807 T:3bb2  90 01                              bcc mver2
 2808 T:3bb4  c8                                 iny 
 2809 T:3bb5  20 b2 51                 mver2     jsr wprnterr
 2810 T:3bb8  a9 cb                              lda #<coptxt
 2811 T:3bba  a0 5d                              ldy #>coptxt
 2812 T:3bbc  20 b8 51                           jsr wopenmsg
 2813 T:3bbf  20 9d 51                 mpm11a    jsr wgetkey
 2814 T:3bc2  c9 0d                              cmp #13
 2815 T:3bc4  d0 f9                              bne mpm11a
 2816 T:3bc6  20 94 51                           jsr wclose
 2817 T:3bc9  a9 00                              lda #0
 2818 T:3bcb  60                                 rts 
 2819 T:3bcc                                    ;**** colours
 2820 T:3bcc  a9 20                    mpm12     lda #<coltxt
 2821 T:3bce  a0 5e                              ldy #>coltxt
 2822 T:3bd0  20 b8 51                           jsr wopenmsg
 2823 T:3bd3  ad 8f 40                 mpm12d    lda menubcol
 2824 T:3bd6  20 ca 51                           jsr setbck
 2825 T:3bd9  ad 8e 40                           lda menutcol
 2826 T:3bdc  20 cd 51                           jsr settxt
 2827 T:3bdf  20 9d 51                 mpm12a    jsr wgetkey
 2828 T:3be2  f0 fb                              beq mpm12a
 2829 T:3be4  c9 1d                              cmp #29             ; "{rght}"
 2830 T:3be6  d0 06                              bne mpm12b
 2831 T:3be8  ee 8f 40                           inc menubcol
 2832 T:3beb  4c d3 3b                           jmp mpm12d
 2833 T:3bee  c9 9d                    mpm12b    cmp #29+128    ;"{left}"
 2834 T:3bf0  d0 06                              bne mpm12c
 2835 T:3bf2  ce 8f 40                           dec menubcol
 2836 T:3bf5  4c d3 3b                           jmp mpm12d
 2837 T:3bf8  c9 11                    mpm12c    cmp #17          ;"{down}"
 2838 T:3bfa  d0 06                              bne mpm12e
 2839 T:3bfc  ee 8e 40                           inc menutcol
 2840 T:3bff  4c d3 3b                           jmp mpm12d
 2841 T:3c02  c9 91                    mpm12e    cmp #17+128    ;"{up}"
 2842 T:3c04  d0 06                              bne mpm12f
 2843 T:3c06  ce 8e 40                           dec menutcol
 2844 T:3c09  4c d3 3b                           jmp mpm12d
 2845 T:3c0c  c9 0d                    mpm12f    cmp #13
 2846 T:3c0e  d0 cf                              bne mpm12a
 2847 T:3c10  20 94 51                           jsr wclose
 2848 T:3c13  a9 00                              lda #0
 2849 T:3c15  60                       m14a      rts 
 2850 T:3c16                                    ;********
 2851 T:3c16  20 d0 40                 mpm14     jsr asksure
 2852 T:3c19  b0 fa                              bcs m14a
 2853 T:3c1b  20 03 a0                           jsr exit
 2854 T:3c1e  6c fc ff                           jmp ($fffc)
 2855 T:3c21                                    ;********
 2856 T:3c21                           mpm13     

 2858 T:3c21  68                                 pla 
 2859 T:3c22  68                                 pla 
 2860 T:3c23  20 94 51                           jsr wclose
 2861 T:3c26  20 04 52                           jsr wclr
 2862 T:3c29  4c 58 29                           jmp cliprg
 2863 T:3c2c                                    ;********

 2865 T:3c2c                           mpm28     

 2867 T:3c2c  a9 09                              lda #9
 2868 T:3c2e  20 d0 48                           jsr prntcmd
 2869 T:3c31  a9 9d                              lda #<mbeft
 2870 T:3c33  a0 62                              ldy #>mbeft
 2871 T:3c35  20 be 51                           jsr winput
 2872 T:3c38  90 01                              bcc m27nff
 2873 T:3c3a  60                                 rts 
 2874 T:3c3b  86 30                    m27nff    stx czei
 2875 T:3c3d  84 31                              sty czei+1
 2876 T:3c3f  20 e5 29                           jsr sbef
 2877 T:3c42  f0 08                              beq m27nf
 2878 T:3c44  c9 0a                              cmp #maxmenu+1
 2879 T:3c46  b0 04                              bcs m27nf
 2880 T:3c48  20 d3 29                           jsr exec
 2881 T:3c4b  60                                 rts 
 2882 T:3c4c  a9 ff                    m27nf     lda #ennotimp
 2883 T:3c4e  60                                 rts 
 2884 T:3c4f                                    ;******** cbmunit

 2886 T:3c4f  a9 0b                    mpm32     lda #11
 2887 T:3c51  20 d0 48                           jsr prntcmd
 2888 T:3c54  a2 00                              ldx #0
 2889 T:3c56  a9 f4                              lda #<m32mt
 2890 T:3c58  a0 61                              ldy #>m32mt
 2891 T:3c5a  20 a0 51                           jsr wsubmenu
 2892 T:3c5d  20 a6 51                 m32b      jsr wsubloop
 2893 T:3c60  c9 0d                    m32a      cmp #13
 2894 T:3c62  d0 f9                              bne m32b
 2895 T:3c64  98                                 tya 
 2896 T:3c65  18                                 clc 
 2897 T:3c66  69 08                              adc #8
 2898 T:3c68  c9 0c                              cmp #12
 2899 T:3c6a  90 09                              bcc m32c
 2900 T:3c6c  18                                 clc 
 2901 T:3c6d  69 23                              adc #"0"-13
 2902 T:3c6f  8d 8c 40                           sta iecdrive
 2903 T:3c72  4c 78 3c                           jmp m32d
 2904 T:3c75  8d 33 40                 m32c      sta iecunit
 2905 T:3c78  20 94 51                 m32d      jsr wclose
 2906 T:3c7b  a9 00                              lda #0
 2907 T:3c7d  60                                 rts 
 2908 T:3c7e                                    ;**** cbmcommand
 2909 T:3c7e  a9 09                    mpm34     lda #9
 2910 T:3c80  20 d0 48                           jsr prntcmd
 2911 T:3c83  a9 3e                              lda #<m34t
 2912 T:3c85  a0 62                              ldy #>m34t
 2913 T:3c87  20 be 51                           jsr winput
 2914 T:3c8a  90 01                              bcc mpm34x
 2915 T:3c8c  60                                 rts 
 2916 T:3c8d  20 bd ff                 mpm34x    jsr setfnpar
 2917 T:3c90  a9 01                              lda #1
 2918 T:3c92  ae 33 40                           ldx iecunit
 2919 T:3c95  a0 0f                              ldy #15
 2920 T:3c97  20 ba ff                           jsr setfpar
 2921 T:3c9a  20 c0 ff                           jsr open
 2922 T:3c9d  09 40                              ora #64
 2923 T:3c9f  b0 05                              bcs m34c
 2924 T:3ca1  20 b1 3c                           jsr m34b
 2925 T:3ca4  a9 00                              lda #0
 2926 T:3ca6  48                       m34c      pha 
 2927 T:3ca7  20 cc ff                           jsr clrch
 2928 T:3caa  a9 01                    m34c1     lda #1
 2929 T:3cac  20 c3 ff                           jsr close
 2930 T:3caf  68                                 pla 
 2931 T:3cb0  60                                 rts 
 2932 T:3cb1  a2 01                    m34b      ldx #1
 2933 T:3cb3  20 c6 ff                           jsr chkin
 2934 T:3cb6  09 40                              ora #64
 2935 T:3cb8  b0 ec                              bcs m34c
 2936 T:3cba  a0 00                              ldy #0
 2937 T:3cbc  84 90                              sty status
 2938 T:3cbe  20 cf ff                 m34a      jsr basin
 2939 T:3cc1  c9 0d                              cmp #13
 2940 T:3cc3  f0 04                              beq m34aa
 2941 T:3cc5  99 00 02                           sta iobuf,y
 2942 T:3cc8  c8                                 iny 
 2943 T:3cc9  a5 90                    m34aa     lda status
 2944 T:3ccb  f0 f1                              beq m34a
 2945 T:3ccd  a9 00                              lda #0
 2946 T:3ccf  99 00 02                           sta iobuf,y
 2947 T:3cd2  20 cc ff                           jsr clrch
 2948 T:3cd5  20 b5 51                           jsr wclrerr
 2949 T:3cd8  a9 00                              lda #<iobuf
 2950 T:3cda  a0 02                              ldy #>iobuf
 2951 T:3cdc  20 b2 51                           jsr wprnterr
 2952 T:3cdf  ad 00 02                           lda iobuf
 2953 T:3ce2  c9 30                              cmp #"0"
 2954 T:3ce4  d0 03                              bne m34y
 2955 T:3ce6  a9 00                              lda #0
 2956 T:3ce8  60                                 rts 
 2957 T:3ce9  a9 ec                    m34y      lda #eneof
 2958 T:3ceb  60                                 rts 
 2959 T:3cec                                    ;******** (cbmcatalog)
 2960 T:3cec  a9 01                    ismcbm    lda #1
 2961 T:3cee  20 d0 48                           jsr prntcmd
 2962 T:3cf1  a9 4c                              lda #<ismct
 2963 T:3cf3  a0 62                              ldy #>ismct
 2964 T:3cf5  20 be 51                           jsr winput
 2965 T:3cf8  90 01                              bcc ismcx
 2966 T:3cfa  60                                 rts 
 2967 T:3cfb  48                       ismcx     pha 
 2968 T:3cfc  c9 00                              cmp #0
 2969 T:3cfe  d0 02                              bne ismc3
 2970 T:3d00  a9 01                              lda #1
 2971 T:3d02  18                       ismc3     clc 
 2972 T:3d03  69 03                              adc #3
 2973 T:3d05  20 bd ff                           jsr setfnpar
 2974 T:3d08  a8                                 tay 
 2975 T:3d09  68                                 pla 
 2976 T:3d0a  48                                 pha 
 2977 T:3d0b  aa                                 tax 
 2978 T:3d0c  bd 00 02                 ismc1     lda iobuf,x
 2979 T:3d0f  99 00 02                           sta iobuf,y
 2980 T:3d12  88                                 dey 
 2981 T:3d13  ca                                 dex 
 2982 T:3d14  10 f6                              bpl ismc1
 2983 T:3d16  68                                 pla 
 2984 T:3d17  d0 08                              bne ismc2
 2985 T:3d19  8d 04 02                           sta iobuf+4
 2986 T:3d1c  a9 2a                              lda #"*"
 2987 T:3d1e  8d 03 02                           sta iobuf+3
 2988 T:3d21  a9 24                    ismc2     lda #"$"
 2989 T:3d23  8d 00 02                           sta iobuf
 2990 T:3d26  ad 8c 40                           lda iecdrive
 2991 T:3d29  8d 01 02                           sta iobuf+1
 2992 T:3d2c  a9 3a                              lda #":"
 2993 T:3d2e  8d 02 02                           sta iobuf+2
 2994 T:3d31  18                                 clc 
 2995 T:3d32  60                                 rts 
 2996 T:3d33                                    ;****
 2997 T:3d33  4c f7 3d                 m31err    jmp m31i1
 2998 T:3d36                                    ;****
 2999 T:3d36  20 ec 3c                 gtcbmdir  jsr ismcbm
 3000 T:3d39  90 01                              bcc gtcbm1
 3001 T:3d3b  60                                 rts 
 3002 T:3d3c  a9 13                    gtcbm1    lda #19          ;"{home}"
 3003 T:3d3e  20 97 51                           jsr wout
 3004 T:3d41  a9 01                              lda #1
 3005 T:3d43  ae 33 40                           ldx iecunit
 3006 T:3d46  a0 00                              ldy #0
 3007 T:3d48  20 ba ff                           jsr setfpar
 3008 T:3d4b  20 c0 ff                           jsr open
 3009 T:3d4e  09 40                              ora #64
 3010 T:3d50  b0 e1                              bcs m31err
 3011 T:3d52  a2 01                              ldx #1
 3012 T:3d54  20 c6 ff                           jsr chkin
 3013 T:3d57  09 40                              ora #64
 3014 T:3d59  b0 d8                              bcs m31err
 3015 T:3d5b  20 cf ff                           jsr basin
 3016 T:3d5e  20 cf ff                           jsr basin
 3017 T:3d61  20 cf ff                           jsr basin
 3018 T:3d64  20 cf ff                           jsr basin
 3019 T:3d67  20 cf ff                           jsr basin
 3020 T:3d6a  48                                 pha 
 3021 T:3d6b  20 cf ff                           jsr basin
 3022 T:3d6e  68                                 pla 
 3023 T:3d6f  29 0f                              and #15
 3024 T:3d71  18                                 clc 
 3025 T:3d72  69 30                              adc #"0"
 3026 T:3d74  8d 00 02                           sta iobuf
 3027 T:3d77  a9 20                              lda #" "
 3028 T:3d79  8d 01 02                           sta iobuf+1
 3029 T:3d7c  a0 02                              ldy #2
 3030 T:3d7e  20 cf ff                 m31a      jsr basin
 3031 T:3d81  c9 20                              cmp #" "
 3032 T:3d83  90 04                              bcc m31b
 3033 T:3d85  99 00 02                           sta iobuf,y
 3034 T:3d88  c8                                 iny 
 3035 T:3d89                           m31b      
 3036 T:3d89  a6 90                              ldx status
 3037 T:3d8b  f0 09                              beq m31aa
 3038 T:3d8d  a9 00                              lda #0
 3039 T:3d8f  99 00 02                           sta iobuf,y
 3040 T:3d92  a9 f0                              lda #endnrdy
 3041 T:3d94  d0 9d                              bne m31err
 3042 T:3d96  c9 00                    m31aa     cmp #0
 3043 T:3d98  d0 e4                              bne m31a
 3044 T:3d9a  99 00 02                           sta iobuf,y
 3045 T:3d9d  a9 be                              lda #<liste
 3046 T:3d9f  85 0e                              sta lzei
 3047 T:3da1  a9 42                              lda #>liste
 3048 T:3da3  85 0f                              sta lzei+1
 3049 T:3da5  a9 00                              lda #0
 3050 T:3da7  8d 87 40                           sta lanz
 3051 T:3daa  20 13 3e                 m31e      jsr getencbm
 3052 T:3dad  b0 18                              bcs m31c
 3053 T:3daf  a9 14                              lda #20
 3054 T:3db1  18                                 clc 
 3055 T:3db2  65 0e                              adc lzei
 3056 T:3db4  85 0e                              sta lzei
 3057 T:3db6  90 02                              bcc m31d
 3058 T:3db8  e6 0f                              inc lzei+1
 3059 T:3dba  ee 87 40                 m31d      inc lanz
 3060 T:3dbd  20 70 4e                           jsr testlist
 3061 T:3dc0  90 e8                              bcc m31e
 3062 T:3dc2  a9 20                              lda #32
 3063 T:3dc4  4c f7 3d                           jmp m31i1
 3064 T:3dc7  a0 00                    m31c      ldy #0
 3065 T:3dc9  b1 0e                              lda (lzei),y
 3066 T:3dcb  8d 41 40                           sta int1
 3067 T:3dce  c8                                 iny 
 3068 T:3dcf  b1 0e                              lda (lzei),y
 3069 T:3dd1  8d 42 40                           sta int1+1
 3070 T:3dd4  a2 00                              ldx #0
 3071 T:3dd6  bd 00 02                 m31f      lda iobuf,x
 3072 T:3dd9  f0 03                              beq m31g
 3073 T:3ddb  e8                                 inx 
 3074 T:3ddc  d0 f8                              bne m31f
 3075 T:3dde  a9 2c                    m31g      lda #","
 3076 T:3de0  9d 00 02                           sta iobuf,x
 3077 T:3de3  e8                                 inx 
 3078 T:3de4  20 f6 40                           jsr getdez
 3079 T:3de7  a0 00                              ldy #0
 3080 T:3de9  b9 54 62                 m31h      lda m31bft,y
 3081 T:3dec  9d 00 02                           sta iobuf,x
 3082 T:3def  f0 04                              beq m31i
 3083 T:3df1  c8                                 iny 
 3084 T:3df2  e8                                 inx 
 3085 T:3df3  d0 f4                              bne m31h
 3086 T:3df5  a9 00                    m31i      lda #0
 3087 T:3df7                           m31i1     
 3088 T:3df7  48                                 pha 
 3089 T:3df8  20 cc ff                           jsr clrch
 3090 T:3dfb  a9 01                              lda #1
 3091 T:3dfd  20 c3 ff                           jsr close
 3092 T:3e00  68                                 pla 
 3093 T:3e01  d0 0f                              bne m31sor
 3094 T:3e03  a2 00                              ldx #0
 3095 T:3e05  ac 87 40                           ldy lanz
 3096 T:3e08  f0 06                              beq m31sor0
 3097 T:3e0a  88                                 dey 
 3098 T:3e0b  a9 00                              lda #0
 3099 T:3e0d  20 ff 4e                           jsr sort
 3100 T:3e10  a9 00                    m31sor0   lda #0
 3101 T:3e12  60                       m31sor    rts 
 3102 T:3e13                                    ;****
 3103 T:3e13  20 cf ff                 getencbm  jsr basin
 3104 T:3e16  20 cf ff                           jsr basin                ; kettenadresse
 3105 T:3e19  a0 00                              ldy #0
 3106 T:3e1b  20 cf ff                           jsr basin
 3107 T:3e1e  91 0e                              sta (lzei),y
 3108 T:3e20  c8                                 iny 
 3109 T:3e21  20 cf ff                           jsr basin
 3110 T:3e24  91 0e                              sta (lzei),y
 3111 T:3e26  c8                                 iny 
 3112 T:3e27  20 cf ff                 gec1      jsr basin
 3113 T:3e2a  c9 22                              cmp #34
 3114 T:3e2c  f0 06                              beq gec2
 3115 T:3e2e  a5 90                              lda status
 3116 T:3e30  f0 f5                              beq gec1
 3117 T:3e32  d0 3b                              bne gecr
 3118 T:3e34  20 cf ff                 gec2      jsr basin
 3119 T:3e37  c9 22                              cmp #34
 3120 T:3e39  f0 0f                              beq gec4a
 3121 T:3e3b  c9 20                              cmp #" "
 3122 T:3e3d  b0 02                              bcs gec3
 3123 T:3e3f  69 40                              adc #"@"
 3124 T:3e41  91 0e                    gec3      sta (lzei),y
 3125 T:3e43  c8                                 iny 
 3126 T:3e44  a5 90                              lda status
 3127 T:3e46  f0 ec                              beq gec2
 3128 T:3e48  d0 25                              bne gecr
 3129 T:3e4a  a9 00                    gec4a     lda #0
 3130 T:3e4c  91 0e                              sta (lzei),y
 3131 T:3e4e  20 cf ff                 gec4      jsr basin
 3132 T:3e51  c9 20                              cmp #" "
 3133 T:3e53  d0 06                              bne gec5
 3134 T:3e55  a5 90                              lda status
 3135 T:3e57  f0 f5                              beq gec4
 3136 T:3e59  d0 14                              bne gecr
 3137 T:3e5b  a0 13                    gec5      ldy #19
 3138 T:3e5d  91 0e                              sta (lzei),y
 3139 T:3e5f  a9 00                              lda #0
 3140 T:3e61  88                                 dey 
 3141 T:3e62  91 0e                              sta (lzei),y
 3142 T:3e64  20 cf ff                 gec6      jsr basin
 3143 T:3e67  c9 00                              cmp #0
 3144 T:3e69  f0 06                              beq gec7
 3145 T:3e6b  a5 90                              lda status
 3146 T:3e6d  f0 f5                              beq gec6
 3147 T:3e6f  38                       gecr      sec 
 3148 T:3e70  60                                 rts 
 3149 T:3e71  18                       gec7      clc 
 3150 T:3e72  60                                 rts 
 3151 T:3e73                                    ;****
 3152 T:3e73  ad 8a 40                 inimlist  lda lseit
 3153 T:3e76  8d 41 40                           sta int1
 3154 T:3e79  a9 00                              lda #0
 3155 T:3e7b  8d 42 40                           sta int1+1
 3156 T:3e7e  a9 13                              lda #mdiranz
 3157 T:3e80  a2 00                              ldx #0
 3158 T:3e82  20 6f 49                           jsr mult
 3159 T:3e85  8d 41 40                           sta int1
 3160 T:3e88  ad 87 40                           lda lanz
 3161 T:3e8b  38                                 sec 
 3162 T:3e8c  ed 41 40                           sbc int1
 3163 T:3e8f  c9 13                              cmp #mdiranz
 3164 T:3e91  90 04                              bcc iml1
 3165 T:3e93  f0 02                              beq iml1
 3166 T:3e95  a9 13                              lda #mdiranz
 3167 T:3e97  8d 9b 40                 iml1      sta dirmenu
 3168 T:3e9a  8d 88 40                           sta lmanz
 3169 T:3e9d  a9 1b                              lda #mdirtbrt
 3170 T:3e9f  8d 9c 40                           sta dirmenu+1
 3171 T:3ea2  a9 03                              lda #3
 3172 T:3ea4  8d 9d 40                           sta dirmenu+2
 3173 T:3ea7  a9 06                              lda #6
 3174 T:3ea9  8d 9e 40                           sta dirmenu+3
 3175 T:3eac  a9 00                              lda #0
 3176 T:3eae  8d 42 40                           sta int1+1
 3177 T:3eb1  a9 14                              lda #20
 3178 T:3eb3  a2 00                              ldx #0
 3179 T:3eb5  20 6f 49                           jsr mult
 3180 T:3eb8  18                                 clc 
 3181 T:3eb9  69 be                              adc #<liste
 3182 T:3ebb  85 0e                              sta lzei
 3183 T:3ebd  8a                                 txa 
 3184 T:3ebe  69 42                              adc #>liste
 3185 T:3ec0  85 0f                              sta lzei+1
 3186 T:3ec2  a9 9f                              lda #<dirmenu+4
 3187 T:3ec4  85 10                              sta lmzei
 3188 T:3ec6  a9 40                              lda #>dirmenu+4
 3189 T:3ec8  85 11                              sta lmzei+1
 3190 T:3eca  a9 20                    iml2      lda #" "
 3191 T:3ecc  8d 00 02                           sta iobuf
 3192 T:3ecf  8d 01 02                           sta iobuf+1
 3193 T:3ed2  8d 02 02                           sta iobuf+2
 3194 T:3ed5  a0 02                              ldy #2
 3195 T:3ed7  b1 0e                    iml3      lda (lzei),y
 3196 T:3ed9  f0 08                              beq iml4
 3197 T:3edb  99 01 02                           sta iobuf+1,y
 3198 T:3ede  c8                                 iny 
 3199 T:3edf  c0 12                              cpy #18
 3200 T:3ee1  d0 f4                              bne iml3
 3201 T:3ee3  a9 20                    iml4      lda #" "
 3202 T:3ee5  c0 13                    iml5      cpy #19
 3203 T:3ee7  f0 06                              beq iml6
 3204 T:3ee9  99 01 02                           sta iobuf+1,y
 3205 T:3eec  c8                                 iny 
 3206 T:3eed  d0 f6                              bne iml5
 3207 T:3eef  8d 15 02                 iml6      sta iobuf+21
 3208 T:3ef2  b1 0e                              lda (lzei),y
 3209 T:3ef4  99 01 02                           sta iobuf+1,y
 3210 T:3ef7  a0 12                              ldy #18
 3211 T:3ef9  b1 0e                              lda (lzei),y
 3212 T:3efb  10 05                              bpl iml6a
 3213 T:3efd  a9 3e                              lda #">"
 3214 T:3eff  8d 01 02                           sta iobuf+1
 3215 T:3f02  a0 00                    iml6a     ldy #0
 3216 T:3f04  b1 0e                              lda (lzei),y
 3217 T:3f06  8d 41 40                           sta int1
 3218 T:3f09  c8                                 iny 
 3219 T:3f0a  b1 0e                              lda (lzei),y
 3220 T:3f0c  8d 42 40                           sta int1+1
 3221 T:3f0f  a2 16                              ldx #22
 3222 T:3f11  20 f6 40                           jsr getdez
 3223 T:3f14  a9 20                              lda #" "
 3224 T:3f16  9d 00 02                 iml7      sta iobuf,x
 3225 T:3f19  e0 1a                              cpx #26
 3226 T:3f1b  f0 03                              beq iml8
 3227 T:3f1d  e8                                 inx 
 3228 T:3f1e  d0 f6                              bne iml7
 3229 T:3f20  a0 1b                    iml8      ldy #mdirtbrt
 3230 T:3f22  b9 ff 01                 iml9      lda iobuf-1,y
 3231 T:3f25  91 10                              sta (lmzei),y
 3232 T:3f27  88                                 dey 
 3233 T:3f28  d0 f8                              bne iml9
 3234 T:3f2a  a9 80                              lda #128
 3235 T:3f2c  91 10                              sta (lmzei),y
 3236 T:3f2e  a5 0e                              lda lzei
 3237 T:3f30  18                                 clc 
 3238 T:3f31  69 14                              adc #20
 3239 T:3f33  85 0e                              sta lzei
 3240 T:3f35  90 02                              bcc iml10
 3241 T:3f37  e6 0f                              inc lzei+1
 3242 T:3f39                           iml10     
 3243 T:3f39  a5 10                              lda lmzei
 3244 T:3f3b  18                                 clc 
 3245 T:3f3c  69 1c                              adc #mdirtbrt+1
 3246 T:3f3e  85 10                              sta lmzei
 3247 T:3f40  90 02                              bcc iml11
 3248 T:3f42  e6 11                              inc lmzei+1
 3249 T:3f44  ce 88 40                 iml11     dec lmanz
 3250 T:3f47  d0 81                              bne iml2
 3251 T:3f49  60                                 rts 
 3252 T:3f4a                                    ;********
 3253 T:3f4a  20 36 3d                 mpm31     jsr gtcbmdir
 3254 T:3f4d  f0 01                              beq mpm31x
 3255 T:3f4f  60                                 rts 
 3256 T:3f50  a9 00                    mpm31x    lda #<iobuf
 3257 T:3f52  a0 02                              ldy #>iobuf
 3258 T:3f54  20 b2 51                           jsr wprnterr
 3259 T:3f57  ad 87 40                           lda lanz
 3260 T:3f5a  d0 01                              bne mpm31y
 3261 T:3f5c  60                                 rts 
 3262 T:3f5d  a9 0a                    mpm31y    lda #10
 3263 T:3f5f  20 d0 48                           jsr prntcmd
 3264 T:3f62  a9 00                              lda #0
 3265 T:3f64  8d 89 40                 mpdirin   sta mpdf
 3266 T:3f67  a9 00                              lda #0
 3267 T:3f69  8d 8a 40                           sta lseit
 3268 T:3f6c  2c                                 .byt $2c
 3269 T:3f6d  a9 80                    mp31a1    lda #128
 3270 T:3f6f  48                                 pha 
 3271 T:3f70  20 73 3e                           jsr inimlist
 3272 T:3f73  68                                 pla 
 3273 T:3f74  09 20                              ora #32
 3274 T:3f76  aa                                 tax 
 3275 T:3f77  a9 9b                              lda #<dirmenu
 3276 T:3f79  a0 40                              ldy #>dirmenu
 3277 T:3f7b  20 a0 51                           jsr wsubmenu
 3278 T:3f7e  20 a6 51                 mp31a     jsr wsubloop
 3279 T:3f81  c9 1d                    mp31al    cmp #29          ;"{rght}"
 3280 T:3f83  f0 04                              beq mp31aa
 3281 T:3f85  c9 11                              cmp #17             ;"{down}"
 3282 T:3f87  d0 23                              bne mp31b
 3283 T:3f89  ad 8a 40                 mp31aa    lda lseit
 3284 T:3f8c  8d 41 40                           sta int1
 3285 T:3f8f  ee 41 40                           inc int1
 3286 T:3f92  a9 00                              lda #0
 3287 T:3f94  8d 42 40                           sta int1+1
 3288 T:3f97  a9 13                              lda #mdiranz
 3289 T:3f99  a2 00                              ldx #0
 3290 T:3f9b  20 6f 49                           jsr mult
 3291 T:3f9e  e0 00                              cpx #0
 3292 T:3fa0  d0 dc                              bne mp31a
 3293 T:3fa2  cd 87 40                           cmp lanz
 3294 T:3fa5  b0 d7                              bcs mp31a
 3295 T:3fa7  ee 8a 40                           inc lseit
 3296 T:3faa  d0 c1                              bne mp31a1
 3297 T:3fac  c9 9d                    mp31b     cmp #29+128    ;"{left}"
 3298 T:3fae  f0 04                              beq mp31ba
 3299 T:3fb0  c9 91                              cmp #17+128       ;"{up}"
 3300 T:3fb2  d0 0b                              bne mp31c
 3301 T:3fb4  ad 8a 40                 mp31ba    lda lseit
 3302 T:3fb7  f0 c5                              beq mp31a
 3303 T:3fb9  ce 8a 40                           dec lseit
 3304 T:3fbc  4c 6d 3f                           jmp mp31a1
 3305 T:3fbf  c9 3d                    mp31c     cmp #"="
 3306 T:3fc1  f0 23                              beq mp31d
 3307 T:3fc3  c9 23                              cmp #"#"
 3308 T:3fc5  f0 1f                              beq mp31d
 3309 T:3fc7  c9 03                              cmp #3
 3310 T:3fc9  f0 09                              beq mp31e
 3311 T:3fcb  c9 0d                              cmp #13
 3312 T:3fcd  d0 af                              bne mp31a
 3313 T:3fcf  2c 89 40                           bit mpdf
 3314 T:3fd2  70 63                              bvs mp31xx
 3315 T:3fd4  48                       mp31e     pha 
 3316 T:3fd5  20 94 51                           jsr wclose
 3317 T:3fd8  20 b5 51                           jsr wclrerr
 3318 T:3fdb  68                                 pla 
 3319 T:3fdc  c9 03                              cmp #3
 3320 T:3fde  f0 03                              beq mp31ea
 3321 T:3fe0  a9 00                              lda #0
 3322 T:3fe2  60                                 rts 
 3323 T:3fe3  a9 ea                    mp31ea    lda #enbreak
 3324 T:3fe5  60                                 rts 
 3325 T:3fe6  ad 89 40                 mp31d     lda mpdf
 3326 T:3fe9  10 e9                              bpl mp31e
 3327 T:3feb  8c 73 40                           sty sma
 3328 T:3fee  ad 8a 40                           lda lseit
 3329 T:3ff1  8d 41 40                           sta int1
 3330 T:3ff4  a9 00                              lda #0
 3331 T:3ff6  8d 42 40                           sta int1+1
 3332 T:3ff9  a9 13                              lda #mdiranz
 3333 T:3ffb  a2 00                              ldx #0
 3334 T:3ffd  20 6f 49                           jsr mult
 3335 T:4000  18                                 clc 
 3336 T:4001  6d 73 40                           adc sma
 3337 T:4004  8d 41 40                           sta int1
 3338 T:4007  90 01                              bcc mp31f
 3339 T:4009  e8                                 inx 
 3340 T:400a  8e 42 40                 mp31f     stx int1+1
 3341 T:400d  a9 14                              lda #20
 3342 T:400f  a2 00                              ldx #0
 3343 T:4011  20 6f 49                           jsr mult
 3344 T:4014  18                                 clc 
 3345 T:4015  69 be                              adc #<liste
 3346 T:4017  85 0e                              sta lzei
 3347 T:4019  8a                                 txa 
 3348 T:401a  69 42                              adc #>liste
 3349 T:401c  85 0f                              sta lzei+1
 3350 T:401e  a0 12                              ldy #18
 3351 T:4020  b1 0e                              lda (lzei),y
 3352 T:4022  49 80                              eor #$80
 3353 T:4024  91 0e                              sta (lzei),y
 3354 T:4026  a0 02                              ldy #2
 3355 T:4028  b1 10                              lda (lmzei),y
 3356 T:402a  49 1e                              eor #$1e
 3357 T:402c  91 10                              sta (lmzei),y
 3358 T:402e  2c 89 40                           bit mpdf
 3359 T:4031  50 04                              bvc mp31xx
 3360 T:4033  a9 00                              lda #0
 3361 T:4035  f0 9d                              beq mp31e
 3362 T:4037                           mp31xx    
 3363 T:4037  a9 11                              lda #17             ;"{down}"
 3364 T:4039  20 a9 51                           jsr wexloop
 3365 T:403c  4c 81 3f                           jmp mp31al
 3366 T:403f                                    ;********
 3367 T:403f  20 36 3d                 mpm33     jsr gtcbmdir
 3368 T:4042  f0 01                              beq mpm33x
 3369 T:4044  60                                 rts 
 3370 T:4045  a9 00                    mpm33x    lda #<iobuf
 3371 T:4047  a0 02                              ldy #>iobuf
 3372 T:4049  20 b2 51                           jsr wprnterr
 3373 T:404c  ad 87 40                           lda lanz
 3374 T:404f  d0 01                              bne mpm33y
 3375 T:4051  60                                 rts 
 3376 T:4052  a9 07                    mpm33y    lda #7
 3377 T:4054  20 d0 48                           jsr prntcmd
 3378 T:4057  a9 80                              lda #128
 3379 T:4059  20 64 3f                           jsr mpdirin
 3380 T:405c  f0 01                              beq mpm33ya
 3381 T:405e  60                                 rts 
 3382 T:405f  a9 be                    mpm33ya   lda #<liste
 3383 T:4061  85 0e                              sta lzei
 3384 T:4063  a9 42                              lda #>liste
 3385 T:4065  85 0f                              sta lzei+1
 3386 T:4067  20 d0 40                           jsr asksure
 3387 T:406a  90 01                              bcc mp33a
 3388 T:406c  60                                 rts 
 3389 T:406d  a9 53                    mp33a     lda #"S"
 3390 T:406f  8d 00 02                           sta iobuf
 3391 T:4072  ad 8c 40                           lda iecdrive
 3392 T:4075  8d 01 02                           sta iobuf+1
 3393 T:4078  a9 3a                              lda #":"
 3394 T:407a  8d 02 02                           sta iobuf+2
 3395 T:407d  a0 12                              ldy #18
 3396 T:407f  b1 0e                              lda (lzei),y
 3397 T:4081  10 3a                              bpl mp33c
 3398 T:4083  a0 02                              ldy #2
 3399 T:4085  b1 0e                    mp33d     lda (lzei),y
 3400 T:4087  99 01 02                           sta iobuf+1,y
 3401 T:408a  f0 0a                              beq mp33b
 3402 T:408c  c8                                 iny 
 3403 T:408d  c0 12                              cpy #18
 3404 T:408f  d0 f4                              bne mp33d
 3405 T:4091  a9 00                              lda #0
 3406 T:4093  99 01 02                           sta iobuf+1,y
 3407 T:4096  c8                       mp33b     iny 
 3408 T:4097  98                                 tya 
 3409 T:4098  a2 00                              ldx #<iobuf
 3410 T:409a  a0 02                              ldy #>iobuf
 3411 T:409c  20 bd ff                           jsr setfnpar
 3412 T:409f  a9 01                              lda #1
 3413 T:40a1  ae 33 40                           ldx iecunit
 3414 T:40a4  a0 0f                              ldy #15
 3415 T:40a6  20 ba ff                           jsr setfpar
 3416 T:40a9  20 c0 ff                           jsr open
 3417 T:40ac  20 b1 3c                           jsr m34b
 3418 T:40af  48                                 pha 
 3419 T:40b0  a9 01                              lda #1
 3420 T:40b2  20 c3 ff                           jsr close
 3421 T:40b5  68                                 pla 
 3422 T:40b6  f0 05                              beq mp33c
 3423 T:40b8  20 39 4e                           jsr errorq
 3424 T:40bb  b0 10                              bcs mp33ee
 3425 T:40bd  a5 0e                    mp33c     lda lzei
 3426 T:40bf  18                                 clc 
 3427 T:40c0  69 14                              adc #20
 3428 T:40c2  85 0e                              sta lzei
 3429 T:40c4  90 02                              bcc mp33e
 3430 T:40c6  e6 0f                              inc lzei+1
 3431 T:40c8  ce 87 40                 mp33e     dec lanz
 3432 T:40cb  d0 a0                              bne mp33a
 3433 T:40cd  a9 00                    mp33ee    lda #0
 3434 T:40cf  60                                 rts 
 3435 T:40d0                                    ;********
 3436 T:40d0  a9 5d                    asksure   lda #<ast
 3437 T:40d2  a0 62                              ldy #>ast
 3438 T:40d4  20 b8 51                           jsr wopenmsg
 3439 T:40d7  20 9d 51                 as1       jsr wgetkey
 3440 T:40da  f0 fb                              beq as1
 3441 T:40dc  c9 0d                              cmp #13
 3442 T:40de  f0 0b                              beq as2
 3443 T:40e0  c9 03                              cmp #3
 3444 T:40e2  d0 f3                              bne as1
 3445 T:40e4  20 94 51                           jsr wclose
 3446 T:40e7  38                                 sec 
 3447 T:40e8  a9 ea                              lda #enbreak
 3448 T:40ea  60                                 rts 
 3449 T:40eb  20 94 51                 as2       jsr wclose
 3450 T:40ee  18                                 clc 
 3451 T:40ef  60                                 rts 
 3452 T:40f0                                    ;********
 3453 T:40f0  a9 fe                    ertxrx    lda #entxrx
 3454 T:40f2  2c                                 .byt $2c
 3455 T:40f3  a9 ff                    ernotimp  lda #ennotimp
 3456 T:40f5  60                                 rts 
 3457 T:40f6                                    ;****
 3458 T:40f6  a0 00                    getdez    ldy #0
 3459 T:40f8  8e 86 40                           stx gdb
 3460 T:40fb  b9 c6 55                 go1       lda dhi,y
 3461 T:40fe  aa                                 tax 
 3462 T:40ff  b9 cb 55                           lda dlo,y
 3463 T:4102  20 da 38                           jsr ddiv
 3464 T:4105  c8                                 iny 
 3465 T:4106  c9 00                              cmp #0
 3466 T:4108  d0 06                              bne go2
 3467 T:410a  c0 04                              cpy #4
 3468 T:410c  d0 ed                              bne go1
 3469 T:410e  f0 0c                              beq go3
 3470 T:4110  18                       go2       clc 
 3471 T:4111  69 30                              adc #"0"
 3472 T:4113  ae 86 40                           ldx gdb
 3473 T:4116  9d 00 02                           sta iobuf,x
 3474 T:4119  ee 86 40                           inc gdb
 3475 T:411c  b9 c6 55                 go3       lda dhi,y
 3476 T:411f  aa                                 tax 
 3477 T:4120  b9 cb 55                           lda dlo,y
 3478 T:4123  20 da 38                           jsr ddiv
 3479 T:4126  18                                 clc 
 3480 T:4127  69 30                              adc #"0"
 3481 T:4129  ae 86 40                           ldx gdb
 3482 T:412c  9d 00 02                           sta iobuf,x
 3483 T:412f  ee 86 40                           inc gdb
 3484 T:4132  c8                                 iny 
 3485 T:4133  c0 05                              cpy #5
 3486 T:4135  90 e5                              bcc go3
 3487 T:4137  ae 86 40                           ldx gdb
 3488 T:413a  60                                 rts 
 3489 T:413b                                    ;********
 3490 T:413b  a2 17                    stline    ldx #23
 3491 T:413d  a0 00                              ldy #0
 3492 T:413f  18                                 clc 
 3493 T:4140  20 9a 51                           jsr wcursor
 3494 T:4143  a0 27                              ldy #39
 3495 T:4145  a9 20                              lda #" "
 3496 T:4147  20 97 51                 stl0      jsr wout
 3497 T:414a  88                                 dey 
 3498 T:414b  d0 fa                              bne stl0
 3499 T:414d  a2 17                              ldx #23
 3500 T:414f  a0 00                              ldy #0
 3501 T:4151  18                                 clc 
 3502 T:4152  20 9a 51                           jsr wcursor
 3503 T:4155  a9 a6                              lda #<stlt1
 3504 T:4157  a0 62                              ldy #>stlt1
 3505 T:4159  20 8f 38                           jsr textout
 3506 T:415c  ad 8c 40                           lda iecdrive
 3507 T:415f  20 97 51                           jsr wout
 3508 T:4162  a9 2c                              lda #","
 3509 T:4164  20 97 51                           jsr wout
 3510 T:4167  a9 55                              lda #"U"
 3511 T:4169  20 97 51                           jsr wout
 3512 T:416c  ae 33 40                           ldx iecunit
 3513 T:416f  e0 0a                              cpx #10
 3514 T:4171  90 08                              bcc stl1
 3515 T:4173  8a                                 txa 
 3516 T:4174  38                                 sec 
 3517 T:4175  e9 0a                              sbc #10
 3518 T:4177  aa                                 tax 
 3519 T:4178  a9 31                              lda #"1"
 3520 T:417a  2c                                 .byt $2c
 3521 T:417b  a9 20                    stl1      lda #" "
 3522 T:417d  20 97 51                           jsr wout
 3523 T:4180  8a                                 txa 
 3524 T:4181  18                                 clc 
 3525 T:4182  69 30                              adc #"0"
 3526 T:4184  20 97 51                           jsr wout
 3527 T:4187  a9 ac                              lda #<stlt2
 3528 T:4189  a0 62                              ldy #>stlt2
 3529 T:418b  20 8f 38                           jsr textout
 3530 T:418e  18                                 clc 
 3531 T:418f  20 1b a0                           jsr sgdrive
 3532 T:4192  18                                 clc 
 3533 T:4193  69 41                              adc #"A"             ;"a"
 3534 T:4195  20 97 51                           jsr wout
 3535 T:4198  a9 3a                              lda #":"
 3536 T:419a  20 97 51                           jsr wout
 3537 T:419d  20 1e a0                           jsr gtpath
 3538 T:41a0  85 10                              sta lmzei
 3539 T:41a2  84 11                              sty lmzei+1
 3540 T:41a4  a0 02                              ldy #2
 3541 T:41a6  b1 10                    stl3      lda (lmzei),y
 3542 T:41a8  f0 08                              beq stl4
 3543 T:41aa  20 97 51                           jsr wout
 3544 T:41ad  c8                                 iny 
 3545 T:41ae  c0 19                              cpy #stlend
 3546 T:41b0  d0 f4                              bne stl3
 3547 T:41b2  60                       stl4      rts 
 3548 T:41b3                                    ;********

 3556 T:41b3                                    ;WP4 2.4 .S47 ==0801==
 3557 T:41b3                                    ;****
 3558 T:41b3                           mpm41                      ; pc->pc
 3559 T:41b3  a9 80                              lda #128
 3560 T:41b5  a2 07                              ldx #7
 3561 T:41b7  20 d6 49                           jsr mdirpin
 3562 T:41ba  d0 05                              bne m41aa
 3563 T:41bc  ad 87 40                           lda lanz
 3564 T:41bf  d0 01                              bne m41a
 3565 T:41c1  60                       m41aa     rts 
 3566 T:41c2  18                       m41a      clc 
 3567 T:41c3  20 1b a0                           jsr sgdrive
 3568 T:41c6  8d 7d 40                           sta olddrv
 3569 T:41c9  a9 0c                              lda #12
 3570 T:41cb  20 d0 48                           jsr prntcmd
 3571 T:41ce  a9 ee                              lda #<cppt1
 3572 T:41d0  a0 5e                              ldy #>cppt1
 3573 T:41d2  20 be 51                           jsr winput
 3574 T:41d5  b0 ea                              bcs m41aa
 3575 T:41d7  8a                                 txa 
 3576 T:41d8  48                                 pha 
 3577 T:41d9  98                                 tya 
 3578 T:41da  48                                 pha 
 3579 T:41db  20 92 43                           jsr askdisks
 3580 T:41de  f0 05                              beq m41xx
 3581 T:41e0  a8                                 tay 
 3582 T:41e1  68                                 pla 
 3583 T:41e2  68                                 pla 
 3584 T:41e3  98                                 tya 
 3585 T:41e4  60                                 rts 
 3586 T:41e5  68                       m41xx     pla 
 3587 T:41e6  a8                                 tay 
 3588 T:41e7  68                                 pla 
 3589 T:41e8  20 33 a0                           jsr chdir
 3590 T:41eb  d0 d4                              bne m41aa
 3591 T:41ed  18                                 clc 
 3592 T:41ee  20 1b a0                           jsr sgdrive
 3593 T:41f1  8d 7e 40                           sta newdrv
 3594 T:41f4  a9 be                              lda #<liste
 3595 T:41f6  85 0e                              sta lzei
 3596 T:41f8  a9 42                              lda #>liste
 3597 T:41fa  85 0f                              sta lzei+1
 3598 T:41fc                                    ;****
 3599 T:41fc  a0 10                    m41loop   ldy #16
 3600 T:41fe  b1 0e                              lda (lzei),y
 3601 T:4200  30 03                              bmi m41a0
 3602 T:4202  4c 33 43                           jmp m41next
 3603 T:4205  20 b7 4d                 m41a0     jsr lzeibuf
 3604 T:4208  ad 7e 40                           lda newdrv
 3605 T:420b  38                                 sec 
 3606 T:420c  20 1b a0                           jsr sgdrive
 3607 T:420f  20 af 51                           jsr wclrcmd
 3608 T:4212  a9 00                              lda #<iobuf
 3609 T:4214  a0 02                              ldy #>iobuf
 3610 T:4216  20 ac 51                           jsr wprntcmd
 3611 T:4219  a9 00                    m41a3     lda #<iobuf
 3612 T:421b  a0 02                              ldy #>iobuf
 3613 T:421d  a2 20                              ldx #$20
 3614 T:421f  20 3f a0                           jsr dcreate
 3615 T:4222  f0 0d                              beq m41b
 3616 T:4224  c9 f3                              cmp #enfexist
 3617 T:4226  d0 12                              bne m41a1
 3618 T:4228  20 49 43                           jsr gtnname
 3619 T:422b  90 ec                              bcc m41a3
 3620 T:422d  d0 10                              bne m41a2
 3621 T:422f  f0 13                              beq m41b1
 3622 T:4231  a9 00                    m41b      lda #<iobuf
 3623 T:4233  a0 02                              ldy #>iobuf
 3624 T:4235  20 48 a0                           jsr dopen
 3625 T:4238  f0 0d                              beq m41c
 3626 T:423a  20 2c 4e                 m41a1     jsr error
 3627 T:423d  90 05                              bcc m41b1
 3628 T:423f  a9 01                    m41a2     lda #1
 3629 T:4241  8d 87 40                           sta lanz
 3630 T:4244  4c 33 43                 m41b1     jmp m41next
 3631 T:4247  86 2c                    m41c      stx newfpb
 3632 T:4249  84 2d                              sty newfpb+1
 3633 T:424b  a0 2e                              ldy #fphandle
 3634 T:424d  b1 2c                              lda (newfpb),y
 3635 T:424f  8d 7c 40                           sta newhdl
 3636 T:4252                                    ;****
 3637 T:4252  ad 7d 40                           lda olddrv
 3638 T:4255  38                                 sec 
 3639 T:4256  20 1b a0                           jsr sgdrive
 3640 T:4259  20 b7 4d                           jsr lzeibuf
 3641 T:425c  20 48 a0                           jsr dopen
 3642 T:425f  f0 0d                              beq m41d
 3643 T:4261  20 2c 4e                           jsr error
 3644 T:4264  90 05                              bcc m41b2
 3645 T:4266  a9 01                              lda #1
 3646 T:4268  8d 87 40                           sta lanz
 3647 T:426b  4c 2d 43                 m41b2     jmp m41l
 3648 T:426e  86 26                    m41d      stx oldfpb
 3649 T:4270  84 27                              sty oldfpb+1
 3650 T:4272  a0 2e                              ldy #fphandle
 3651 T:4274  b1 26                              lda (oldfpb),y
 3652 T:4276  8d 7a 40                           sta oldhdl
 3653 T:4279  a0 1a                              ldy #fpsize
 3654 T:427b  b1 26                    m41d1     lda (oldfpb),y
 3655 T:427d  99 5c 40                           sta oldsize-fpsize,y
 3656 T:4280  c8                                 iny 
 3657 T:4281  c0 1e                              cpy #fpsize+4
 3658 T:4283  d0 f6                              bne m41d1
 3659 T:4285                                    ;****
 3660 T:4285  a9 0e                    cppl2     lda #prgbank
 3661 T:4287  a0 44                              ldy #fpbank
 3662 T:4289  91 26                              sta (oldfpb),y
 3663 T:428b  a0 3b                              ldy #fpadr
 3664 T:428d  a9 00                              lda #<buffer
 3665 T:428f  91 26                              sta (oldfpb),y
 3666 T:4291  c8                                 iny 
 3667 T:4292  a9 6c                              lda #>buffer
 3668 T:4294  91 26                              sta (oldfpb),y
 3669 T:4296  a0 39                              ldy #fpanz
 3670 T:4298  ad 00 40                           lda prblen
 3671 T:429b  91 26                              sta (oldfpb),y
 3672 T:429d  c8                                 iny 
 3673 T:429e  ad 01 40                           lda prblen+1
 3674 T:42a1  91 26                              sta (oldfpb),y
 3675 T:42a3  ae 7a 40                           ldx oldhdl
 3676 T:42a6  20 4e a0                           jsr dread
 3677 T:42a9  8d 7b 40                           sta olderr
 3678 T:42ac  f0 11                              beq m41e
 3679 T:42ae  c9 ec                              cmp #eneof
 3680 T:42b0  f0 36                              beq m41f
 3681 T:42b2  20 2c 4e                           jsr error
 3682 T:42b5  90 05                              bcc m41b3
 3683 T:42b7  a9 01                              lda #1
 3684 T:42b9  8d 87 40                           sta lanz
 3685 T:42bc  4c 27 43                 m41b3     jmp m41i
 3686 T:42bf  ad 76 40                 m41e      lda oldsize
 3687 T:42c2  38                                 sec 
 3688 T:42c3  ed 00 40                           sbc prblen
 3689 T:42c6  8d 76 40                           sta oldsize
 3690 T:42c9  ad 77 40                           lda oldsize+1
 3691 T:42cc  ed 01 40                           sbc prblen+1
 3692 T:42cf  8d 77 40                           sta oldsize+1
 3693 T:42d2  b0 0b                              bcs m41e1
 3694 T:42d4  ad 78 40                           lda oldsize+2
 3695 T:42d7  d0 03                              bne m41e2
 3696 T:42d9  ce 79 40                           dec oldsize+3
 3697 T:42dc  ce 78 40                 m41e2     dec oldsize+2
 3698 T:42df  ad 00 40                 m41e1     lda prblen
 3699 T:42e2  ae 01 40                           ldx prblen+1
 3700 T:42e5  4c ee 42                           jmp m41g
 3701 T:42e8  ad 76 40                 m41f      lda oldsize
 3702 T:42eb  ae 77 40                           ldx oldsize+1
 3703 T:42ee  20 31 50                 m41g      jsr conv
 3704 T:42f1  a0 39                              ldy #fpanz
 3705 T:42f3  91 2c                              sta (newfpb),y
 3706 T:42f5  c8                                 iny 
 3707 T:42f6  8a                                 txa 
 3708 T:42f7  91 2c                              sta (newfpb),y
 3709 T:42f9  a0 3b                              ldy #fpadr
 3710 T:42fb  a9 00                              lda #<buffer
 3711 T:42fd  91 2c                              sta (newfpb),y
 3712 T:42ff  c8                                 iny 
 3713 T:4300  a9 6c                              lda #>buffer
 3714 T:4302  91 2c                              sta (newfpb),y
 3715 T:4304  a0 44                              ldy #fpbank
 3716 T:4306  a9 0e                              lda #prgbank
 3717 T:4308  91 2c                              sta (newfpb),y
 3718 T:430a  ae 7c 40                           ldx newhdl
 3719 T:430d  20 51 a0                           jsr dwrite
 3720 T:4310  f0 0d                              beq m41h
 3721 T:4312  20 2c 4e                           jsr error
 3722 T:4315  90 05                              bcc m41b4
 3723 T:4317  a9 01                              lda #1
 3724 T:4319  8d 87 40                           sta lanz
 3725 T:431c  4c 27 43                 m41b4     jmp m41i
 3726 T:431f  ad 7b 40                 m41h      lda olderr
 3727 T:4322  d0 03                              bne m41i
 3728 T:4324  4c 85 42                           jmp cppl2
 3729 T:4327                                    ;****
 3730 T:4327  ae 7a 40                 m41i      ldx oldhdl
 3731 T:432a  20 4b a0                           jsr dclose
 3732 T:432d  ae 7c 40                 m41l      ldx newhdl
 3733 T:4330  20 4b a0                           jsr dclose
 3734 T:4333  a5 0e                    m41next   lda lzei
 3735 T:4335  18                                 clc 
 3736 T:4336  69 13                              adc #19
 3737 T:4338  85 0e                              sta lzei
 3738 T:433a  90 02                              bcc m41j
 3739 T:433c  e6 0f                              inc lzei+1
 3740 T:433e  ce 87 40                 m41j      dec lanz
 3741 T:4341  f0 03                              beq m41k
 3742 T:4343  4c fc 41                           jmp m41loop
 3743 T:4346  a9 00                    m41k      lda #0
 3744 T:4348  60                                 rts 
 3745 T:4349                                    ;********
 3746 T:4349                           gtnname   
 3747 T:4349  a9 00                              lda #<iobuf
 3748 T:434b  a0 02                              ldy #>iobuf
 3749 T:434d  20 b2 51                           jsr wprnterr
 3750 T:4350  a9 8f                              lda #<gtnnt3
 3751 T:4352  a0 5f                              ldy #>gtnnt3
 3752 T:4354  20 8f 38                           jsr textout
 3753 T:4357  a9 f5                    gtnname1  lda #<gtnnt
 3754 T:4359  a0 5e                              ldy #>gtnnt
 3755 T:435b  20 b8 51                           jsr wopenmsg
 3756 T:435e  20 9d 51                 gtn1      jsr wgetkey
 3757 T:4361  f0 fb                              beq gtn1
 3758 T:4363  c9 0d                              cmp #13
 3759 T:4365  f0 0f                              beq gtnret
 3760 T:4367  c9 3d                              cmp #"="
 3761 T:4369  f0 12                              beq gtnnam
 3762 T:436b  c9 03                              cmp #3
 3763 T:436d  d0 ef                              bne gtn1
 3764 T:436f  20 94 51                           jsr wclose
 3765 T:4372  a9 ea                    gtn1x     lda #enbreak
 3766 T:4374  38                                 sec 
 3767 T:4375  60                                 rts 
 3768 T:4376  20 94 51                 gtnret    jsr wclose
 3769 T:4379  a9 00                              lda #0
 3770 T:437b  38                                 sec 
 3771 T:437c  60                                 rts 
 3772 T:437d  20 94 51                 gtnnam    jsr wclose
 3773 T:4380  a9 05                              lda #5
 3774 T:4382  20 d0 48                           jsr prntcmd
 3775 T:4385  a9 a4                              lda #<isnpt
 3776 T:4387  a0 61                              ldy #>isnpt
 3777 T:4389  20 be 51                           jsr winput
 3778 T:438c  b0 e4                              bcs gtn1x
 3779 T:438e  18                                 clc 
 3780 T:438f  a9 00                              lda #0
 3781 T:4391  60                                 rts 
 3782 T:4392                                    ;****
 3783 T:4392  a9 4a                    askdisks  lda #<adt
 3784 T:4394  a0 5f                              ldy #>adt
 3785 T:4396  20 b8 51                           jsr wopenmsg
 3786 T:4399  20 9d 51                 adl1      jsr wgetkey
 3787 T:439c  f0 fb                              beq adl1
 3788 T:439e  c9 0d                              cmp #13
 3789 T:43a0  f0 07                              beq adl2
 3790 T:43a2  c9 03                              cmp #3
 3791 T:43a4  d0 f3                              bne adl1
 3792 T:43a6  a9 ea                              lda #enbreak
 3793 T:43a8  2c                                 .byt $2c
 3794 T:43a9  a9 00                    adl2      lda #0
 3795 T:43ab  48                                 pha 
 3796 T:43ac  20 94 51                           jsr wclose
 3797 T:43af  68                                 pla 
 3798 T:43b0  60                                 rts 
 3799 T:43b1                                    ;********
 3800 T:43b1                           mpm42                      ; pc->cbm
 3801 T:43b1  a9 80                              lda #128
 3802 T:43b3  a2 07                              ldx #7
 3803 T:43b5  20 d6 49                           jsr mdirpin
 3804 T:43b8  d0 05                              bne m42aa
 3805 T:43ba  ad 87 40                           lda lanz
 3806 T:43bd  d0 01                              bne m42a
 3807 T:43bf  60                       m42aa     rts 
 3808 T:43c0  18                       m42a      clc 
 3809 T:43c1  20 1b a0                           jsr sgdrive
 3810 T:43c4  8d 7d 40                           sta olddrv
 3811 T:43c7  20 92 43                           jsr askdisks
 3812 T:43ca  d0 f3                              bne m42aa
 3813 T:43cc  a9 be                              lda #<liste
 3814 T:43ce  85 0e                              sta lzei
 3815 T:43d0  a9 42                              lda #>liste
 3816 T:43d2  85 0f                              sta lzei+1
 3817 T:43d4  a9 00                              lda #0
 3818 T:43d6  20 bd ff                           jsr setfnpar
 3819 T:43d9  a9 01                              lda #1
 3820 T:43db  ae 33 40                           ldx iecunit
 3821 T:43de  a0 0f                              ldy #15
 3822 T:43e0  20 ba ff                           jsr setfpar
 3823 T:43e3  20 c0 ff                           jsr open
 3824 T:43e6  09 40                              ora #64
 3825 T:43e8  b0 d5                              bcs m42aa
 3826 T:43ea                                    ;****
 3827 T:43ea  a0 10                    m42loop   ldy #16
 3828 T:43ec  b1 0e                              lda (lzei),y
 3829 T:43ee  30 03                              bmi m42a0
 3830 T:43f0  4c 3c 45                           jmp m42next
 3831 T:43f3  ad 8c 40                 m42a0     lda iecdrive
 3832 T:43f6  8d 00 02                           sta iobuf
 3833 T:43f9  a9 3a                              lda #":"
 3834 T:43fb  8d 01 02                           sta iobuf+1
 3835 T:43fe  a0 00                              ldy #0
 3836 T:4400  b1 0e                    m42a3     lda (lzei),y
 3837 T:4402  99 02 02                           sta iobuf+2,y
 3838 T:4405  c8                                 iny 
 3839 T:4406  c0 08                              cpy #8
 3840 T:4408  d0 f6                              bne m42a3
 3841 T:440a  b1 0e                    m42a4     lda (lzei),y
 3842 T:440c  99 03 02                           sta iobuf+3,y
 3843 T:440f  c8                                 iny 
 3844 T:4410  c0 0b                              cpy #11
 3845 T:4412  d0 f6                              bne m42a4
 3846 T:4414  a9 2e                              lda #"."
 3847 T:4416  8d 0a 02                           sta iobuf+2+8
 3848 T:4419  a9 00                              lda #0
 3849 T:441b  8d 0e 02                           sta iobuf+3+11
 3850 T:441e  a9 0e                              lda #14
 3851 T:4420  a2 00                    m42newnam ldx #<iobuf
 3852 T:4422  a0 02                              ldy #>iobuf
 3853 T:4424  20 bd ff                           jsr setfnpar
 3854 T:4427  a9 02                              lda #2
 3855 T:4429  ae 33 40                           ldx iecunit
 3856 T:442c  a0 01                              ldy #1
 3857 T:442e  20 ba ff                           jsr setfpar
 3858 T:4431  20 af 51                           jsr wclrcmd
 3859 T:4434  a9 00                              lda #<iobuf
 3860 T:4436  a0 02                              ldy #>iobuf
 3861 T:4438  20 ac 51                           jsr wprntcmd
 3862 T:443b  20 c0 ff                           jsr open
 3863 T:443e  09 40                              ora #64
 3864 T:4440  b0 45                              bcs m42c
 3865 T:4442  20 b1 3c                           jsr m34b
 3866 T:4445  f0 31                              beq m42cc
 3867 T:4447  a9 02                              lda #2
 3868 T:4449  20 c3 ff                           jsr close
 3869 T:444c  ad 00 02                           lda iobuf
 3870 T:444f  c9 36                              cmp #"6"
 3871 T:4451  d0 07                              bne m42xa
 3872 T:4453  ad 01 02                           lda iobuf+1
 3873 T:4456  c9 33                              cmp #"3"
 3874 T:4458  f0 08                              beq m42xb
 3875 T:445a  20 39 4e                 m42xa     jsr errorq
 3876 T:445d  b0 0a                              bcs m42xkk
 3877 T:445f  4c 3c 45                 m42ce     jmp m42next
 3878 T:4462  20 57 43                 m42xb     jsr gtnname1
 3879 T:4465  90 05                              bcc m42cd
 3880 T:4467  f0 f6                              beq m42ce
 3881 T:4469  4c 51 45                 m42xkk    jmp m42kk
 3882 T:446c  a0 ff                    m42cd     ldy #<-1
 3883 T:446e  c8                       m42cf     iny 
 3884 T:446f  b9 00 02                           lda iobuf,y
 3885 T:4472  d0 fa                              bne m42cf
 3886 T:4474  98                                 tya 
 3887 T:4475  4c 20 44                           jmp m42newnam
 3888 T:4478                                    ;****
 3889 T:4478  ad 7d 40                 m42cc     lda olddrv
 3890 T:447b  38                                 sec 
 3891 T:447c  20 1b a0                           jsr sgdrive
 3892 T:447f  20 b7 4d                           jsr lzeibuf
 3893 T:4482  20 48 a0                           jsr dopen
 3894 T:4485  f0 0d                              beq m42d
 3895 T:4487  20 2c 4e                 m42c      jsr error
 3896 T:448a  90 05                              bcc m42b2
 3897 T:448c  a9 01                              lda #1
 3898 T:448e  8d 87 40                           sta lanz
 3899 T:4491  4c 37 45                 m42b2     jmp m42l
 3900 T:4494  86 26                    m42d      stx oldfpb
 3901 T:4496  84 27                              sty oldfpb+1
 3902 T:4498  a0 2e                              ldy #fphandle
 3903 T:449a  b1 26                              lda (oldfpb),y
 3904 T:449c  8d 7a 40                           sta oldhdl
 3905 T:449f  a0 1a                              ldy #fpsize
 3906 T:44a1  b1 26                    m42d1     lda (oldfpb),y
 3907 T:44a3  99 5c 40                           sta oldsize-fpsize,y
 3908 T:44a6  c8                                 iny 
 3909 T:44a7  c0 1e                              cpy #fpsize+4
 3910 T:44a9  d0 f6                              bne m42d1
 3911 T:44ab                                    ;****
 3912 T:44ab  a9 0e                    cpcl2     lda #prgbank
 3913 T:44ad  a0 44                              ldy #fpbank
 3914 T:44af  91 26                              sta (oldfpb),y
 3915 T:44b1  a0 3b                              ldy #fpadr
 3916 T:44b3  a9 00                              lda #<buffer
 3917 T:44b5  91 26                              sta (oldfpb),y
 3918 T:44b7  c8                                 iny 
 3919 T:44b8  a9 6c                              lda #>buffer
 3920 T:44ba  91 26                              sta (oldfpb),y
 3921 T:44bc  a0 39                              ldy #fpanz
 3922 T:44be  ad 00 40                           lda prblen
 3923 T:44c1  91 26                              sta (oldfpb),y
 3924 T:44c3  c8                                 iny 
 3925 T:44c4  ad 01 40                           lda prblen+1
 3926 T:44c7  91 26                              sta (oldfpb),y
 3927 T:44c9  ae 7a 40                           ldx oldhdl
 3928 T:44cc  20 4e a0                           jsr dread
 3929 T:44cf  8d 7b 40                           sta olderr
 3930 T:44d2  f0 11                              beq m42e
 3931 T:44d4  c9 ec                              cmp #eneof
 3932 T:44d6  f0 36                              beq m42f
 3933 T:44d8  20 2c 4e                           jsr error
 3934 T:44db  90 05                              bcc m42b3
 3935 T:44dd  a9 01                              lda #1
 3936 T:44df  8d 87 40                           sta lanz
 3937 T:44e2  4c 31 45                 m42b3     jmp m42i
 3938 T:44e5  ad 76 40                 m42e      lda oldsize
 3939 T:44e8  38                                 sec 
 3940 T:44e9  ed 00 40                           sbc prblen
 3941 T:44ec  8d 76 40                           sta oldsize
 3942 T:44ef  ad 77 40                           lda oldsize+1
 3943 T:44f2  ed 01 40                           sbc prblen+1
 3944 T:44f5  8d 77 40                           sta oldsize+1
 3945 T:44f8  b0 0b                              bcs m42e1
 3946 T:44fa  ad 78 40                           lda oldsize+2
 3947 T:44fd  d0 03                              bne m42e2
 3948 T:44ff  ce 79 40                           dec oldsize+3
 3949 T:4502  ce 78 40                 m42e2     dec oldsize+2
 3950 T:4505  ad 00 40                 m42e1     lda prblen
 3951 T:4508  ae 01 40                           ldx prblen+1
 3952 T:450b  4c 14 45                           jmp m42g
 3953 T:450e  ad 76 40                 m42f      lda oldsize
 3954 T:4511  ae 77 40                           ldx oldsize+1
 3955 T:4514  20 31 50                 m42g      jsr conv
 3956 T:4517  20 59 45                           jsr cwrite
 3957 T:451a  f0 0d                              beq m42h
 3958 T:451c  20 2c 4e                           jsr error
 3959 T:451f  90 05                              bcc m42b4
 3960 T:4521  a9 01                              lda #1
 3961 T:4523  8d 87 40                           sta lanz
 3962 T:4526  4c 31 45                 m42b4     jmp m42i
 3963 T:4529  ad 7b 40                 m42h      lda olderr
 3964 T:452c  d0 03                              bne m42i
 3965 T:452e  4c ab 44                           jmp cpcl2
 3966 T:4531                                    ;****
 3967 T:4531  ae 7a 40                 m42i      ldx oldhdl
 3968 T:4534  20 4b a0                           jsr dclose
 3969 T:4537  a9 02                    m42l      lda #2
 3970 T:4539  20 c3 ff                           jsr close
 3971 T:453c  a5 0e                    m42next   lda lzei
 3972 T:453e  18                                 clc 
 3973 T:453f  69 13                              adc #19
 3974 T:4541  85 0e                              sta lzei
 3975 T:4543  90 02                              bcc m42j
 3976 T:4545  e6 0f                              inc lzei+1
 3977 T:4547  ce 87 40                 m42j      dec lanz
 3978 T:454a  f0 03                              beq m42k
 3979 T:454c  4c ea 43                           jmp m42loop
 3980 T:454f  a9 00                    m42k      lda #0
 3981 T:4551  48                       m42kk     pha 
 3982 T:4552  a9 01                              lda #1
 3983 T:4554  20 c3 ff                           jsr close
 3984 T:4557  68                                 pla 
 3985 T:4558  60                                 rts 
 3986 T:4559                                    ;****
 3987 T:4559  8d 7f 40                 cwrite    sta ccnt
 3988 T:455c  8e 80 40                           stx ccnt+1
 3989 T:455f  a9 00                              lda #<buffer
 3990 T:4561  85 2c                              sta newfpb
 3991 T:4563  a9 6c                              lda #>buffer
 3992 T:4565  85 2d                              sta newfpb+1
 3993 T:4567  a2 02                              ldx #2
 3994 T:4569  20 c9 ff                           jsr ckout
 3995 T:456c  09 40                              ora #64
 3996 T:456e  b0 24                              bcs cwre
 3997 T:4570  a0 00                              ldy #0
 3998 T:4572  b1 2c                    cwrl      lda (newfpb),y
 3999 T:4574  20 d2 ff                           jsr bsout
 4000 T:4577  e6 2c                              inc newfpb
 4001 T:4579  d0 02                              bne cwr1
 4002 T:457b  e6 2d                              inc newfpb+1
 4003 T:457d  ad 7f 40                 cwr1      lda ccnt
 4004 T:4580  d0 03                              bne cwr2
 4005 T:4582  ce 80 40                           dec ccnt+1
 4006 T:4585  ce 7f 40                 cwr2      dec ccnt
 4007 T:4588  ad 7f 40                           lda ccnt
 4008 T:458b  d0 e5                              bne cwrl
 4009 T:458d  0d 80 40                           ora ccnt+1
 4010 T:4590  d0 e0                              bne cwrl
 4011 T:4592  a9 00                              lda #0
 4012 T:4594  48                       cwre      pha 
 4013 T:4595  20 cc ff                           jsr clrch
 4014 T:4598  68                                 pla 
 4015 T:4599  60                                 rts 
 4016 T:459a                                    ;********
 4017 T:459a                           mpm43                      ; cbm->pc
 4018 T:459a  20 36 3d                           jsr gtcbmdir
 4019 T:459d  f0 01                              beq m43x1
 4020 T:459f  60                       m43x2     rts 
 4021 T:45a0  a9 00                    m43x1     lda #<iobuf
 4022 T:45a2  a0 02                              ldy #>iobuf
 4023 T:45a4  20 b2 51                           jsr wprnterr
 4024 T:45a7  a9 07                              lda #7
 4025 T:45a9  20 d0 48                           jsr prntcmd
 4026 T:45ac  ad 87 40                           lda lanz
 4027 T:45af  f0 ee                              beq m43x2
 4028 T:45b1  a9 80                              lda #128
 4029 T:45b3  20 64 3f                           jsr mpdirin
 4030 T:45b6  d0 e7                              bne m43x2
 4031 T:45b8  a9 0c                              lda #12
 4032 T:45ba  20 d0 48                           jsr prntcmd
 4033 T:45bd  a9 ee                              lda #<cppt1
 4034 T:45bf  a0 5e                              ldy #>cppt1
 4035 T:45c1  20 be 51                           jsr winput
 4036 T:45c4  b0 d9                              bcs m43x2
 4037 T:45c6  8a                                 txa 
 4038 T:45c7  48                                 pha 
 4039 T:45c8  98                                 tya 
 4040 T:45c9  48                                 pha 
 4041 T:45ca  20 92 43                           jsr askdisks
 4042 T:45cd  f0 05                              beq m43xx
 4043 T:45cf  a8                                 tay 
 4044 T:45d0  68                                 pla 
 4045 T:45d1  68                                 pla 
 4046 T:45d2  98                                 tya 
 4047 T:45d3  60                                 rts 
 4048 T:45d4  68                       m43xx     pla 
 4049 T:45d5  a8                                 tay 
 4050 T:45d6  68                                 pla 
 4051 T:45d7  20 33 a0                           jsr chdir
 4052 T:45da  d0 c3                              bne m43x2
 4053 T:45dc  18                                 clc 
 4054 T:45dd  20 1b a0                           jsr sgdrive
 4055 T:45e0  8d 7e 40                           sta newdrv
 4056 T:45e3  a9 be                              lda #<liste
 4057 T:45e5  85 0e                              sta lzei
 4058 T:45e7  a9 42                              lda #>liste
 4059 T:45e9  85 0f                              sta lzei+1
 4060 T:45eb                                    ;****
 4061 T:45eb  a0 12                    m43loop   ldy #18
 4062 T:45ed  b1 0e                              lda (lzei),y
 4063 T:45ef  30 03                              bmi m43a0
 4064 T:45f1  4c c8 46                           jmp m43next
 4065 T:45f4  20 13 47                 m43a0     jsr lcpzeibuf
 4066 T:45f7  ad 7e 40                           lda newdrv
 4067 T:45fa  38                                 sec 
 4068 T:45fb  20 1b a0                           jsr sgdrive
 4069 T:45fe  20 af 51                           jsr wclrcmd
 4070 T:4601  a9 00                              lda #<iobuf
 4071 T:4603  a0 02                              ldy #>iobuf
 4072 T:4605  20 ac 51                           jsr wprntcmd
 4073 T:4608  a9 00                    m43a3     lda #<iobuf
 4074 T:460a  a0 02                              ldy #>iobuf
 4075 T:460c  a2 20                              ldx #$20
 4076 T:460e  20 3f a0                           jsr dcreate
 4077 T:4611  f0 0d                              beq m43b
 4078 T:4613  c9 f3                              cmp #enfexist
 4079 T:4615  d0 12                              bne m43a1
 4080 T:4617  20 49 43                           jsr gtnname
 4081 T:461a  90 ec                              bcc m43a3
 4082 T:461c  d0 10                              bne m43a2
 4083 T:461e  f0 13                              beq m43b1
 4084 T:4620  a9 00                    m43b      lda #<iobuf
 4085 T:4622  a0 02                              ldy #>iobuf
 4086 T:4624  20 48 a0                           jsr dopen
 4087 T:4627  f0 0d                              beq m43c
 4088 T:4629  20 2c 4e                 m43a1     jsr error
 4089 T:462c  90 05                              bcc m43b1
 4090 T:462e  a9 01                    m43a2     lda #1
 4091 T:4630  8d 87 40                           sta lanz
 4092 T:4633  4c c8 46                 m43b1     jmp m43next
 4093 T:4636  86 2c                    m43c      stx newfpb
 4094 T:4638  84 2d                              sty newfpb+1
 4095 T:463a  a0 2e                              ldy #fphandle
 4096 T:463c  b1 2c                              lda (newfpb),y
 4097 T:463e  8d 7c 40                           sta newhdl
 4098 T:4641                                    ;****
 4099 T:4641  20 de 46                           jsr lczeibuf
 4100 T:4644  20 bd ff                           jsr setfnpar
 4101 T:4647  a9 02                              lda #2
 4102 T:4649  ae 33 40                           ldx iecunit
 4103 T:464c  a0 00                              ldy #0
 4104 T:464e  20 ba ff                           jsr setfpar
 4105 T:4651  20 c0 ff                           jsr open
 4106 T:4654  09 40                              ora #64
 4107 T:4656  90 0d                              bcc m43d
 4108 T:4658  20 2c 4e                           jsr error
 4109 T:465b  90 05                              bcc m43b2
 4110 T:465d  a9 01                              lda #1
 4111 T:465f  8d 87 40                           sta lanz
 4112 T:4662  4c c2 46                 m43b2     jmp m43l
 4113 T:4665  20 b1 3c                 m43d      jsr m34b
 4114 T:4668  f0 00                              beq ccpl2
 4115 T:466a                                    ;****
 4116 T:466a                           ccpl2     
 4117 T:466a  20 37 47                           jsr cread
 4118 T:466d  8d 7b 40                           sta olderr
 4119 T:4670  f0 11                              beq m43f
 4120 T:4672  c9 ec                              cmp #eneof
 4121 T:4674  f0 0d                              beq m43f
 4122 T:4676  20 2c 4e                           jsr error
 4123 T:4679  90 05                              bcc m43b3
 4124 T:467b  a9 01                              lda #1
 4125 T:467d  8d 87 40                           sta lanz
 4126 T:4680  4c bd 46                 m43b3     jmp m43i
 4127 T:4683  98                       m43f      tya 
 4128 T:4684  20 31 50                 m43g      jsr conv
 4129 T:4687  a0 3a                              ldy #fpanz+1
 4130 T:4689  91 2c                              sta (newfpb),y
 4131 T:468b  88                                 dey 
 4132 T:468c  8a                                 txa 
 4133 T:468d  91 2c                              sta (newfpb),y
 4134 T:468f  a0 3b                              ldy #fpadr
 4135 T:4691  a9 00                              lda #<buffer
 4136 T:4693  91 2c                              sta (newfpb),y
 4137 T:4695  c8                                 iny 
 4138 T:4696  a9 6c                              lda #>buffer
 4139 T:4698  91 2c                              sta (newfpb),y
 4140 T:469a  a0 44                              ldy #fpbank
 4141 T:469c  a9 0e                              lda #prgbank
 4142 T:469e  91 2c                              sta (newfpb),y
 4143 T:46a0  ae 7c 40                           ldx newhdl
 4144 T:46a3  20 51 a0                           jsr dwrite
 4145 T:46a6  f0 0d                              beq m43h
 4146 T:46a8  20 2c 4e                           jsr error
 4147 T:46ab  90 05                              bcc m43b4
 4148 T:46ad  a9 01                              lda #1
 4149 T:46af  8d 87 40                           sta lanz
 4150 T:46b2  4c bd 46                 m43b4     jmp m43i
 4151 T:46b5  ad 7b 40                 m43h      lda olderr
 4152 T:46b8  d0 03                              bne m43i
 4153 T:46ba  4c 6a 46                           jmp ccpl2
 4154 T:46bd                                    ;****
 4155 T:46bd  a9 02                    m43i      lda #2
 4156 T:46bf  20 c3 ff                           jsr close
 4157 T:46c2  ae 7c 40                 m43l      ldx newhdl
 4158 T:46c5  20 4b a0                           jsr dclose
 4159 T:46c8  a5 0e                    m43next   lda lzei
 4160 T:46ca  18                                 clc 
 4161 T:46cb  69 14                              adc #20
 4162 T:46cd  85 0e                              sta lzei
 4163 T:46cf  90 02                              bcc m43j
 4164 T:46d1  e6 0f                              inc lzei+1
 4165 T:46d3  ce 87 40                 m43j      dec lanz
 4166 T:46d6  f0 03                              beq m43k
 4167 T:46d8  4c eb 45                           jmp m43loop
 4168 T:46db  a9 00                    m43k      lda #0
 4169 T:46dd  60                                 rts 
 4170 T:46de                                    ;****
 4171 T:46de  ad 8c 40                 lczeibuf  lda iecdrive
 4172 T:46e1  8d 00 02                           sta iobuf
 4173 T:46e4  a9 3a                              lda #":"
 4174 T:46e6  8d 01 02                           sta iobuf+1
 4175 T:46e9  a0 02                              ldy #2
 4176 T:46eb  a2 02                              ldx #2
 4177 T:46ed  b1 0e                    lczei1    lda (lzei),y
 4178 T:46ef  9d 00 02                           sta iobuf,x
 4179 T:46f2  f0 06                              beq lczei2
 4180 T:46f4  e8                                 inx 
 4181 T:46f5  c8                                 iny 
 4182 T:46f6  c0 12                              cpy #18
 4183 T:46f8  d0 f3                              bne lczei1
 4184 T:46fa  a9 2c                    lczei2    lda #","
 4185 T:46fc  9d 00 02                           sta iobuf,x
 4186 T:46ff  e8                                 inx 
 4187 T:4700  a0 13                              ldy #19
 4188 T:4702  b1 0e                              lda (lzei),y
 4189 T:4704  9d 00 02                           sta iobuf,x
 4190 T:4707  e8                                 inx 
 4191 T:4708  a9 00                              lda #0
 4192 T:470a  9d 00 02                           sta iobuf,x
 4193 T:470d  8a                                 txa 
 4194 T:470e  a2 00                              ldx #<iobuf
 4195 T:4710  a0 02                              ldy #>iobuf
 4196 T:4712  60                                 rts 
 4197 T:4713                                    ;****
 4198 T:4713  a0 02                    lcpzeibuf ldy #2
 4199 T:4715  b1 0e                    lcpz1     lda (lzei),y
 4200 T:4717  c9 2e                              cmp #"."
 4201 T:4719  d0 02                              bne lcpz1a
 4202 T:471b  a9 5f                              lda #"_"
 4203 T:471d  99 fe 01                 lcpz1a    sta iobuf-2,y
 4204 T:4720  f0 0a                              beq lcpze
 4205 T:4722  c8                                 iny 
 4206 T:4723  c0 0e                              cpy #14
 4207 T:4725  d0 ee                              bne lcpz1
 4208 T:4727  a9 00                              lda #0
 4209 T:4729  99 fe 01                           sta iobuf-2,y
 4210 T:472c  ad 08 02                 lcpze     lda iobuf+8
 4211 T:472f  f0 05                              beq lcpze1
 4212 T:4731  a9 2e                              lda #"."
 4213 T:4733  8d 08 02                           sta iobuf+8
 4214 T:4736  60                       lcpze1    rts 
 4215 T:4737                                    ;****
 4216 T:4737  a2 02                    cread     ldx #2
 4217 T:4739  20 c6 ff                           jsr chkin
 4218 T:473c  09 40                              ora #64
 4219 T:473e  b0 40                              bcs crde
 4220 T:4740  a9 00                              lda #0
 4221 T:4742  85 90                              sta status
 4222 T:4744  8d 7f 40                           sta ccnt
 4223 T:4747  8d 80 40                           sta ccnt+1
 4224 T:474a  a9 00                              lda #<buffer
 4225 T:474c  85 26                              sta oldfpb
 4226 T:474e  a9 6c                              lda #>buffer
 4227 T:4750  85 27                              sta oldfpb+1
 4228 T:4752  20 cf ff                 crdl1     jsr basin
 4229 T:4755  a0 00                              ldy #0
 4230 T:4757  91 26                              sta (oldfpb),y
 4231 T:4759  e6 26                              inc oldfpb
 4232 T:475b  d0 02                              bne crdl2
 4233 T:475d  e6 27                              inc oldfpb+1
 4234 T:475f  ee 7f 40                 crdl2     inc ccnt
 4235 T:4762  d0 03                              bne crdl2a
 4236 T:4764  ee 80 40                           inc ccnt+1
 4237 T:4767  20 e1 48                 crdl2a    jsr tststat
 4238 T:476a  d0 14                              bne crde
 4239 T:476c  ad 80 40                           lda ccnt+1
 4240 T:476f  cd 01 40                           cmp prblen+1
 4241 T:4772  90 de                              bcc crdl1
 4242 T:4774  d0 08                              bne crdl3
 4243 T:4776  ad 7f 40                           lda ccnt
 4244 T:4779  cd 00 40                           cmp prblen
 4245 T:477c  90 d4                              bcc crdl1
 4246 T:477e  a9 00                    crdl3     lda #0
 4247 T:4780  48                       crde      pha 
 4248 T:4781  20 cc ff                           jsr clrch
 4249 T:4784  a5 26                              lda oldfpb
 4250 T:4786  38                                 sec 
 4251 T:4787  e9 00                              sbc #<buffer
 4252 T:4789  aa                                 tax 
 4253 T:478a  a5 27                              lda oldfpb+1
 4254 T:478c  e9 6c                              sbc #>buffer
 4255 T:478e  a8                                 tay 
 4256 T:478f  68                                 pla 
 4257 T:4790  60                                 rts 
 4258 T:4791                                    ;********
 4259 T:4791  20 79 51                 mpmprint  jsr mprton
 4260 T:4794  a9 40                    mpmread   lda #64
 4261 T:4796  a2 06                              ldx #6
 4262 T:4798  20 d6 49                           jsr mdirpin
 4263 T:479b  f0 01                              beq mrd1
 4264 T:479d  60                       mrd2      rts 
 4265 T:479e  ad 87 40                 mrd1      lda lanz
 4266 T:47a1  f0 fa                              beq mrd2
 4267 T:47a3  20 b7 4d                           jsr lzeibuf
 4268 T:47a6  20 48 a0                           jsr dopen
 4269 T:47a9  d0 f2                              bne mrd2
 4270 T:47ab  86 26                              stx oldfpb
 4271 T:47ad  84 27                              sty oldfpb+1
 4272 T:47af  a0 2e                              ldy #fphandle
 4273 T:47b1  b1 26                              lda (oldfpb),y
 4274 T:47b3  8d 7a 40                           sta oldhdl
 4275 T:47b6  a0 1a                              ldy #fpsize
 4276 T:47b8  b1 26                    m4rd1     lda (oldfpb),y
 4277 T:47ba  99 5c 40                           sta oldsize-fpsize,y
 4278 T:47bd  c8                                 iny 
 4279 T:47be  c0 1e                              cpy #fpsize+4
 4280 T:47c0  d0 f6                              bne m4rd1
 4281 T:47c2  a2 03                              ldx #3
 4282 T:47c4  a0 00                              ldy #0
 4283 T:47c6  18                                 clc 
 4284 T:47c7  20 9a 51                           jsr wcursor
 4285 T:47ca  a2 12                              ldx #18
 4286 T:47cc  a9 27                              lda #39
 4287 T:47ce  20 91 51                           jsr wopen
 4288 T:47d1  a9 93                              lda #19+128       ;"{clr}"
 4289 T:47d3  8d 7c 40                           sta newhdl
 4290 T:47d6  20 04 52                           jsr wclr
 4291 T:47d9                           mrdl      
 4292 T:47d9  a9 0e                              lda #prgbank
 4293 T:47db  a0 44                              ldy #fpbank
 4294 T:47dd  91 26                              sta (oldfpb),y
 4295 T:47df  a0 3b                              ldy #fpadr
 4296 T:47e1  a9 00                              lda #<buffer
 4297 T:47e3  91 26                              sta (oldfpb),y
 4298 T:47e5  c8                                 iny 
 4299 T:47e6  a9 6c                              lda #>buffer
 4300 T:47e8  91 26                              sta (oldfpb),y
 4301 T:47ea  a0 39                              ldy #fpanz
 4302 T:47ec  ad 00 40                           lda prblen
 4303 T:47ef  91 26                              sta (oldfpb),y
 4304 T:47f1  c8                                 iny 
 4305 T:47f2  ad 01 40                           lda prblen+1
 4306 T:47f5  91 26                              sta (oldfpb),y
 4307 T:47f7  ae 7a 40                           ldx oldhdl
 4308 T:47fa  20 4e a0                           jsr dread
 4309 T:47fd  8d 7b 40                           sta olderr
 4310 T:4800  f0 07                              beq m4re
 4311 T:4802  c9 ec                              cmp #eneof
 4312 T:4804  f0 2c                              beq m4rf
 4313 T:4806  4c 47 48                           jmp m4rxe
 4314 T:4809  ad 76 40                 m4re      lda oldsize
 4315 T:480c  38                                 sec 
 4316 T:480d  ed 00 40                           sbc prblen
 4317 T:4810  8d 76 40                           sta oldsize
 4318 T:4813  ad 77 40                           lda oldsize+1
 4319 T:4816  ed 01 40                           sbc prblen+1
 4320 T:4819  8d 77 40                           sta oldsize+1
 4321 T:481c  b0 0b                              bcs m4re1
 4322 T:481e  ad 78 40                           lda oldsize+2
 4323 T:4821  d0 03                              bne m4re2
 4324 T:4823  ce 79 40                           dec oldsize+3
 4325 T:4826  ce 78 40                 m4re2     dec oldsize+2
 4326 T:4829  ad 00 40                 m4re1     lda prblen
 4327 T:482c  ae 01 40                           ldx prblen+1
 4328 T:482f  4c 38 48                           jmp m4rg
 4329 T:4832  ad 76 40                 m4rf      lda oldsize
 4330 T:4835  ae 77 40                           ldx oldsize+1
 4331 T:4838  20 5b 48                 m4rg      jsr cprint
 4332 T:483b  d0 0a                              bne m4rxe
 4333 T:483d  ad 7b 40                 m4rh      lda olderr
 4334 T:4840  d0 03                              bne m4ri
 4335 T:4842  4c d9 47                           jmp mrdl
 4336 T:4845  a9 00                    m4ri      lda #0
 4337 T:4847  48                       m4rxe     pha 
 4338 T:4848  20 9d 51                 cprl5     jsr wgetkey
 4339 T:484b  f0 fb                              beq cprl5
 4340 T:484d  20 82 51                           jsr mprtoff
 4341 T:4850  ae 7a 40                           ldx oldhdl
 4342 T:4853  20 4b a0                           jsr dclose
 4343 T:4856  20 94 51                           jsr wclose
 4344 T:4859  68                                 pla 
 4345 T:485a  60                                 rts 
 4346 T:485b                                    ;****
 4347 T:485b  8d 7f 40                 cprint    sta ccnt
 4348 T:485e  8e 80 40                           stx ccnt+1
 4349 T:4861  a9 00                              lda #<buffer
 4350 T:4863  85 2c                              sta newfpb
 4351 T:4865  a9 6c                              lda #>buffer
 4352 T:4867  85 2d                              sta newfpb+1
 4353 T:4869  20 32 3a                           jsr prttst
 4354 T:486c  d0 44                              bne cprx
 4355 T:486e  a0 00                    cprl1     ldy #0
 4356 T:4870  b1 2c                              lda (newfpb),y
 4357 T:4872  c9 13                              cmp #19             ;"{home}"
 4358 T:4874  d0 05                              bne cprl2
 4359 T:4876  cd 7c 40                           cmp newhdl
 4360 T:4879  f0 0b                              beq cprla
 4361 T:487b  20 b8 48                 cprl2     jsr chartest
 4362 T:487e  8d 7c 40                           sta newhdl
 4363 T:4881  20 b1 a0                           jsr chout
 4364 T:4884  b0 2c                              bcs cprx
 4365 T:4886  e6 2c                    cprla     inc newfpb
 4366 T:4888  d0 02                              bne cprl3
 4367 T:488a  e6 2d                              inc newfpb+1
 4368 T:488c  ad 7f 40                 cprl3     lda ccnt
 4369 T:488f  d0 03                              bne cprl4
 4370 T:4891  ce 80 40                           dec ccnt+1
 4371 T:4894  ce 7f 40                 cprl4     dec ccnt
 4372 T:4897  20 9d 51                           jsr wgetkey
 4373 T:489a  f0 09                              beq cprl6
 4374 T:489c  c9 03                              cmp #3
 4375 T:489e  f0 10                              beq cprbrk
 4376 T:48a0  20 9d 51                 cprl7     jsr wgetkey
 4377 T:48a3  f0 fb                              beq cprl7
 4378 T:48a5  ad 7f 40                 cprl6     lda ccnt
 4379 T:48a8  0d 80 40                           ora ccnt+1
 4380 T:48ab  d0 c1                              bne cprl1
 4381 T:48ad  a9 00                              lda #0
 4382 T:48af  2c                                 .byt $2c
 4383 T:48b0  a9 ea                    cprbrk    lda #enbreak
 4384 T:48b2  48                       cprx      pha 
 4385 T:48b3  20 49 3a                           jsr prtoff
 4386 T:48b6  68                                 pla 
 4387 T:48b7  60                                 rts 
 4388 T:48b8                                    ;****
 4389 T:48b8  aa                       chartest  tax 
 4390 T:48b9  29 7f                              and #127
 4391 T:48bb  c9 20                              cmp #32
 4392 T:48bd  b0 0e                              bcs chatok
 4393 T:48bf  a0 07                              ldy #anztkey-1
 4394 T:48c1  8a                                 txa 
 4395 T:48c2  d9 87 5f                 chat1     cmp chtkeys,y
 4396 T:48c5  f0 06                              beq chatok
 4397 T:48c7  88                                 dey 
 4398 T:48c8  10 f8                              bpl chat1
 4399 T:48ca  a9 40                              lda #"@"
 4400 T:48cc  60                                 rts 
 4401 T:48cd  18                       chatok    clc 
 4402 T:48ce  8a                                 txa 
 4403 T:48cf  60                                 rts 
 4404 T:48d0                                    ;********
 4405 T:48d0  48                       prntcmd   pha 
 4406 T:48d1  20 af 51                           jsr wclrcmd
 4407 T:48d4  68                                 pla 
 4408 T:48d5  0a                                 asl 
 4409 T:48d6  aa                                 tax 
 4410 T:48d7  bd 9f 5f                           lda ptta-1,x
 4411 T:48da  a8                                 tay 
 4412 T:48db  bd 9e 5f                           lda ptta-2,x
 4413 T:48de  4c ac 51                           jmp wprntcmd
 4414 T:48e1                                    ;********
 4415 T:48e1  a5 90                    tststat   lda status
 4416 T:48e3  f0 09                              beq tst2
 4417 T:48e5  29 bf                              and #$bf
 4418 T:48e7  d0 03                              bne tst1
 4419 T:48e9  a9 ec                              lda #eneof
 4420 T:48eb  2c                                 .byt $2c
 4421 T:48ec  a9 5d                    tst1      lda #29+64
 4422 T:48ee  c9 00                    tst2      cmp #0
 4423 T:48f0  60                                 rts 
 4424 T:48f1                                    ;********
 4425 T:48f1  20 79 51                 mpcprint  jsr mprton
 4426 T:48f4                           mpcread   
 4427 T:48f4  20 36 3d                           jsr gtcbmdir
 4428 T:48f7  f0 01                              beq mcr1
 4429 T:48f9  60                       mcrr      rts 
 4430 T:48fa                           mcr1      
 4431 T:48fa  a9 00                              lda #<iobuf
 4432 T:48fc  a0 02                              ldy #>iobuf
 4433 T:48fe  20 b2 51                           jsr wprnterr
 4434 T:4901  a9 0f                              lda #15
 4435 T:4903  20 d0 48                           jsr prntcmd
 4436 T:4906  ad 87 40                           lda lanz
 4437 T:4909  f0 ee                              beq mcrr
 4438 T:490b  a9 c0                              lda #128+64
 4439 T:490d  20 64 3f                           jsr mpdirin
 4440 T:4910  d0 e7                              bne mcrr
 4441 T:4912  20 de 46                           jsr lczeibuf
 4442 T:4915  20 bd ff                           jsr setfnpar
 4443 T:4918  a9 02                              lda #2
 4444 T:491a  ae 33 40                           ldx iecunit
 4445 T:491d  a0 00                              ldy #0
 4446 T:491f  20 ba ff                           jsr setfpar
 4447 T:4922  a2 03                              ldx #3
 4448 T:4924  a0 00                              ldy #0
 4449 T:4926  20 9a 51                           jsr wcursor
 4450 T:4929  a2 12                              ldx #18
 4451 T:492b  a9 27                              lda #39
 4452 T:492d  20 91 51                           jsr wopen
 4453 T:4930  a9 93                              lda #19+128       ;"{clr}"
 4454 T:4932  8d 7c 40                           sta newhdl
 4455 T:4935  20 04 52                           jsr wclr
 4456 T:4938  20 c0 ff                           jsr open
 4457 T:493b  09 40                              ora #64
 4458 T:493d  b0 1d                              bcs mcrx
 4459 T:493f  20 37 47                 mcrl      jsr cread
 4460 T:4942  8d 7b 40                           sta olderr
 4461 T:4945  f0 04                              beq mcr2
 4462 T:4947  c9 ec                              cmp #eneof
 4463 T:4949  d0 11                              bne mcrx
 4464 T:494b                           mcr2      
 4465 T:494b  8a                                 txa 
 4466 T:494c  48                                 pha 
 4467 T:494d  98                                 tya 
 4468 T:494e  aa                                 tax 
 4469 T:494f  68                                 pla 
 4470 T:4950  20 5b 48                           jsr cprint
 4471 T:4953  d0 07                              bne mcrx
 4472 T:4955  ad 7b 40                           lda olderr
 4473 T:4958  f0 e5                              beq mcrl
 4474 T:495a  a9 00                              lda #0
 4475 T:495c  48                       mcrx      pha 
 4476 T:495d  a9 02                              lda #2
 4477 T:495f  20 c3 ff                           jsr close
 4478 T:4962  20 9d 51                 mcry      jsr wgetkey
 4479 T:4965  f0 fb                              beq mcry
 4480 T:4967  20 82 51                           jsr mprtoff
 4481 T:496a  20 94 51                           jsr wclose
 4482 T:496d  68                                 pla 
 4483 T:496e  60                                 rts 

 4491 T:496f                                    ;WPU 2.0 .S3  ==0801==

 4493 T:496f                                    ;******** int1 * a,x = a,x
 4494 T:496f  8d 43 40                 mult      sta int2
 4495 T:4972  a9 00                              lda #0
 4496 T:4974  8d 45 40                           sta int3
 4497 T:4977  8d 46 40                           sta int3+1
 4498 T:497a  8a                       mul1      txa 
 4499 T:497b  4a                                 lsr 
 4500 T:497c  aa                                 tax 
 4501 T:497d  6e 43 40                           ror int2
 4502 T:4980  0d 43 40                           ora int2
 4503 T:4983  b0 04                              bcs mul2
 4504 T:4985  f0 1e                              beq multe
 4505 T:4987  90 13                              bcc mul3
 4506 T:4989  ad 45 40                 mul2      lda int3
 4507 T:498c  18                                 clc 
 4508 T:498d  6d 41 40                           adc int1
 4509 T:4990  8d 45 40                           sta int3
 4510 T:4993  ad 46 40                           lda int3+1
 4511 T:4996  6d 42 40                           adc int1+1
 4512 T:4999  8d 46 40                           sta int3+1
 4513 T:499c  0e 41 40                 mul3      asl int1
 4514 T:499f  2e 42 40                           rol int1+1
 4515 T:49a2  4c 7a 49                           jmp mul1
 4516 T:49a5  ad 45 40                 multe     lda int3
 4517 T:49a8  ae 46 40                           ldx int3+1
 4518 T:49ab  8d 41 40                           sta int1
 4519 T:49ae  8e 42 40                           stx int1+1
 4520 T:49b1  60                                 rts 

 4528 T:49b2                                    ;WP2 2.1 .S60 ==0801==

 4530 T:49b2                           mpm22                      ; pcdrive
 4531 T:49b2  a9 03                              lda #3
 4532 T:49b4  20 d0 48                           jsr prntcmd
 4533 T:49b7  a2 00                              ldx #0
 4534 T:49b9  a9 6d                              lda #<mpdt
 4535 T:49bb  a0 61                              ldy #>mpdt
 4536 T:49bd  20 a0 51                           jsr wsubmenu
 4537 T:49c0  20 a6 51                 m22a      jsr wsubloop
 4538 T:49c3  c9 0d                              cmp #13
 4539 T:49c5  d0 f9                              bne m22a
 4540 T:49c7  98                                 tya 
 4541 T:49c8  38                                 sec 
 4542 T:49c9  20 1b a0                           jsr sgdrive
 4543 T:49cc  48                                 pha 
 4544 T:49cd  20 94 51                           jsr wclose
 4545 T:49d0  68                                 pla 
 4546 T:49d1  60                                 rts 
 4547 T:49d2                                    ;********
 4548 T:49d2  a9 00                    mpm21     lda #0
 4549 T:49d4  a2 02                              ldx #2
 4550 T:49d6                                    ;****
 4551 T:49d6  8d 89 40                 mdirpin   sta mpdf
 4552 T:49d9  8e 83 40                           stx mpdcmd
 4553 T:49dc  20 11 4b                           jsr gtpcdir
 4554 T:49df  d0 05                              bne m21ab
 4555 T:49e1  ad 87 40                           lda lanz
 4556 T:49e4  d0 01                              bne m21ac
 4557 T:49e6  60                       m21ab     rts 
 4558 T:49e7  ad 83 40                 m21ac     lda mpdcmd
 4559 T:49ea  20 d0 48                           jsr prntcmd
 4560 T:49ed  a9 00                    m21aa     lda #0
 4561 T:49ef  8d 8a 40                           sta lseit
 4562 T:49f2  a9 13                              lda #mdiranz
 4563 T:49f4  8d 9b 40                           sta dirmenu
 4564 T:49f7  a9 1b                              lda #mdirtbrt
 4565 T:49f9  8d 9c 40                           sta dirmenu+1
 4566 T:49fc  a9 03                              lda #3
 4567 T:49fe  8d 9d 40                           sta dirmenu+2
 4568 T:4a01  a9 06                              lda #6
 4569 T:4a03  8d 9e 40                           sta dirmenu+3
 4570 T:4a06  a2 40                              ldx #64
 4571 T:4a08  a9 9b                              lda #<dirmenu
 4572 T:4a0a  a0 40                              ldy #>dirmenu
 4573 T:4a0c  20 a0 51                           jsr wsubmenu
 4574 T:4a0f  20 86 4c                 m21a1     jsr iniplist
 4575 T:4a12  a2 a0                              ldx #128+32
 4576 T:4a14  a9 9b                              lda #<dirmenu
 4577 T:4a16  a0 40                              ldy #>dirmenu
 4578 T:4a18  20 a0 51                           jsr wsubmenu
 4579 T:4a1b  20 a6 51                 m21a      jsr wsubloop
 4580 T:4a1e  c9 1d                    m21al     cmp #29          ;"{rght}"
 4581 T:4a20  f0 04                              beq m21b
 4582 T:4a22  c9 11                              cmp #17             ;"{down}"
 4583 T:4a24  d0 21                              bne m21c
 4584 T:4a26  ae 8a 40                 m21b      ldx lseit
 4585 T:4a29  e8                                 inx 
 4586 T:4a2a  8e 41 40                           stx int1
 4587 T:4a2d  a9 00                              lda #0
 4588 T:4a2f  8d 42 40                           sta int1+1
 4589 T:4a32  a9 13                              lda #mdiranz
 4590 T:4a34  a2 00                              ldx #0
 4591 T:4a36  20 6f 49                           jsr mult
 4592 T:4a39  e0 00                              cpx #0
 4593 T:4a3b  d0 de                              bne m21a
 4594 T:4a3d  cd 87 40                           cmp lanz
 4595 T:4a40  b0 d9                              bcs m21a
 4596 T:4a42  ee 8a 40                           inc lseit
 4597 T:4a45  d0 c8                              bne m21a1
 4598 T:4a47  c9 9d                    m21c      cmp #29+128    ;"{left}"
 4599 T:4a49  f0 04                              beq m21c1
 4600 T:4a4b  c9 91                              cmp #17+128       ;"{up}"
 4601 T:4a4d  d0 0b                              bne m21d
 4602 T:4a4f  ad 8a 40                 m21c1     lda lseit
 4603 T:4a52  f0 c7                              beq m21a
 4604 T:4a54  ce 8a 40                           dec lseit
 4605 T:4a57  4c 0f 4a                           jmp m21a1
 4606 T:4a5a  c9 8d                    m21d      cmp #13+128
 4607 T:4a5c  f0 1e                              beq m21e
 4608 T:4a5e  c9 3d                              cmp #"="
 4609 T:4a60  f0 1a                              beq m21e
 4610 T:4a62  c9 23                              cmp #"#"
 4611 T:4a64  f0 16                              beq m21e
 4612 T:4a66  c9 0d                              cmp #13
 4613 T:4a68  f0 12                              beq m21e
 4614 T:4a6a  c9 03                              cmp #3
 4615 T:4a6c  d0 ad                              bne m21a
 4616 T:4a6e  a9 ea                              lda #enbreak
 4617 T:4a70  2c                                 .byt $2c
 4618 T:4a71  a9 00                    m21f      lda #0
 4619 T:4a73  48                       m21a2     pha 
 4620 T:4a74  20 94 51                           jsr wclose
 4621 T:4a77  20 af 51                           jsr wclrcmd
 4622 T:4a7a  68                                 pla 
 4623 T:4a7b  60                                 rts 
 4624 T:4a7c  38                       m21e      sec 
 4625 T:4a7d  e9 8d                              sbc #13+128
 4626 T:4a7f  8d 82 40                           sta mpdb
 4627 T:4a82  8c 73 40                           sty sma
 4628 T:4a85  ad 8a 40                           lda lseit
 4629 T:4a88  8d 41 40                           sta int1
 4630 T:4a8b  a9 00                              lda #0
 4631 T:4a8d  8d 42 40                           sta int1+1
 4632 T:4a90  a9 13                              lda #mdiranz
 4633 T:4a92  a2 00                              ldx #0
 4634 T:4a94  20 6f 49                           jsr mult
 4635 T:4a97  18                                 clc 
 4636 T:4a98  6d 73 40                           adc sma
 4637 T:4a9b  90 01                              bcc m21d1
 4638 T:4a9d  e8                                 inx 
 4639 T:4a9e  8d 41 40                 m21d1     sta int1
 4640 T:4aa1  8e 42 40                           stx int1+1
 4641 T:4aa4  a9 13                              lda #19
 4642 T:4aa6  a2 00                              ldx #0
 4643 T:4aa8  20 6f 49                           jsr mult
 4644 T:4aab  18                                 clc 
 4645 T:4aac  69 be                              adc #<liste
 4646 T:4aae  85 0e                              sta lzei
 4647 T:4ab0  8a                                 txa 
 4648 T:4ab1  69 42                              adc #>liste
 4649 T:4ab3  85 0f                              sta lzei+1
 4650 T:4ab5  ad 82 40                           lda mpdb
 4651 T:4ab8  f0 10                              beq m21fb
 4652 T:4aba  49 80                              eor #$80
 4653 T:4abc  d0 07                              bne m21fa
 4654 T:4abe  2c 89 40                           bit mpdf
 4655 T:4ac1  50 ae                              bvc m21f
 4656 T:4ac3  70 31                              bvs m21ax
 4657 T:4ac5  2c 89 40                 m21fa     bit mpdf
 4658 T:4ac8  70 a7                              bvs m21f
 4659 T:4aca  a0 0b                    m21fb     ldy #11
 4660 T:4acc  b1 0e                              lda (lzei),y
 4661 T:4ace  29 10                              and #$10
 4662 T:4ad0  d0 27                              bne m21g
 4663 T:4ad2  d0 9f                    m21a2a    bne m21a2
 4664 T:4ad4  ad 82 40                           lda mpdb
 4665 T:4ad7  f0 1d                              beq m21ax
 4666 T:4ad9  ad 89 40                           lda mpdf
 4667 T:4adc  10 18                              bpl m21ax
 4668 T:4ade  a0 10                              ldy #16
 4669 T:4ae0  b1 0e                              lda (lzei),y
 4670 T:4ae2  49 80                              eor #128
 4671 T:4ae4  91 0e                              sta (lzei),y
 4672 T:4ae6  a0 02                              ldy #2
 4673 T:4ae8  b1 10                              lda (lmzei),y
 4674 T:4aea  49 1e                              eor #$1e
 4675 T:4aec  91 10                              sta (lmzei),y
 4676 T:4aee  a9 11                              lda #17             ;"{down}"
 4677 T:4af0  20 a9 51                           jsr wexloop
 4678 T:4af3  4c 1e 4a                           jmp m21al
 4679 T:4af6  4c 1b 4a                 m21ax     jmp m21a
 4680 T:4af9  ad 82 40                 m21g      lda mpdb
 4681 T:4afc  d0 f8                              bne m21ax
 4682 T:4afe  20 b7 4d                           jsr lzeibuf
 4683 T:4b01  20 33 a0                           jsr chdir
 4684 T:4b04  d0 cc                              bne m21a2a
 4685 T:4b06  20 94 51                           jsr wclose
 4686 T:4b09  20 a7 4b                           jsr gtpsdir
 4687 T:4b0c  d0 c4                              bne m21a2a
 4688 T:4b0e  4c ed 49                           jmp m21aa
 4689 T:4b11                                    ;****
 4690 T:4b11  8d 81 40                 gtpcdir   sta gtpd
 4691 T:4b14  a9 01                              lda #1
 4692 T:4b16  20 d0 48                           jsr prntcmd
 4693 T:4b19  a9 a4                              lda #<isnpt
 4694 T:4b1b  a0 61                              ldy #>isnpt
 4695 T:4b1d  20 be 51                           jsr winput
 4696 T:4b20  90 01                              bcc gtpc1
 4697 T:4b22  60                                 rts 
 4698 T:4b23  86 0e                    gtpc1     stx lzei
 4699 T:4b25  84 0f                              sty lzei+1
 4700 T:4b27  c9 00                              cmp #0
 4701 T:4b29  d0 1a                              bne gpdaa
 4702 T:4b2b  a9 2a                              lda #"*"
 4703 T:4b2d  8d 00 02                           sta iobuf
 4704 T:4b30  8d 02 02                           sta iobuf+2
 4705 T:4b33  a9 00                              lda #0
 4706 T:4b35  8d 03 02                           sta iobuf+3
 4707 T:4b38  a9 2e                              lda #"."
 4708 T:4b3a  8d 01 02                           sta iobuf+1
 4709 T:4b3d  a9 00                              lda #<iobuf
 4710 T:4b3f  85 0e                              sta lzei
 4711 T:4b41  a9 02                              lda #>iobuf
 4712 T:4b43  85 0f                              sta lzei+1
 4713 T:4b45  a0 00                    gpdaa     ldy #0
 4714 T:4b47  b1 0e                    gpdad     lda (lzei),y
 4715 T:4b49  f0 0a                              beq gpdab
 4716 T:4b4b  c9 5c                              cmp #backs
 4717 T:4b4d  f0 03                              beq gpdac
 4718 T:4b4f  c8                                 iny 
 4719 T:4b50  d0 f5                              bne gpdad
 4720 T:4b52  a9 f5                    gpdac     lda #enillnam
 4721 T:4b54  60                                 rts 
 4722 T:4b55  a9 00                    gpdab     lda #<iobuf
 4723 T:4b57  a0 02                              ldy #>iobuf
 4724 T:4b59  a2 20                              ldx #$20
 4725 T:4b5b  20 36 a0                           jsr namedtp
 4726 T:4b5e  f0 04                              beq gpda
 4727 T:4b60  c9 f7                              cmp #ennotfnd
 4728 T:4b62  d0 21                              bne gpde2
 4729 T:4b64                           gpda      
 4730 T:4b64  18                                 clc 
 4731 T:4b65  20 18 a0                           jsr sgdta
 4732 T:4b68  85 fe                              sta dtadr
 4733 T:4b6a  84 ff                              sty dtadr+1
 4734 T:4b6c  a0 0a                              ldy #dsattr-1
 4735 T:4b6e  b1 fe                    gpdb      lda (dtadr),y
 4736 T:4b70  99 b3 42                           sta pcsuch,y
 4737 T:4b73  88                                 dey 
 4738 T:4b74  10 f8                              bpl gpdb
 4739 T:4b76  a2 18                              ldx #24
 4740 T:4b78  a0 00                              ldy #0
 4741 T:4b7a  18                                 clc 
 4742 T:4b7b  20 9a 51                           jsr wcursor
 4743 T:4b7e  a9 76                              lda #<oldsize
 4744 T:4b80  a0 40                              ldy #>oldsize
 4745 T:4b82  20 27 a0                           jsr gtdskfr
 4746 T:4b85  d0 5a                    gpde2     bne gpde1
 4747 T:4b87  a2 00                              ldx #0
 4748 T:4b89  a0 03                              ldy #3
 4749 T:4b8b  b9 76 40                 gpdax1    lda oldsize,y
 4750 T:4b8e  20 57 4e                           jsr hexbuf
 4751 T:4b91  88                                 dey 
 4752 T:4b92  10 f7                              bpl gpdax1
 4753 T:4b94  a9 00                              lda #0
 4754 T:4b96  9d 00 02                           sta iobuf,x
 4755 T:4b99  a9 00                              lda #<iobuf
 4756 T:4b9b  a0 02                              ldy #>iobuf
 4757 T:4b9d  20 8f 38                           jsr textout
 4758 T:4ba0  a9 e8                              lda #<dirbfrei
 4759 T:4ba2  a0 61                              ldy #>dirbfrei
 4760 T:4ba4  20 8f 38                           jsr textout
 4761 T:4ba7  a9 00                    gtpsdir   lda #0
 4762 T:4ba9  8d 87 40                           sta lanz
 4763 T:4bac  a9 02                              lda #<pcdta
 4764 T:4bae  a0 40                              ldy #>pcdta
 4765 T:4bb0  38                                 sec 
 4766 T:4bb1  20 18 a0                           jsr sgdta
 4767 T:4bb4  20 3b 41                           jsr stline
 4768 T:4bb7  a9 be                              lda #<liste
 4769 T:4bb9  85 0e                              sta lzei
 4770 T:4bbb  a0 42                              ldy #>liste
 4771 T:4bbd  84 0f                              sty lzei+1
 4772 T:4bbf  a9 02                              lda #<pcdta
 4773 T:4bc1  a0 40                              ldy #>pcdta
 4774 T:4bc3  38                                 sec 
 4775 T:4bc4  20 18 a0                           jsr sgdta
 4776 T:4bc7  ad 81 40                           lda gtpd
 4777 T:4bca  30 24                              bmi gpd1
 4778 T:4bcc  a9 2a                              lda #"*"
 4779 T:4bce  8d 02 40                           sta pcdta+dsname
 4780 T:4bd1  8d 0a 40                           sta pcdta+dsext
 4781 T:4bd4  a9 10                              lda #$10             ;subdirs
 4782 T:4bd6  8d 0d 40                           sta pcdta+dsattr
 4783 T:4bd9  20 2a a0                           jsr sfirst
 4784 T:4bdc  20 27 4c                           jsr gpdloop
 4785 T:4bdf  c9 f7                              cmp #ennotfnd
 4786 T:4be1  d0 40                    gpde1     bne gpde
 4787 T:4be3  ac 87 40                           ldy lanz
 4788 T:4be6  f0 08                              beq gpd1
 4789 T:4be8  88                                 dey 
 4790 T:4be9  a2 00                              ldx #0
 4791 T:4beb  a9 01                              lda #1
 4792 T:4bed  20 ff 4e                           jsr sort
 4793 T:4bf0  a0 0a                    gpd1      ldy #dsattr-1
 4794 T:4bf2  b9 b3 42                 gpdc      lda pcsuch,y
 4795 T:4bf5  99 02 40                           sta pcdta,y
 4796 T:4bf8  88                                 dey 
 4797 T:4bf9  10 f7                              bpl gpdc
 4798 T:4bfb  ad 87 40                           lda lanz
 4799 T:4bfe  8d 8d 40                           sta panzsub
 4800 T:4c01  a9 20                              lda #$20
 4801 T:4c03  8d 0d 40                           sta pcdta+dsattr
 4802 T:4c06  20 2a a0                           jsr sfirst
 4803 T:4c09  20 27 4c                           jsr gpdloop
 4804 T:4c0c  c9 f7                              cmp #ennotfnd
 4805 T:4c0e  d0 13                              bne gpde
 4806 T:4c10  ae 8d 40                           ldx panzsub
 4807 T:4c13  ec 87 40                           cpx lanz
 4808 T:4c16  f0 09                              beq gpd3
 4809 T:4c18  ac 87 40                           ldy lanz
 4810 T:4c1b  88                                 dey 
 4811 T:4c1c  a9 01                              lda #1
 4812 T:4c1e  20 ff 4e                           jsr sort
 4813 T:4c21  a9 00                    gpd3      lda #0
 4814 T:4c23  60                       gpde      rts 
 4815 T:4c24                                    ;****
 4816 T:4c24  20 30 a0                 gpdl0     jsr snext
 4817 T:4c27  d0 fa                    gpdloop   bne gpde
 4818 T:4c29  a2 0c                              ldx #dgname
 4819 T:4c2b  a0 00                              ldy #0
 4820 T:4c2d  bd 02 40                 gpdl1     lda pcdta,x
 4821 T:4c30  91 0e                              sta (lzei),y
 4822 T:4c32  e8                                 inx 
 4823 T:4c33  c8                                 iny 
 4824 T:4c34  c0 08                              cpy #8
 4825 T:4c36  d0 f5                              bne gpdl1
 4826 T:4c38  a2 14                              ldx #dgext
 4827 T:4c3a  bd 02 40                 gpdl2     lda pcdta,x
 4828 T:4c3d  91 0e                              sta (lzei),y
 4829 T:4c3f  e8                                 inx 
 4830 T:4c40  c8                                 iny 
 4831 T:4c41  c0 0b                              cpy #11
 4832 T:4c43  d0 f5                              bne gpdl2
 4833 T:4c45  a2 17                              ldx #dgattr
 4834 T:4c47  bd 02 40                           lda pcdta,x
 4835 T:4c4a  91 0e                              sta (lzei),y
 4836 T:4c4c  c8                                 iny 
 4837 T:4c4d  a2 1a                              ldx #dgsize
 4838 T:4c4f  bd 02 40                 gpdl3     lda pcdta,x
 4839 T:4c52  91 0e                              sta (lzei),y
 4840 T:4c54  e8                                 inx 
 4841 T:4c55  c8                                 iny 
 4842 T:4c56  c0 10                              cpy #16
 4843 T:4c58  d0 f5                              bne gpdl3
 4844 T:4c5a  a9 00                              lda #0
 4845 T:4c5c  91 0e                              sta (lzei),y
 4846 T:4c5e  c8                                 iny 
 4847 T:4c5f  a2 18                              ldx #dgclus
 4848 T:4c61  bd 02 40                           lda pcdta,x
 4849 T:4c64  91 0e                              sta (lzei),y
 4850 T:4c66  c8                                 iny 
 4851 T:4c67  e8                                 inx 
 4852 T:4c68  bd 02 40                           lda pcdta,x
 4853 T:4c6b  91 0e                              sta (lzei),y
 4854 T:4c6d  a9 13                              lda #19
 4855 T:4c6f  18                                 clc 
 4856 T:4c70  65 0e                              adc lzei
 4857 T:4c72  85 0e                              sta lzei
 4858 T:4c74  90 02                              bcc gpdlx
 4859 T:4c76  e6 0f                              inc lzei+1
 4860 T:4c78  ee 87 40                 gpdlx     inc lanz
 4861 T:4c7b  20 70 4e                           jsr testlist
 4862 T:4c7e  90 03                              bcc gpdl0a
 4863 T:4c80  a9 20                              lda #32
 4864 T:4c82  60                                 rts 
 4865 T:4c83  4c 24 4c                 gpdl0a    jmp gpdl0
 4866 T:4c86                                    ;********
 4867 T:4c86  ad 8a 40                 iniplist  lda lseit
 4868 T:4c89  8d 41 40                           sta int1
 4869 T:4c8c  a9 00                              lda #0
 4870 T:4c8e  8d 42 40                           sta int1+1
 4871 T:4c91  a9 13                              lda #mdiranz
 4872 T:4c93  a2 00                              ldx #0
 4873 T:4c95  20 6f 49                           jsr mult
 4874 T:4c98  8d 41 40                           sta int1
 4875 T:4c9b  ad 87 40                           lda lanz
 4876 T:4c9e  38                                 sec 
 4877 T:4c9f  ed 41 40                           sbc int1
 4878 T:4ca2  c9 13                              cmp #mdiranz
 4879 T:4ca4  90 04                              bcc ipl1
 4880 T:4ca6  f0 02                              beq ipl1
 4881 T:4ca8  a9 13                              lda #mdiranz
 4882 T:4caa  8d 9b 40                 ipl1      sta dirmenu
 4883 T:4cad  8d 88 40                           sta lmanz
 4884 T:4cb0  a9 1b                              lda #mdirtbrt
 4885 T:4cb2  8d 9c 40                           sta dirmenu+1
 4886 T:4cb5  a9 03                              lda #3
 4887 T:4cb7  8d 9d 40                           sta dirmenu+2
 4888 T:4cba  a9 06                              lda #6
 4889 T:4cbc  8d 9e 40                           sta dirmenu+3
 4890 T:4cbf  a9 00                              lda #0
 4891 T:4cc1  8d 42 40                           sta int1+1
 4892 T:4cc4  a9 13                              lda #19
 4893 T:4cc6  a2 00                              ldx #0
 4894 T:4cc8  20 6f 49                           jsr mult
 4895 T:4ccb  18                                 clc 
 4896 T:4ccc  69 be                              adc #<liste
 4897 T:4cce  85 0e                              sta lzei
 4898 T:4cd0  8a                                 txa 
 4899 T:4cd1  69 42                              adc #>liste
 4900 T:4cd3  85 0f                              sta lzei+1
 4901 T:4cd5  a9 9f                              lda #<dirmenu+4
 4902 T:4cd7  85 10                              sta lmzei
 4903 T:4cd9  a9 40                              lda #>dirmenu+4
 4904 T:4cdb  85 11                              sta lmzei+1
 4905 T:4cdd  a9 20                    ipl2      lda #" "
 4906 T:4cdf  8d 00 02                           sta iobuf
 4907 T:4ce2  8d 01 02                           sta iobuf+1
 4908 T:4ce5  8d 02 02                           sta iobuf+2
 4909 T:4ce8  a0 07                              ldy #7
 4910 T:4cea  b1 0e                    ipl3      lda (lzei),y
 4911 T:4cec  99 03 02                           sta iobuf+3,y
 4912 T:4cef  88                                 dey 
 4913 T:4cf0  10 f8                              bpl ipl3
 4914 T:4cf2  a9 20                              lda #" "
 4915 T:4cf4  8d 0b 02                           sta iobuf+3+8
 4916 T:4cf7  a0 08                              ldy #8
 4917 T:4cf9  b1 0e                    ipl4      lda (lzei),y
 4918 T:4cfb  99 04 02                           sta iobuf+4,y
 4919 T:4cfe  c8                                 iny 
 4920 T:4cff  c0 0b                              cpy #11
 4921 T:4d01  d0 f6                              bne ipl4
 4922 T:4d03  a9 20                              lda #" "
 4923 T:4d05  8d 0f 02                           sta iobuf+15
 4924 T:4d08  8d 10 02                           sta iobuf+16
 4925 T:4d0b  a2 11                              ldx #17
 4926 T:4d0d  b1 0e                              lda (lzei),y
 4927 T:4d0f  29 10                              and #$10
 4928 T:4d11  f0 10                              beq ipl7
 4929 T:4d13  a9 2b                              lda #"+"
 4930 T:4d15  8d 01 02                           sta iobuf+1
 4931 T:4d18  bd d0 61                 ipl8      lda sdirt-17,x
 4932 T:4d1b  9d 00 02                           sta iobuf,x
 4933 T:4d1e  f0 1a                              beq iplse
 4934 T:4d20  e8                                 inx 
 4935 T:4d21  d0 f5                              bne ipl8
 4936 T:4d23  a0 10                    ipl7      ldy #16
 4937 T:4d25  b1 0e                              lda (lzei),y
 4938 T:4d27  10 05                              bpl ipl7a
 4939 T:4d29  a9 3e                              lda #">"
 4940 T:4d2b  8d 01 02                           sta iobuf+1
 4941 T:4d2e  a0 0f                    ipl7a     ldy #15
 4942 T:4d30  b1 0e                    ipl6      lda (lzei),y
 4943 T:4d32  20 57 4e                           jsr hexbuf
 4944 T:4d35  88                                 dey 
 4945 T:4d36  c0 0b                              cpy #11
 4946 T:4d38  d0 f6                              bne ipl6
 4947 T:4d3a  a9 20                    iplse     lda #" "
 4948 T:4d3c  9d 00 02                 ipls1     sta iobuf,x
 4949 T:4d3f  e8                                 inx 
 4950 T:4d40  e0 1b                              cpx #mdirtbrt
 4951 T:4d42  d0 f8                              bne ipls1
 4952 T:4d44  a0 1b                              ldy #mdirtbrt
 4953 T:4d46  b9 ff 01                 ipls0     lda iobuf-1,y
 4954 T:4d49  91 10                              sta (lmzei),y
 4955 T:4d4b  88                                 dey 
 4956 T:4d4c  d0 f8                              bne ipls0
 4957 T:4d4e  a9 80                              lda #128
 4958 T:4d50  91 10                              sta (lmzei),y
 4959 T:4d52  a9 13                              lda #19
 4960 T:4d54  18                                 clc 
 4961 T:4d55  65 0e                              adc lzei
 4962 T:4d57  85 0e                              sta lzei
 4963 T:4d59  90 02                              bcc ipls2
 4964 T:4d5b  e6 0f                              inc lzei+1
 4965 T:4d5d                           ipls2     
 4966 T:4d5d  a5 10                              lda lmzei
 4967 T:4d5f  18                                 clc 
 4968 T:4d60  69 1c                              adc #mdirtbrt+1
 4969 T:4d62  85 10                              sta lmzei
 4970 T:4d64  90 02                              bcc ipls3
 4971 T:4d66  e6 11                              inc lmzei+1
 4972 T:4d68  ce 88 40                 ipls3     dec lmanz
 4973 T:4d6b  f0 03                              beq m24aa
 4974 T:4d6d  4c dd 4c                           jmp ipl2
 4975 T:4d70  60                       m24aa     rts 
 4976 T:4d71                                    ;********
 4977 T:4d71                           mpm26                      ; delete
 4978 T:4d71  a9 80                              lda #128
 4979 T:4d73  a2 07                              ldx #7
 4980 T:4d75  20 d6 49                           jsr mdirpin
 4981 T:4d78  d0 f6                              bne m24aa
 4982 T:4d7a  ad 87 40                           lda lanz
 4983 T:4d7d  f0 f1                              beq m24aa
 4984 T:4d7f  20 d0 40                           jsr asksure
 4985 T:4d82  b0 ec                              bcs m24aa
 4986 T:4d84  a9 be                              lda #<liste
 4987 T:4d86  85 0e                              sta lzei
 4988 T:4d88  a9 42                              lda #>liste
 4989 T:4d8a  85 0f                              sta lzei+1
 4990 T:4d8c  a0 10                    m24b      ldy #16
 4991 T:4d8e  b1 0e                              lda (lzei),y
 4992 T:4d90  10 0a                              bpl m24c
 4993 T:4d92  20 b7 4d                           jsr lzeibuf
 4994 T:4d95  a2 20                              ldx #$20
 4995 T:4d97  20 3c a0                           jsr delete
 4996 T:4d9a  d0 13                              bne m24x
 4997 T:4d9c  a9 13                    m24c      lda #19
 4998 T:4d9e  18                                 clc 
 4999 T:4d9f  65 0e                              adc lzei
 5000 T:4da1  85 0e                              sta lzei
 5001 T:4da3  90 02                              bcc m24f
 5002 T:4da5  e6 0f                              inc lzei+1
 5003 T:4da7  ce 87 40                 m24f      dec lanz
 5004 T:4daa  d0 e0                              bne m24b
 5005 T:4dac  a9 00                              lda #0
 5006 T:4dae  60                                 rts 
 5007 T:4daf  20 2c 4e                 m24x      jsr error
 5008 T:4db2  90 e8                              bcc m24c
 5009 T:4db4  a9 ea                              lda #enbreak
 5010 T:4db6  60                                 rts 
 5011 T:4db7                                    ;****
 5012 T:4db7  a0 00                    lzeibuf   ldy #0
 5013 T:4db9  a2 00                              ldx #0
 5014 T:4dbb  b1 0e                    m24d      lda (lzei),y
 5015 T:4dbd  9d 00 02                           sta iobuf,x
 5016 T:4dc0  c8                                 iny 
 5017 T:4dc1  e8                                 inx 
 5018 T:4dc2  e0 08                              cpx #8
 5019 T:4dc4  d0 f5                              bne m24d
 5020 T:4dc6  a9 2e                              lda #"."
 5021 T:4dc8  9d 00 02                           sta iobuf,x
 5022 T:4dcb  e8                                 inx 
 5023 T:4dcc  a0 08                              ldy #8
 5024 T:4dce  b1 0e                    m24e      lda (lzei),y
 5025 T:4dd0  9d 00 02                           sta iobuf,x
 5026 T:4dd3  c8                                 iny 
 5027 T:4dd4  e8                                 inx 
 5028 T:4dd5  e0 0c                              cpx #12
 5029 T:4dd7  d0 f5                              bne m24e
 5030 T:4dd9  a9 00                              lda #0
 5031 T:4ddb  9d 00 02                           sta iobuf,x
 5032 T:4dde  a9 00                              lda #<iobuf
 5033 T:4de0  a0 02                              ldy #>iobuf
 5034 T:4de2  60                                 rts 
 5035 T:4de3                                    ;********
 5036 T:4de3                           mpm23                      ; pfad
 5037 T:4de3  a9 04                              lda #4
 5038 T:4de5  20 d0 48                           jsr prntcmd
 5039 T:4de8  a9 9d                              lda #<ismpt
 5040 T:4dea  a0 61                              ldy #>ismpt
 5041 T:4dec  20 be 51                           jsr winput
 5042 T:4def  b0 04                              bcs mp23a
 5043 T:4df1  8a                                 txa 
 5044 T:4df2  20 33 a0                           jsr chdir
 5045 T:4df5  60                       mp23a     rts 
 5046 T:4df6                                    ;********
 5047 T:4df6                           mpm24                      ; md
 5048 T:4df6  a9 05                              lda #5
 5049 T:4df8  20 d0 48                           jsr prntcmd
 5050 T:4dfb  a9 a4                              lda #<isnpt
 5051 T:4dfd  a0 61                              ldy #>isnpt
 5052 T:4dff  20 be 51                           jsr winput
 5053 T:4e02  b0 f1                              bcs mp23a
 5054 T:4e04  8a                                 txa 
 5055 T:4e05  4c 42 a0                           jmp mkdir
 5056 T:4e08                                    ;********
 5057 T:4e08                           mpm25                      ; rd
 5058 T:4e08  a2 06                              ldx #6
 5059 T:4e0a  a9 40                              lda #64
 5060 T:4e0c  20 d6 49                           jsr mdirpin
 5061 T:4e0f  d0 1a                              bne m25a
 5062 T:4e11  ad 87 40                           lda lanz
 5063 T:4e14  f0 15                              beq m25a
 5064 T:4e16  20 d0 40                           jsr asksure
 5065 T:4e19  b0 10                              bcs m25a
 5066 T:4e1b  a0 0b                              ldy #11
 5067 T:4e1d  b1 0e                              lda (lzei),y
 5068 T:4e1f  29 10                              and #$10
 5069 T:4e21  f0 06                              beq m25e
 5070 T:4e23  20 b7 4d                           jsr lzeibuf
 5071 T:4e26  4c 45 a0                           jmp rmdir
 5072 T:4e29  a9 f5                    m25e      lda #enillnam
 5073 T:4e2b  60                       m25a      rts 
 5074 T:4e2c                                    ;********
 5075 T:4e2c  20 59 3b                 error     jsr fehlout
 5076 T:4e2f  20 af 51                           jsr wclrcmd
 5077 T:4e32  a9 00                              lda #<iobuf
 5078 T:4e34  a0 02                              ldy #>iobuf
 5079 T:4e36  20 ac 51                           jsr wprntcmd
 5080 T:4e39  a9 ab                    errorq    lda #<mwt
 5081 T:4e3b  a0 61                              ldy #>mwt
 5082 T:4e3d  20 b8 51                           jsr wopenmsg
 5083 T:4e40  20 9d 51                 errr1     jsr wgetkey
 5084 T:4e43  f0 fb                              beq errr1
 5085 T:4e45  c9 03                              cmp #3
 5086 T:4e47  f0 04                              beq errr2
 5087 T:4e49  c9 0d                              cmp #13
 5088 T:4e4b  d0 f3                              bne errr1
 5089 T:4e4d  48                       errr2     pha 
 5090 T:4e4e  20 94 51                           jsr wclose
 5091 T:4e51  68                                 pla 
 5092 T:4e52  49 08                              eor #8
 5093 T:4e54  e9 08                              sbc #8
 5094 T:4e56  60                                 rts 
 5095 T:4e57                                    ;********

 5097 T:4e57  48                       hexbuf    pha 
 5098 T:4e58  4a                                 lsr 
 5099 T:4e59  4a                                 lsr 
 5100 T:4e5a  4a                                 lsr 
 5101 T:4e5b  4a                                 lsr 
 5102 T:4e5c  20 62 4e                           jsr hexnbuf
 5103 T:4e5f  68                                 pla 
 5104 T:4e60  29 0f                              and #$0f
 5105 T:4e62  18                       hexnbuf   clc 
 5106 T:4e63  69 30                              adc #"0"
 5107 T:4e65  c9 3a                              cmp #"9"+1
 5108 T:4e67  90 02                              bcc hexnb1
 5109 T:4e69  69 06                              adc #6
 5110 T:4e6b  9d 00 02                 hexnb1    sta iobuf,x
 5111 T:4e6e  e8                                 inx 
 5112 T:4e6f  60                                 rts 

 5114 T:4e70                                    ;********
 5115 T:4e70  a5 0f                    testlist  lda lzei+1
 5116 T:4e72  c9 6c                              cmp #>listend
 5117 T:4e74  d0 04                              bne teli1
 5118 T:4e76  a5 0e                              lda lzei
 5119 T:4e78  c9 00                              cmp #<listend
 5120 T:4e7a  60                       teli1     rts 
 5121 T:4e7b                                    ;********
 5122 T:4e7b  a9 08                    mpm27     lda #8
 5123 T:4e7d  20 d0 48                           jsr prntcmd
 5124 T:4e80  a9 a4                              lda #<isnpt
 5125 T:4e82  a0 61                              ldy #>isnpt
 5126 T:4e84  20 be 51                           jsr winput
 5127 T:4e87  b0 f1                              bcs teli1
 5128 T:4e89  86 30                              stx czei
 5129 T:4e8b  84 31                              sty czei+1
 5130 T:4e8d  20 d0 40                           jsr asksure
 5131 T:4e90  90 01                              bcc m27a
 5132 T:4e92  60                                 rts 
 5133 T:4e93  a5 30                    m27a      lda czei
 5134 T:4e95  a4 31                              ldy czei+1
 5135 T:4e97  4c 69 2b                           jmp pformat

 5137 T:4e9a                                     .end 

 5145 T:4e9a                                    ;WP3 2.4 .S17 ==0801==

 5147 T:4e9a                           sortinit  
 5148 T:4e9a  20 f0 4e                 mpm51     jsr hk1clr
 5149 T:4e9d  a9 2b                              lda #"+"
 5150 T:4e9f  8d ee 5b                           sta hk11
 5151 T:4ea2  a9 00                              lda #0
 5152 T:4ea4  8d 91 40                           sta sofl
 5153 T:4ea7  60                                 rts 
 5154 T:4ea8  20 f0 4e                 mpm52     jsr hk1clr
 5155 T:4eab  a9 2b                              lda #"+"
 5156 T:4ead  8d fa 5b                           sta hk12
 5157 T:4eb0  a9 80                              lda #128
 5158 T:4eb2  8d 91 40                           sta sofl
 5159 T:4eb5  a9 00                              lda #0
 5160 T:4eb7  8d 92 40                           sta sonk
 5161 T:4eba  60                                 rts 
 5162 T:4ebb  20 f0 4e                 mpm53     jsr hk1clr
 5163 T:4ebe  a9 2b                              lda #"+"
 5164 T:4ec0  8d 06 5c                           sta hk13
 5165 T:4ec3  a9 80                              lda #128
 5166 T:4ec5  8d 91 40                           sta sofl
 5167 T:4ec8  a9 01                              lda #1
 5168 T:4eca  8d 92 40                           sta sonk
 5169 T:4ecd  a9 00                              lda #0
 5170 T:4ecf  60                                 rts 
 5171 T:4ed0  20 f0 4e                 mpm54     jsr hk1clr
 5172 T:4ed3  a9 2b                              lda #"+"
 5173 T:4ed5  8d 12 5c                           sta hk14
 5174 T:4ed8  a9 e0                              lda #128+64+32
 5175 T:4eda  8d 91 40                           sta sofl
 5176 T:4edd  a9 02                              lda #2
 5177 T:4edf  8d 92 40                           sta sonk
 5178 T:4ee2  a9 00                              lda #0
 5179 T:4ee4  60                                 rts 
 5180 T:4ee5  ad 91 40                 mpm55     lda sofl
 5181 T:4ee8  49 20                              eor #32
 5182 T:4eea  8d 91 40                           sta sofl
 5183 T:4eed  a9 00                              lda #0
 5184 T:4eef  60                                 rts 
 5185 T:4ef0  a9 20                    hk1clr    lda #" "
 5186 T:4ef2  8d ee 5b                           sta hk11
 5187 T:4ef5  8d fa 5b                           sta hk12
 5188 T:4ef8  8d 06 5c                           sta hk13
 5189 T:4efb  8d 12 5c                           sta hk14
 5190 T:4efe  60                                 rts 
 5191 T:4eff                                    ;********
 5192 T:4eff  8e 93 40                 sort      stx sofirst
 5193 T:4f02  8c 94 40                           sty solast
 5194 T:4f05  cc 93 40                           cpy sofirst
 5195 T:4f08  f0 28                              beq sortr
 5196 T:4f0a  8d 41 40                           sta int1
 5197 T:4f0d  ad 92 40                           lda sonk
 5198 T:4f10  0a                                 asl 
 5199 T:4f11  0a                                 asl 
 5200 T:4f12  0d 41 40                           ora int1
 5201 T:4f15  aa                                 tax 
 5202 T:4f16  bd b1 62                           lda soname,x
 5203 T:4f19  8d 96 40                           sta sokrit
 5204 T:4f1c  e8                                 inx 
 5205 T:4f1d  e8                                 inx 
 5206 T:4f1e  bd b1 62                           lda soname,x
 5207 T:4f21  8d 97 40                           sta sokend
 5208 T:4f24  ae 41 40                           ldx int1
 5209 T:4f27  bd bd 62                           lda sollen,x
 5210 T:4f2a  8d 98 40                           sta soelen
 5211 T:4f2d  2c 91 40                           bit sofl
 5212 T:4f30  30 03                              bmi sort1
 5213 T:4f32  a9 00                    sortr     lda #0
 5214 T:4f34  60                                 rts 
 5215 T:4f35  ad 98 40                 sort1     lda soelen
 5216 T:4f38  8d 41 40                           sta int1
 5217 T:4f3b  a2 00                              ldx #0
 5218 T:4f3d  8e 42 40                           stx int1+1
 5219 T:4f40  ad 93 40                           lda sofirst
 5220 T:4f43  20 6f 49                           jsr mult
 5221 T:4f46  18                                 clc 
 5222 T:4f47  69 be                              adc #<liste
 5223 T:4f49  8d 99 40                           sta sofadr
 5224 T:4f4c  8a                                 txa 
 5225 T:4f4d  69 42                              adc #>liste
 5226 T:4f4f  8d 9a 40                           sta sofadr+1
 5227 T:4f52  ad 91 40                 sortloop  lda sofl
 5228 T:4f55  29 fe                              and #$ff-1
 5229 T:4f57  8d 91 40                           sta sofl
 5230 T:4f5a  ad 99 40                           lda sofadr
 5231 T:4f5d  85 0e                              sta lzei
 5232 T:4f5f  ad 9a 40                           lda sofadr+1
 5233 T:4f62  85 0f                              sta lzei+1
 5234 T:4f64  ad 93 40                           lda sofirst
 5235 T:4f67  8d 95 40                           sta socount
 5236 T:4f6a  a5 0e                    soloop    lda lzei
 5237 T:4f6c  18                                 clc 
 5238 T:4f6d  6d 98 40                           adc soelen
 5239 T:4f70  85 10                              sta lmzei
 5240 T:4f72  a5 0f                              lda lzei+1
 5241 T:4f74  69 00                              adc #0
 5242 T:4f76  85 11                              sta lmzei+1
 5243 T:4f78  2c 91 40                           bit sofl
 5244 T:4f7b  70 13                              bvs solow
 5245 T:4f7d  ac 96 40                           ldy sokrit
 5246 T:4f80  b1 0e                    sol1      lda (lzei),y
 5247 T:4f82  d1 10                              cmp (lmzei),y
 5248 T:4f84  90 1b                              bcc solkm
 5249 T:4f86  d0 22                              bne solgm
 5250 T:4f88  c8                                 iny 
 5251 T:4f89  cc 97 40                           cpy sokend
 5252 T:4f8c  d0 f2                              bne sol1
 5253 T:4f8e  f0 3b                              beq solmg
 5254 T:4f90  ac 97 40                 solow     ldy sokend
 5255 T:4f93  cc 96 40                 sol2      cpy sokrit
 5256 T:4f96  f0 33                              beq solmg
 5257 T:4f98  88                                 dey 
 5258 T:4f99  b1 0e                              lda (lzei),y
 5259 T:4f9b  d1 10                              cmp (lmzei),y
 5260 T:4f9d  f0 f4                              beq sol2
 5261 T:4f9f  b0 09                              bcs solgm
 5262 T:4fa1  ad 91 40                 solkm     lda sofl
 5263 T:4fa4  29 20                              and #32
 5264 T:4fa6  f0 23                              beq solmg
 5265 T:4fa8  d0 07                              bne sochange
 5266 T:4faa  ad 91 40                 solgm     lda sofl
 5267 T:4fad  29 20                              and #32
 5268 T:4faf  d0 1a                              bne solmg
 5269 T:4fb1  a0 00                    sochange  ldy #0
 5270 T:4fb3                           soc1      
 5271 T:4fb3  b1 0e                              lda (lzei),y
 5272 T:4fb5  aa                                 tax 
 5273 T:4fb6  b1 10                              lda (lmzei),y
 5274 T:4fb8  91 0e                              sta (lzei),y
 5275 T:4fba  8a                                 txa 
 5276 T:4fbb  91 10                              sta (lmzei),y
 5277 T:4fbd  c8                                 iny 
 5278 T:4fbe  cc 98 40                           cpy soelen
 5279 T:4fc1  d0 f0                              bne soc1
 5280 T:4fc3  ad 91 40                           lda sofl
 5281 T:4fc6  09 01                              ora #1
 5282 T:4fc8  8d 91 40                           sta sofl
 5283 T:4fcb  a5 10                    solmg     lda lmzei
 5284 T:4fcd  85 0e                              sta lzei
 5285 T:4fcf  a5 11                              lda lmzei+1
 5286 T:4fd1  85 0f                              sta lzei+1
 5287 T:4fd3  ee 95 40                           inc socount
 5288 T:4fd6  ad 95 40                           lda socount
 5289 T:4fd9  cd 94 40                           cmp solast
 5290 T:4fdc  d0 8c                              bne soloop
 5291 T:4fde  ad 91 40                           lda sofl
 5292 T:4fe1  29 01                              and #1
 5293 T:4fe3  f0 03                              beq sortrr
 5294 T:4fe5  4c 52 4f                           jmp sortloop
 5295 T:4fe8  a5 0e                    sortrr    lda lzei
 5296 T:4fea  18                                 clc 
 5297 T:4feb  6d 98 40                           adc soelen
 5298 T:4fee  85 0e                              sta lzei
 5299 T:4ff0  90 02                              bcc sortr1
 5300 T:4ff2  e6 0f                              inc lzei+1
 5301 T:4ff4  a9 00                    sortr1    lda #0
 5302 T:4ff6  60                                 rts 
 5303 T:4ff7                                    ;********
 5304 T:4ff7  20 25 50                 mpm45     jsr hk2clr
 5305 T:4ffa  a9 2b                              lda #"+"
 5306 T:4ffc  8d 1f 5d                           sta hk21
 5307 T:4fff  a9 80                              lda #128
 5308 T:5001  8d 90 40                           sta cvfl
 5309 T:5004  a9 00                              lda #0
 5310 T:5006  60                                 rts 
 5311 T:5007  20 25 50                 mpm46     jsr hk2clr
 5312 T:500a  a9 2b                              lda #"+"
 5313 T:500c  8d 2c 5d                           sta hk22
 5314 T:500f  a9 40                              lda #64
 5315 T:5011  8d 90 40                           sta cvfl
 5316 T:5014  a9 00                              lda #0
 5317 T:5016  60                                 rts 
 5318 T:5017                           convinit  
 5319 T:5017  20 25 50                 mpm47     jsr hk2clr
 5320 T:501a  a9 2b                              lda #"+"
 5321 T:501c  8d 39 5d                           sta hk23
 5322 T:501f  a9 00                              lda #0
 5323 T:5021  8d 90 40                           sta cvfl
 5324 T:5024  60                                 rts 
 5325 T:5025  a9 20                    hk2clr    lda #" "
 5326 T:5027  8d 1f 5d                           sta hk21
 5327 T:502a  8d 2c 5d                           sta hk22
 5328 T:502d  8d 39 5d                           sta hk23
 5329 T:5030  60                                 rts 
 5330 T:5031  ac 90 40                 conv      ldy cvfl
 5331 T:5034  d0 01                              bne conv1
 5332 T:5036  60                                 rts 
 5333 T:5037                           conv1     
 5334 T:5037  8d 41 40                           sta int1
 5335 T:503a  8e 42 40                           stx int1+1
 5336 T:503d  8d 43 40                           sta int2
 5337 T:5040  8e 44 40                           stx int2+1
 5338 T:5043  a9 00                              lda #<buffer
 5339 T:5045  85 2e                              sta rwbzei
 5340 T:5047  a9 6c                              lda #>buffer
 5341 T:5049  85 2f                              sta rwbzei+1
 5342 T:504b  a0 00                              ldy #0
 5343 T:504d  b1 2e                    cv2       lda (rwbzei),y
 5344 T:504f  20 73 50                           jsr bytconv
 5345 T:5052  91 2e                              sta (rwbzei),y
 5346 T:5054  c8                                 iny 
 5347 T:5055  d0 02                              bne cv3
 5348 T:5057  e6 2f                              inc rwbzei+1
 5349 T:5059                           cv3       
 5350 T:5059  ad 41 40                           lda int1
 5351 T:505c  d0 03                              bne cv4
 5352 T:505e  ce 42 40                           dec int1+1
 5353 T:5061  ce 41 40                 cv4       dec int1
 5354 T:5064  ad 41 40                           lda int1
 5355 T:5067  0d 42 40                           ora int1+1
 5356 T:506a  d0 e1                              bne cv2
 5357 T:506c  ad 43 40                           lda int2
 5358 T:506f  ae 44 40                           ldx int2+1
 5359 T:5072  60                                 rts 
 5360 T:5073  ae 90 40                 bytconv   ldx cvfl
 5361 T:5076  e0 80                              cpx #128
 5362 T:5078  d0 16                              bne bcbmasc

 5364 T:507a  c9 41                    basccbm   cmp #65
 5365 T:507c  90 0e                              bcc bcvr
 5366 T:507e  c9 5b                              cmp #91
 5367 T:5080  90 0b                              bcc bcvo
 5368 T:5082  c9 61                              cmp #97
 5369 T:5084  90 06                              bcc bcvr
 5370 T:5086  c9 7b                              cmp #123
 5371 T:5088  b0 02                              bcs bcvr
 5372 T:508a  49 20                    bcvx      eor #$20
 5373 T:508c  60                       bcvr      rts 
 5374 T:508d  09 80                    bcvo      ora #$80
 5375 T:508f  60                                 rts 
 5376 T:5090                           bcbmasc   
 5377 T:5090  c9 41                              cmp #65
 5378 T:5092  90 f8                              bcc bcvr
 5379 T:5094  c9 5b                              cmp #91
 5380 T:5096  90 f2                              bcc bcvx
 5381 T:5098  c9 61                              cmp #97
 5382 T:509a  90 f0                              bcc bcvr
 5383 T:509c  c9 7b                              cmp #123
 5384 T:509e  90 ea                              bcc bcvx
 5385 T:50a0  c9 c1                              cmp #128+65
 5386 T:50a2  90 e8                              bcc bcvr
 5387 T:50a4  c9 db                              cmp #128+91
 5388 T:50a6  b0 e4                              bcs bcvr
 5389 T:50a8  29 7f                              and #$7f
 5390 T:50aa  60                                 rts 

 5392 T:50ab                                    ;********
 5393 T:50ab  a9 20                    hkcclr    lda #" "
 5394 T:50ad  8d 7e 5d                           sta hk51
 5395 T:50b0  8d 8b 5d                           sta hk52
 5396 T:50b3  8d 98 5d                           sta hk53
 5397 T:50b6  60                                 rts 
 5398 T:50b7  a9 20                    hkpclr    lda #" "
 5399 T:50b9  8d 57 5d                           sta hk56
 5400 T:50bc  8d 57 5d                           sta hk57
 5401 T:50bf  8d 64 5d                           sta hk58
 5402 T:50c2  60                                 rts 
 5403 T:50c3                                    ;****
 5404 T:50c3  20 82 51                 mprtinit  jsr mprtoff
 5405 T:50c6  20 ab 50                 mpout     jsr hkcclr
 5406 T:50c9  20 b7 50                           jsr hkpclr
 5407 T:50cc  ad 35 40                           lda prtfl
 5408 T:50cf  29 03                              and #3
 5409 T:50d1  a2 2b                              ldx #"+"
 5410 T:50d3  a8                                 tay 
 5411 T:50d4  d0 05                              bne mpi1
 5412 T:50d6  8e 7e 5d                           stx hk51
 5413 T:50d9  f0 0e                              beq mpi4
 5414 T:50db  88                       mpi1      dey 
 5415 T:50dc  d0 05                              bne mpi2
 5416 T:50de  8e 98 5d                           stx hk53
 5417 T:50e1  f0 06                              beq mpi4
 5418 T:50e3  88                       mpi2      dey 
 5419 T:50e4  d0 03                              bne mpi4
 5420 T:50e6  8e 8b 5d                           stx hk52
 5421 T:50e9  a9 20                    mpi4      lda #" "
 5422 T:50eb  8d b2 5d                           sta hk54
 5423 T:50ee  8d bf 5d                           sta hk55
 5424 T:50f1  ad 35 40                           lda prtfl
 5425 T:50f4  29 08                              and #%00001000
 5426 T:50f6  f0 03                              beq mpi5
 5427 T:50f8  8e b2 5d                           stx hk54
 5428 T:50fb  ad 35 40                 mpi5      lda prtfl
 5429 T:50fe  29 20                              and #%00100000
 5430 T:5100  f0 03                              beq mpi6
 5431 T:5102  8e bf 5d                           stx hk55
 5432 T:5105  ad 34 40                 mpi6      lda prtdev
 5433 T:5108  29 3f                              and #63
 5434 T:510a  38                                 sec 
 5435 T:510b  e9 02                              sbc #2
 5436 T:510d  a8                                 tay 
 5437 T:510e  d0 05                              bne mpi7
 5438 T:5110  8e 57 5d                           stx hk56
 5439 T:5113  f0 0e                              beq mpi9
 5440 T:5115  88                       mpi7      dey 
 5441 T:5116  d0 05                              bne mpi8
 5442 T:5118  8e 57 5d                           stx hk57
 5443 T:511b  f0 06                              beq mpi9
 5444 T:511d  88                       mpi8      dey 
 5445 T:511e  d0 03                              bne mpi9
 5446 T:5120  8e 64 5d                           stx hk58
 5447 T:5123  a9 00                    mpi9      lda #0
 5448 T:5125  60                                 rts 
 5449 T:5126                                    ;****
 5450 T:5126  ad 35 40                 mppnokon  lda prtfl
 5451 T:5129  29 fc                              and #255-3
 5452 T:512b  8d 35 40                           sta prtfl
 5453 T:512e  4c c6 50                           jmp mpout
 5454 T:5131  ad 35 40                 mppacbm   lda prtfl
 5455 T:5134  29 fc                              and #255-3
 5456 T:5136  09 02                              ora #2
 5457 T:5138  8d 35 40                           sta prtfl
 5458 T:513b  4c c6 50                           jmp mpout
 5459 T:513e  ad 35 40                 mppcasc   lda prtfl
 5460 T:5141  29 fc                              and #255-3
 5461 T:5143  09 01                              ora #1
 5462 T:5145  8d 35 40                           sta prtfl
 5463 T:5148  4c c6 50                           jmp mpout
 5464 T:514b                                    ;****
 5465 T:514b  ad 35 40                 mppcr     lda prtfl
 5466 T:514e  49 08                              eor #8
 5467 T:5150  8d 35 40                           sta prtfl
 5468 T:5153  4c c6 50                           jmp mpout
 5469 T:5156  ad 35 40                 mpplf     lda prtfl
 5470 T:5159  49 20                              eor #32
 5471 T:515b  8d 35 40                           sta prtfl
 5472 T:515e  4c c6 50                           jmp mpout
 5473 T:5161                                    ;****
 5474 T:5161  a9 02                    mpp232    lda #2
 5475 T:5163  8d 34 40                           sta prtdev
 5476 T:5166  4c c6 50                           jmp mpout
 5477 T:5169  a9 03                    mppiec    lda #3
 5478 T:516b  8d 34 40                           sta prtdev
 5479 T:516e  4c c6 50                           jmp mpout
 5480 T:5171  a9 04                    mppcentr  lda #4
 5481 T:5173  8d 34 40                           sta prtdev
 5482 T:5176  4c c6 50                           jmp mpout
 5483 T:5179                                    ;****
 5484 T:5179  ad 35 40                 mprton    lda prtfl
 5485 T:517c  09 80                              ora #128
 5486 T:517e  8d 35 40                           sta prtfl
 5487 T:5181  60                                 rts 
 5488 T:5182  ad 35 40                 mprtoff   lda prtfl
 5489 T:5185  29 7f                              and #127
 5490 T:5187  8d 35 40                           sta prtfl
 5491 T:518a  60                                 rts 

 5493 T:518b                                     .end 

 5501 T:518b                                    ;WPW 2.1 .S64 ==0801==

 5503 T:518b                                    cursor=bcpos
 5504 T:518b                                    esc=27
 5505 T:518b                                    ;********
 5506 T:518b                                    manz=40
 5507 T:518b                                    mtab=41
 5508 T:518b                                    smanz=0
 5509 T:518b                                    sml=1
 5510 T:518b                                    smor=2
 5511 T:518b                                    smlr=3
 5512 T:518b                                    smtab=4
 5513 T:518b                                    ;********
 5514 T:518b  4c 0c 52                 wminit    jmp pminit
 5515 T:518e  4c 42 52                 wmenloop  jmp menuloop
 5516 T:5191  4c d0 51                 wopen     jmp pwopen
 5517 T:5194  4c f1 51                 wclose    jmp pwclose
 5518 T:5197  4c 8a a0                 wout      jmp bout
 5519 T:519a  4c 9c a0                 wcursor   jmp cursor
 5520 T:519d  4c 9f a0                 wgetkey   jmp bgkey
 5521 T:51a0  4c 1f 53                 wsubmenu  jmp submenu
 5522 T:51a3  4c c3 53                 wsmclose  jmp smclose
 5523 T:51a6  4c 65 53                 wsubloop  jmp smloop
 5524 T:51a9  4c 6d 53                 wexloop   jmp sml1a
 5525 T:51ac  4c 52 54                 wprntcmd  jmp ppcmd
 5526 T:51af  4c 4e 54                 wclrcmd   jmp pclrcmd
 5527 T:51b2  4c 77 54                 wprnterr  jmp pperr
 5528 T:51b5  4c 73 54                 wclrerr   jmp pclrerr
 5529 T:51b8  4c 86 54                 wopenmsg  jmp popmsg
 5530 T:51bb  4c 62 54                 wprnttxt  jmp pptxt
 5531 T:51be  4c a0 54                 winput    jmp pwinput
 5532 T:51c1  4c 90 a0                 wcuran    jmp bcan
 5533 T:51c4  4c 93 a0                 wcuraus   jmp bcaus
 5534 T:51c7  4c 8d a0                 wgetscr   jmp bin

 5536 T:51ca  4c 96 a0                 setbck    jmp bbcol
 5537 T:51cd  4c 99 a0                 settxt    jmp btcol

 5539 T:51d0                                    ;********
 5540 T:51d0  48                       pwopen    pha 
 5541 T:51d1  8a                                 txa 
 5542 T:51d2  48                                 pha 
 5543 T:51d3  20 07 52                           jsr wescout
 5544 T:51d6  a9 54                              lda #"T"
 5545 T:51d8  20 97 51                           jsr wout
 5546 T:51db  68                                 pla 
 5547 T:51dc  aa                                 tax 
 5548 T:51dd  68                                 pla 
 5549 T:51de  a8                                 tay 
 5550 T:51df  18                                 clc 
 5551 T:51e0  20 9a 51                           jsr wcursor
 5552 T:51e3  20 07 52                           jsr wescout
 5553 T:51e6  a9 42                              lda #"B"
 5554 T:51e8  20 97 51                           jsr wout
 5555 T:51eb  20 04 52                           jsr wclr
 5556 T:51ee  a9 00                              lda #0
 5557 T:51f0  60                                 rts 
 5558 T:51f1                                    ;********
 5559 T:51f1  20 04 52                 pwclose   jsr wclr
 5560 T:51f4  a9 13                              lda #19             ;"{home}"
 5561 T:51f6  20 97 51                           jsr wout
 5562 T:51f9  20 97 51                           jsr wout
 5563 T:51fc  a9 92                              lda #18+128       ;"{rvof}"
 5564 T:51fe  20 97 51                           jsr wout
 5565 T:5201  a9 00                              lda #0
 5566 T:5203  60                                 rts 
 5567 T:5204                                    ;********
 5568 T:5204  a9 93                    wclr      lda #19+128    ;"{clr}"
 5569 T:5206  2c                                 .byt $2c
 5570 T:5207  a9 1b                    wescout   lda #esc
 5571 T:5209  4c 97 51                           jmp wout
 5572 T:520c                                    ;********
 5573 T:520c  85 12                    pminit    sta wzei
 5574 T:520e  84 13                              sty wzei+1
 5575 T:5210  20 94 51                           jsr wclose
 5576 T:5213  20 04 52                           jsr wclr
 5577 T:5216  20 07 52                           jsr wescout
 5578 T:5219  a9 4f                              lda #"O"
 5579 T:521b  20 97 51                           jsr wout
 5580 T:521e  a2 01                              ldx #1
 5581 T:5220  a0 00                              ldy #0
 5582 T:5222  18                                 clc 
 5583 T:5223  20 9a 51                           jsr wcursor
 5584 T:5226  a9 12                              lda #18             ;"{rvon}"
 5585 T:5228  20 97 51                           jsr wout
 5586 T:522b  a0 00                              ldy #0
 5587 T:522d  b1 12                    pmi1      lda (wzei),y
 5588 T:522f  20 97 51                           jsr wout
 5589 T:5232  c8                                 iny 
 5590 T:5233  c0 28                              cpy #40
 5591 T:5235  d0 f6                              bne pmi1
 5592 T:5237  a9 92                              lda #18+128       ;"{rvof}"
 5593 T:5239  20 97 51                           jsr wout
 5594 T:523c  a9 00                              lda #0
 5595 T:523e  8d 71 40                           sta wmenu
 5596 T:5241  60                                 rts 
 5597 T:5242  20 e2 52                 menuloop  jsr mnorm
 5598 T:5245  20 9d 51                 mnl1      jsr wgetkey
 5599 T:5248  f0 fb                              beq mnl1
 5600 T:524a  a0 03                    mnl1a     ldy #menk-1
 5601 T:524c  d9 a1 5e                 mnl2      cmp menkey,y
 5602 T:524f  f0 06                              beq mnl3
 5603 T:5251  88                                 dey 
 5604 T:5252  10 f8                              bpl mnl2
 5605 T:5254  4c 42 52                           jmp menuloop
 5606 T:5257  98                       mnl3      tya 
 5607 T:5258  0a                                 asl 
 5608 T:5259  aa                                 tax 
 5609 T:525a  20 67 52                           jsr mnl4
 5610 T:525d  90 e3                              bcc menuloop
 5611 T:525f  c9 0d                              cmp #13
 5612 T:5261  d0 e7                              bne mnl1a
 5613 T:5263  ae 71 40                           ldx wmenu
 5614 T:5266  60                                 rts 
 5615 T:5267  bd a6 5e                 mnl4      lda menka+1,x
 5616 T:526a  48                                 pha 
 5617 T:526b  bd a5 5e                           lda menka,x
 5618 T:526e  48                                 pha 
 5619 T:526f  60                                 rts 
 5620 T:5270                                    ;****
 5621 T:5270  20 df 52                 menext    jsr mrevers
 5622 T:5273  ee 71 40                           inc wmenu
 5623 T:5276  a0 28                              ldy #manz
 5624 T:5278  b1 12                              lda (wzei),y
 5625 T:527a  cd 71 40                           cmp wmenu
 5626 T:527d  d0 05                              bne mener
 5627 T:527f  a9 00                              lda #0
 5628 T:5281  8d 71 40                           sta wmenu
 5629 T:5284  18                       mener     clc 
 5630 T:5285  60                                 rts 
 5631 T:5286  20 df 52                 mevor     jsr mrevers
 5632 T:5289  ad 71 40                           lda wmenu
 5633 T:528c  f0 05                              beq mev1
 5634 T:528e  ce 71 40                           dec wmenu
 5635 T:5291  18                                 clc 
 5636 T:5292  60                                 rts 
 5637 T:5293  a0 28                    mev1      ldy #manz
 5638 T:5295  b1 12                              lda (wzei),y
 5639 T:5297  8d 71 40                           sta wmenu
 5640 T:529a  ce 71 40                           dec wmenu
 5641 T:529d  18                       merr      clc 
 5642 T:529e  60                                 rts 
 5643 T:529f  20 df 52                 meret     jsr mrevers
 5644 T:52a2  ad 71 40                           lda wmenu
 5645 T:52a5  20 d8 52                           jsr mtadr
 5646 T:52a8  c8                                 iny 
 5647 T:52a9  b1 12                              lda (wzei),y
 5648 T:52ab  29 40                              and #64
 5649 T:52ad  f0 ee                              beq merr
 5650 T:52af  a9 0d                              lda #13
 5651 T:52b1  a0 00                              ldy #0
 5652 T:52b3  38                                 sec 
 5653 T:52b4  60                                 rts 
 5654 T:52b5  ad 71 40                 mesub     lda wmenu
 5655 T:52b8  20 d8 52                           jsr mtadr
 5656 T:52bb  c8                                 iny 
 5657 T:52bc  b1 12                              lda (wzei),y
 5658 T:52be  10 dd                              bpl merr
 5659 T:52c0  c8                                 iny 
 5660 T:52c1  b1 12                              lda (wzei),y
 5661 T:52c3  48                                 pha 
 5662 T:52c4  c8                                 iny 
 5663 T:52c5  b1 12                              lda (wzei),y
 5664 T:52c7  a8                                 tay 
 5665 T:52c8  68                                 pla 
 5666 T:52c9  a2 00                              ldx #0
 5667 T:52cb  20 a0 51                           jsr wsubmenu
 5668 T:52ce  20 a6 51                 mesub1    jsr wsubloop
 5669 T:52d1  c9 11                    mesub2    cmp #17          ;"{down}"
 5670 T:52d3  f0 f9                              beq mesub1
 5671 T:52d5  4c a3 51                           jmp wsmclose
 5672 T:52d8                                    ;********
 5673 T:52d8  0a                       mtadr     asl 
 5674 T:52d9  0a                                 asl 
 5675 T:52da  18                                 clc 
 5676 T:52db  69 29                              adc #mtab
 5677 T:52dd  a8                                 tay 
 5678 T:52de  60                                 rts 
 5679 T:52df  a9 12                    mrevers   lda #18          ;"{rvon}"
 5680 T:52e1  2c                                 .byt $2c
 5681 T:52e2  a9 92                    mnorm     lda #18+128    ;"{rvof}"
 5682 T:52e4  20 97 51                           jsr wout
 5683 T:52e7  ad 71 40                           lda wmenu
 5684 T:52ea  f0 0a                              beq mno1
 5685 T:52ec  38                                 sec 
 5686 T:52ed  e9 01                              sbc #1
 5687 T:52ef  20 d8 52                           jsr mtadr
 5688 T:52f2  b1 12                              lda (wzei),y
 5689 T:52f4  a8                                 tay 
 5690 T:52f5  2c                                 .byt $2c
 5691 T:52f6  a0 00                    mno1      ldy #0
 5692 T:52f8  8c 72 40                           sty wza
 5693 T:52fb  a2 01                              ldx #1
 5694 T:52fd  18                                 clc 
 5695 T:52fe  20 9a 51                           jsr wcursor
 5696 T:5301  ad 71 40                           lda wmenu
 5697 T:5304  20 d8 52                           jsr mtadr
 5698 T:5307  b1 12                              lda (wzei),y
 5699 T:5309  ac 72 40                           ldy wza
 5700 T:530c  8d 72 40                           sta wza
 5701 T:530f  b1 12                    mno2      lda (wzei),y
 5702 T:5311  20 97 51                           jsr wout
 5703 T:5314  c8                                 iny 
 5704 T:5315  cc 72 40                           cpy wza
 5705 T:5318  d0 f5                              bne mno2
 5706 T:531a  a9 92                              lda #18+128       ;"{rvof}"
 5707 T:531c  4c 97 51                           jmp wout
 5708 T:531f                                    ;****************
 5709 T:531f  85 1c                    submenu   sta wszei
 5710 T:5321  84 1d                              sty wszei+1
 5711 T:5323  8e 75 40                           stx smf
 5712 T:5326  e0 80                              cpx #128
 5713 T:5328  b0 19                              bcs subm1
 5714 T:532a  a0 02                              ldy #smor
 5715 T:532c  b1 1c                              lda (wszei),y
 5716 T:532e  aa                                 tax 
 5717 T:532f  c8                                 iny 
 5718 T:5330  b1 1c                              lda (wszei),y
 5719 T:5332  a8                                 tay 
 5720 T:5333  18                                 clc 
 5721 T:5334  20 9a 51                           jsr wcursor
 5722 T:5337  a0 00                              ldy #smanz
 5723 T:5339  b1 1c                              lda (wszei),y
 5724 T:533b  aa                                 tax 
 5725 T:533c  ca                                 dex 
 5726 T:533d  c8                                 iny 
 5727 T:533e  b1 1c                              lda (wszei),y
 5728 T:5340  20 91 51                           jsr wopen
 5729 T:5343  a9 00                    subm1     lda #0
 5730 T:5345  8d 74 40                           sta wsmenu
 5731 T:5348  20 04 52                           jsr wclr
 5732 T:534b  2c 75 40                           bit smf
 5733 T:534e  70 14                              bvs smi11
 5734 T:5350  20 ff 53                 smi1      jsr smrevers
 5735 T:5353  ee 74 40                           inc wsmenu
 5736 T:5356  a0 00                              ldy #smanz
 5737 T:5358  b1 1c                              lda (wszei),y
 5738 T:535a  cd 74 40                           cmp wsmenu
 5739 T:535d  d0 f1                              bne smi1
 5740 T:535f  a9 00                              lda #0
 5741 T:5361  8d 74 40                           sta wsmenu
 5742 T:5364  60                       smi11     rts 
 5743 T:5365  20 02 54                 smloop    jsr smnorm
 5744 T:5368  20 9d 51                 sml1      jsr wgetkey
 5745 T:536b  f0 fb                              beq sml1
 5746 T:536d  a0 04                    sml1a     ldy #smka-1
 5747 T:536f  d9 ad 5e                 sml2      cmp smkey,y
 5748 T:5372  f0 05                              beq sml3
 5749 T:5374  88                                 dey 
 5750 T:5375  10 f8                              bpl sml2
 5751 T:5377  30 08                              bmi smend
 5752 T:5379  98                       sml3      tya 
 5753 T:537a  0a                                 asl 
 5754 T:537b  aa                                 tax 
 5755 T:537c  20 86 53                           jsr sml4
 5756 T:537f  90 e4                              bcc smloop
 5757 T:5381  38                       smend     sec 
 5758 T:5382  ac 74 40                           ldy wsmenu
 5759 T:5385  60                                 rts 
 5760 T:5386  bd b3 5e                 sml4      lda smadr+1,x
 5761 T:5389  48                                 pha 
 5762 T:538a  bd b2 5e                           lda smadr,x
 5763 T:538d  48                                 pha 
 5764 T:538e  60                                 rts 
 5765 T:538f                                    ;****
 5766 T:538f  a9 1d                    smnext    lda #29          ;"{rght}"
 5767 T:5391  4c 81 53                           jmp smend
 5768 T:5394  a9 9d                    smvor     lda #29+128    ;"{left}"
 5769 T:5396  4c 81 53                           jmp smend
 5770 T:5399  20 ff 53                 smdown    jsr smrevers
 5771 T:539c  a0 00                              ldy #smanz
 5772 T:539e  b1 1c                              lda (wszei),y
 5773 T:53a0  38                                 sec 
 5774 T:53a1  e9 01                              sbc #1
 5775 T:53a3  cd 74 40                           cmp wsmenu
 5776 T:53a6  f0 05                              beq smd1
 5777 T:53a8  ee 74 40                           inc wsmenu
 5778 T:53ab  18                                 clc 
 5779 T:53ac  60                                 rts 
 5780 T:53ad  a9 11                    smd1      lda #17          ;"{down}"
 5781 T:53af  38                                 sec 
 5782 T:53b0  60                                 rts 
 5783 T:53b1  20 ff 53                 smup      jsr smrevers
 5784 T:53b4  ad 74 40                           lda wsmenu
 5785 T:53b7  f0 05                              beq smu1
 5786 T:53b9  ce 74 40                           dec wsmenu
 5787 T:53bc  18                                 clc 
 5788 T:53bd  60                                 rts 
 5789 T:53be  a9 91                    smu1      lda #17+128    ;"{up}"
 5790 T:53c0  4c 81 53                           jmp smend
 5791 T:53c3  48                       smclose   pha 
 5792 T:53c4  20 94 51                           jsr wclose
 5793 T:53c7  68                                 pla 
 5794 T:53c8  38                                 sec 
 5795 T:53c9  60                                 rts 
 5796 T:53ca  20 d9 53                 smret     jsr smtadr
 5797 T:53cd  a0 00                              ldy #0
 5798 T:53cf  b1 10                              lda (lmzei),y
 5799 T:53d1  10 04                              bpl smrr
 5800 T:53d3  a9 0d                              lda #13
 5801 T:53d5  d0 aa                              bne smend
 5802 T:53d7  18                       smrr      clc 
 5803 T:53d8  60                                 rts 
 5804 T:53d9                                    ;****
 5805 T:53d9  a0 01                    smtadr    ldy #sml
 5806 T:53db  b1 1c                              lda (wszei),y
 5807 T:53dd  18                                 clc 
 5808 T:53de  69 01                              adc #1
 5809 T:53e0  8d 41 40                           sta int1
 5810 T:53e3  a2 00                              ldx #0
 5811 T:53e5  8e 42 40                           stx int1+1
 5812 T:53e8  ad 74 40                           lda wsmenu
 5813 T:53eb  20 6f 49                           jsr mult
 5814 T:53ee  18                                 clc 
 5815 T:53ef  69 04                              adc #smtab
 5816 T:53f1  90 01                              bcc sma1
 5817 T:53f3  e8                                 inx 
 5818 T:53f4  18                       sma1      clc 
 5819 T:53f5  65 1c                              adc wszei
 5820 T:53f7  85 10                              sta lmzei
 5821 T:53f9  8a                                 txa 
 5822 T:53fa  65 1d                              adc wszei+1
 5823 T:53fc  85 11                              sta lmzei+1
 5824 T:53fe  60                                 rts 
 5825 T:53ff                                    ;****
 5826 T:53ff  a9 12                    smrevers  lda #18          ;"{rvon}"
 5827 T:5401  2c                                 .byt $2c
 5828 T:5402  a9 92                    smnorm    lda #18+128    ;"{rvof}"
 5829 T:5404  48                                 pha 
 5830 T:5405  ae 74 40                           ldx wsmenu
 5831 T:5408  a0 00                              ldy #0
 5832 T:540a  18                                 clc 
 5833 T:540b  20 9a 51                           jsr wcursor
 5834 T:540e  a0 01                              ldy #sml
 5835 T:5410  b1 1c                              lda (wszei),y
 5836 T:5412  8d 73 40                           sta sma
 5837 T:5415  20 d9 53                           jsr smtadr
 5838 T:5418  a0 01                              ldy #1
 5839 T:541a  68                                 pla 
 5840 T:541b  20 97 51                           jsr wout
 5841 T:541e  c9 92                              cmp #18+128       ;"{rvof}"
 5842 T:5420  d0 07                              bne smrv1
 5843 T:5422  ad 75 40                           lda smf
 5844 T:5425  29 20                              and #32
 5845 T:5427  d0 0c                              bne smn1
 5846 T:5429  b1 10                    smrv1     lda (lmzei),y
 5847 T:542b  20 97 51                           jsr wout
 5848 T:542e  c8                                 iny 
 5849 T:542f  ce 73 40                           dec sma
 5850 T:5432  d0 f5                              bne smrv1
 5851 T:5434  60                                 rts 
 5852 T:5435  a9 12                    smn1      lda #18          ;"{rvon}"
 5853 T:5437  20 97 51                           jsr wout
 5854 T:543a  a9 28                              lda #"("
 5855 T:543c  20 97 51                           jsr wout
 5856 T:543f  c8                                 iny 
 5857 T:5440  ce 73 40                           dec sma
 5858 T:5443  ce 73 40                           dec sma
 5859 T:5446  20 29 54                           jsr smrv1
 5860 T:5449  a9 29                              lda #")"
 5861 T:544b  4c 97 51                           jmp wout
 5862 T:544e                                    ;********
 5863 T:544e  a9 bc                    pclrcmd   lda #<leerzei
 5864 T:5450  a0 5e                              ldy #>leerzei
 5865 T:5452  85 22                    ppcmd     sta wczei
 5866 T:5454  84 23                              sty wczei+1
 5867 T:5456  a0 00                              ldy #0
 5868 T:5458  a2 00                              ldx #0
 5869 T:545a  18                                 clc 
 5870 T:545b  20 9a 51                           jsr wcursor
 5871 T:545e  a5 22                    ppe1      lda wczei
 5872 T:5460  a4 23                              ldy wczei+1
 5873 T:5462  85 22                    pptxt     sta wczei
 5874 T:5464  84 23                              sty wczei+1
 5875 T:5466  a0 00                              ldy #0
 5876 T:5468  b1 22                    ppc1      lda (wczei),y
 5877 T:546a  f0 06                              beq ppc2
 5878 T:546c  20 97 51                           jsr wout
 5879 T:546f  c8                                 iny 
 5880 T:5470  d0 f6                              bne ppc1
 5881 T:5472  60                       ppc2      rts 
 5882 T:5473                                    ;****
 5883 T:5473  a9 bc                    pclrerr   lda #<leerzei
 5884 T:5475  a0 5e                              ldy #>leerzei
 5885 T:5477  85 22                    pperr     sta wczei
 5886 T:5479  84 23                              sty wczei+1
 5887 T:547b  a0 00                              ldy #0
 5888 T:547d  a2 18                              ldx #24
 5889 T:547f  18                                 clc 
 5890 T:5480  20 9a 51                           jsr wcursor
 5891 T:5483  4c 5e 54                           jmp ppe1
 5892 T:5486                                    ;********
 5893 T:5486  85 22                    popmsg    sta wczei
 5894 T:5488  84 23                              sty wczei+1
 5895 T:548a  a2 08                              ldx #8
 5896 T:548c  a0 08                              ldy #8
 5897 T:548e  18                                 clc 
 5898 T:548f  20 9a 51                           jsr wcursor
 5899 T:5492  a9 17                              lda #23
 5900 T:5494  a2 07                              ldx #7
 5901 T:5496  20 91 51                           jsr wopen
 5902 T:5499  a5 22                              lda wczei
 5903 T:549b  a4 23                              ldy wczei+1
 5904 T:549d  4c 62 54                           jmp pptxt
 5905 T:54a0                                    ;********
 5906 T:54a0  85 22                    pwinput   sta wczei
 5907 T:54a2  84 23                              sty wczei+1
 5908 T:54a4  a2 0f                              ldx #15
 5909 T:54a6  a0 00                              ldy #0
 5910 T:54a8  18                                 clc 
 5911 T:54a9  20 9a 51                           jsr wcursor
 5912 T:54ac  a5 22                              lda wczei
 5913 T:54ae  a4 23                              ldy wczei+1
 5914 T:54b0  20 bb 51                           jsr wprnttxt
 5915 T:54b3  38                                 sec 
 5916 T:54b4  20 9a 51                           jsr wcursor
 5917 T:54b7  8c 72 40                           sty wza
 5918 T:54ba  a9 27                              lda #39
 5919 T:54bc  38                                 sec 
 5920 T:54bd  ed 72 40                           sbc wza
 5921 T:54c0  8d 72 40                           sta wza
 5922 T:54c3  38                                 sec 
 5923 T:54c4  e9 01                              sbc #1
 5924 T:54c6  a2 00                              ldx #0
 5925 T:54c8  20 91 51                           jsr wopen
 5926 T:54cb  20 c1 51                 winloop   jsr wcuran
 5927 T:54ce  20 9d 51                 winl      jsr wgetkey
 5928 T:54d1  f0 fb                              beq winl
 5929 T:54d3  48                                 pha 
 5930 T:54d4  20 c4 51                           jsr wcuraus
 5931 T:54d7  68                                 pla 
 5932 T:54d8  c9 03                              cmp #3
 5933 T:54da  f0 2b                              beq wil2
 5934 T:54dc  aa                                 tax 
 5935 T:54dd  29 7f                              and #127
 5936 T:54df  c9 20                              cmp #32
 5937 T:54e1  b0 0d                              bcs winl1
 5938 T:54e3  a0 09                              ldy #inpanz-1
 5939 T:54e5  8a                                 txa 
 5940 T:54e6  d9 e4 5e                 winl2     cmp inpok,y
 5941 T:54e9  f0 05                              beq winl1
 5942 T:54eb  88                                 dey 
 5943 T:54ec  10 f8                              bpl winl2
 5944 T:54ee  30 db                              bmi winloop
 5945 T:54f0  8a                       winl1     txa 
 5946 T:54f1  c9 13                              cmp #19             ;"{home}"
 5947 T:54f3  d0 05                              bne wil1
 5948 T:54f5  cd 41 40                           cmp int1
 5949 T:54f8  f0 d1                              beq winloop
 5950 T:54fa  c9 0d                    wil1      cmp #13
 5951 T:54fc  f0 09                              beq wil2
 5952 T:54fe  8d 41 40                           sta int1
 5953 T:5501  20 97 51                           jsr wout
 5954 T:5504  4c cb 54                           jmp winloop
 5955 T:5507  8d 73 40                 wil2      sta sma
 5956 T:550a  a9 13                              lda #19             ;"{home}"
 5957 T:550c  cd 41 40                           cmp int1
 5958 T:550f  f0 03                              beq wil3
 5959 T:5511  20 97 51                           jsr wout
 5960 T:5514  a0 00                    wil3      ldy #0
 5961 T:5516  20 c7 51                 wil4      jsr wgetscr
 5962 T:5519  99 00 02                           sta iobuf,y
 5963 T:551c  c8                                 iny 
 5964 T:551d  cc 72 40                           cpy wza
 5965 T:5520  d0 f4                              bne wil4
 5966 T:5522  88                                 dey 
 5967 T:5523  b9 00 02                 wil5      lda iobuf,y
 5968 T:5526  c9 20                              cmp #" "
 5969 T:5528  d0 03                              bne wil6
 5970 T:552a  88                                 dey 
 5971 T:552b  10 f6                              bpl wil5
 5972 T:552d  c8                       wil6      iny 
 5973 T:552e  a9 00                              lda #0
 5974 T:5530  99 00 02                           sta iobuf,y
 5975 T:5533  98                                 tya 
 5976 T:5534  48                                 pha 
 5977 T:5535  20 94 51                           jsr wclose
 5978 T:5538  a0 00                              ldy #0
 5979 T:553a  a2 0f                              ldx #15
 5980 T:553c  18                                 clc 
 5981 T:553d  20 9a 51                           jsr wcursor
 5982 T:5540  a0 27                              ldy #39
 5983 T:5542  a9 20                    wil7      lda #" "
 5984 T:5544  20 97 51                           jsr wout
 5985 T:5547  88                                 dey 
 5986 T:5548  d0 f8                              bne wil7
 5987 T:554a  68                                 pla 
 5988 T:554b  ae 73 40                           ldx sma
 5989 T:554e  e0 03                              cpx #3
 5990 T:5550  d0 04                              bne winlx
 5991 T:5552  38                                 sec 
 5992 T:5553  a9 ea                              lda #enbreak
 5993 T:5555  60                                 rts 
 5994 T:5556  a2 00                    winlx     ldx #<iobuf
 5995 T:5558  a0 02                              ldy #>iobuf
 5996 T:555a  18                                 clc 
 5997 T:555b  60                                 rts 

 5999 T:555c                                     .end 

 6007 T:555c                                    ;PRR 2.4 .S30 ==0801==
 6008 T:555c                           svtab     
 6009 T:555c  01 00                              .word 1
 6010 T:555e  64 55                              .word jmpadr
 6011 T:5560  66 55                              .word newadr
 6012 T:5562  37 40                              .word vchout

 6014 T:5564  76 00                    jmpadr    .word (chout-bdos)*2/3
 6015 T:5566  9f 3a                    newadr    .word pchout

 6017 T:5568  20 20 3c 44 49 52 3e ... dirdtext  .asc "  <DIR>  "
 6018 T:5571  00                                 .byt 0
 6019 T:5572  0d                       dirstext  .byt 13
 6020 T:5573  44 49 53 4b 45 54 54 ...           .asc "DISKETTE IN LAUFWERK "
 6021 T:5588  00                                 .byt 0
 6022 T:5589  0d                       dirntext  .byt 13
 6023 T:558a  4e 41 4d 45 20 44 45 ...           .asc "NAME DER DISKETTE :"
 6024 T:559d  00                                 .byt 0
 6025 T:559e  20 44 41 54 45 49 45 ... dirftext  .asc " DATEIEN AUF DER DISKETTE"
 6026 T:55b7  0d 00                              .byt 13,0
 6027 T:55b9  20 42 59 54 45 53 20 ... dirbtext  .asc " BYTES FREI"
 6028 T:55c4  0d 00                              .byt 13,0
 6029 T:55c6  27 03 00 00 00           dhi       .byt >10000,>1000,>100,>10,>1
 6030 T:55cb  10 e8 64 0a 01           dlo       .byt <10000,<1000,<100,<10,<1
 6031 T:55d0                                    ;********

 6033 T:55d0                           bef       
 6034 T:55d0  44 45 cc                           .asc "DE","L"+128
 6035 T:55d3  4d c4                              .asc "M","D"+128
 6036 T:55d5  52 c4                              .asc "R","D"+128
 6037 T:55d7  43 52 45 41 54 c5                  .asc "CREAT","E"+128
 6038 T:55dd  43 c4                              .asc "C","D"+128
 6039 T:55df  46 4f 52 4d 41 d4                  .asc "FORMA","T"+128
 6040 T:55e5  52 45 4e 41 4d c5                  .asc "RENAM","E"+128
 6041 T:55eb  44 41 54 c5                        .asc "DAT","E"+128
 6042 T:55ef  54 49 4d c5                        .asc "TIM","E"+128
 6043 T:55f3                                    maxmenu=9
 6044 T:55f3  45 58 49 d4                        .asc "EXI","T"+128
 6045 T:55f7  52 45 41 c4                        .asc "REA","D"+128
 6046 T:55fb  57 52 49 54 c5                     .asc "WRIT","E"+128
 6047 T:5600  43 4f 50 d9                        .asc "COP","Y"+128
 6048 T:5604  53 41 56 c5                        .asc "SAV","E"+128
 6049 T:5608  4c 4f 41 c4                        .asc "LOA","D"+128
 6050 T:560c  44 49 d2                           .asc "DI","R"+128
 6051 T:560f  d1                                 .asc "Q"+128
 6052 T:5610  4d c3                              .asc "M","C"+128
 6053 T:5612  42 d0                              .asc "B","P"+128
 6054 T:5614  52 c1                              .asc "R","A"+128
 6055 T:5616  57 c1                              .asc "W","A"+128
 6056 T:5618  cd                                 .asc "M"+128
 6057 T:5619  bb                                 .byt ";"+$80
 6058 T:561a  d0                                 .asc "P"+128
 6059 T:561b  d2                                 .asc "R"+128
 6060 T:561c  d7                                 .asc "W"+128
 6061 T:561d  43 4f cc                           .asc "CO","L"+128
 6062 T:5620  53 59 d3                           .asc "SY","S"+128
 6063 T:5623  d5                                 .asc "U"+128
 6064 T:5624  43 41 d4                           .asc "CA","T"+128
 6065 T:5627  4d 45 4e d5                        .asc "MEN","U"+128
 6066 T:562b  43 4f 50 59 43 4f ce               .asc "COPYCO","N"+128
 6067 T:5632  50 52 49 4e d4                     .asc "PRIN","T"+128
 6068 T:5637  50 52 54 44 45 d6                  .asc "PRTDE","V"+128
 6069 T:563d  45 43 48 cf                        .asc "ECH","O"+128

 6071 T:5641  00                                 .byt 0
 6072 T:5642  58 2b 5d 2b 60 2b 63 ... adr       .word del-1,md-1,rd-1,cr-1,cd-1
 6073 T:564c  68 2b 2f 36                        .word pformat-1,prename-1
 6074 T:5650  c5 35 af 35                        .word pdate-1,ptime-1
 6075 T:5654  21 2c 4a 2c 0a 2d ba 2d            .word ex-1,pread-1,pwrite-1,pcopy-1
 6076 T:565c  f5 2e 23 31 fd 36                  .word psave-1,pload-1,dir-1
 6077 T:5662  b0 33 d5 33 de 33 4b ...           .word pq-1,pc-1,pb-1,pra-1,pwa-1
 6078 T:566c  85 34 20 35 2c 2a fa ...           .word pm-1,pg-1,pp-1,pr-1,pw-1
 6079 T:5676  4b 35 a6 2a                        .word pcol-1,lload-1
 6080 T:567a  9c 33 52 39 59 2a                  .word pu-1,pcat-1,pmenu-1
 6081 T:5680  21 33 0b 3a 70 3a                  .word copycon-1,pprint-1,pprtdev-1
 6082 T:5686  55 3a                              .word pecho-1

 6084 T:5688  93 11 11 50 52 4f 4d ... coprt     .asc 19+128,17,17,"PROMPT V 2.4  "
 6085 T:5699  32 34 2e 30 38 2e 31 ...           .asc "24.08.1989 BY A.FACHAT"
 6086 T:56af  0d 0a 00                           .byt 13,10,0
 6087 T:56b2  0d                       tpon      .byt 13
 6088 T:56b3  50 52 49 4e 54 20 4f 4e            .asc "PRINT ON"
 6089 T:56bb  0d 00                              .byt 13,0
 6090 T:56bd  0d                       tpoff     .byt 13
 6091 T:56be  50 52 49 4e 54 20 4f ...           .asc "PRINT OFF"
 6092 T:56c7  0d 00                              .byt 13,0
 6093 T:56c9  0d                       tsource   .byt 13
 6094 T:56ca  4c 45 47 45 4e 20 53 ...           .asc "LEGEN SIE BITTE DIE QUELLDISKETTE EIN   UND DRUECKEN "
 6095 T:56ff  27 52 45 54 55 52 4e 27            .asc "'RETURN'"
 6096 T:5707  0d 00                              .byt 13,0
 6097 T:5709  0d                       ttarget   .byt 13
 6098 T:570a  4c 45 47 45 4e 20 53 ...           .asc "LEGEN SIE BITTE DIE ZIELDISKETTE EIN    UND DRUECKEN "
 6099 T:573f  27 52 45 54 55 52 4e 27            .asc "'RETURN'"
 6100 T:5747  0d 00                              .byt 13,0
 6101 T:5749  0d                       tsoutar   .byt 13
 6102 T:574a  4c 45 47 45 4e 20 53 ...           .asc "LEGEN SIE BITTE DIE QUELLDISKETTE UND   "
 6103 T:5772  44 49 45 20 5a 49 45 ...           .asc "DIE ZIELDISKETTE EIN UND DRUECKEN       "
 6104 T:579a  27 52 45 54 55 52 4e 27            .asc "'RETURN'"
 6105 T:57a2  0d 00                              .byt 13,0

 6107 T:57a4  0e 02 09                 datum     .byt 14,2,9;+1980=14.2.88
 6108 T:57a7  ff fe fd fc fb fa f9     errnum    .byt <-1,<-2,<-3,<-4,<-5,<-6,<-7
 6109 T:57ae  f8 f7 f6 f5 f4 f3 f2 f1            .byt <-8,<-9,<-10,<-11,<-12,<-13,<-14,<-15
 6110 T:57b6  f0 ef ee ed ec eb ea               .byt <-16,<-17,<-18,<-19,<-20,<-21,<-22
 6111 T:57bd  0f 08                              .byt <15,<8
 6112 T:57bf  41 42 43 44 45 46 47 ...           .byt 65,66,67,68,69,70,71,72,73
 6113 T:57c8  20                                 .byt 32
 6114 T:57c9  02 03 05 06 09 0b 0e               .byt 2,3,5,6,9,11,14
 6115 T:57d0  5d                                 .byt 29+64
 6116 T:57d1  e9 e8 e7                           .byt <-23,<-24,<-25
 6117 T:57d4                                    erranz=24+9+1+7+1+3
 6118 T:57d4                           ert                        ;
 6119 T:57d4  42 45 46 45 48 4c 45 ...           .asc "BEFEHLE NICHT IMPLEMENTIERT"
 6120 T:57ef  00                                 .byt 0
 6121 T:57f0  55 45 42 45 52 54 52 ...           .asc "UEBERTRAGUNGSFEHLER"
 6122 T:5803  00                                 .byt 0
 6123 T:5804  4b 45 49 4e 45 20 53 ...           .asc "KEINE SCHNELLE UEBERTRAGUNG"
 6124 T:581f  00                                 .byt 0
 6125 T:5820  4b 45 49 4e 45 20 4d ...           .asc "KEINE MFM-DISKETTE"
 6126 T:5832  00                                 .byt 0
 6127 T:5833  50 41 52 41 4d 45 54 ...           .asc "PARAMETER AUSSERHALB DER GRENZEN"
 6128 T:5853  00                                 .byt 0
 6129 T:5854  43 4c 55 53 54 45 52 ...           .asc "CLUSTER NICHT GEFUNDEN"
 6130 T:586a  00                                 .byt 0
 6131 T:586b  50 46 41 44 20 4e 49 ...           .asc "PFAD NICHT GEFUNDEN"
 6132 T:587e  00                                 .byt 0
 6133 T:587f  41 4b 54 55 45 4c 4c ...           .asc "AKTUELLES VERZEICHNIS"
 6134 T:5894  00                                 .byt 0
 6135 T:5895  4e 41 4d 45 20 4e 49 ...           .asc "NAME NICHT GEFUNDEN"
 6136 T:58a8  00                                 .byt 0
 6137 T:58a9  50 46 41 44 20 5a 55 ...           .asc "PFAD ZU LANG"
 6138 T:58b5  00                                 .byt 0
 6139 T:58b6  55 4e 45 52 4c 41 55 ...           .asc "UNERLAUBTER NAME"
 6140 T:58c6  00                                 .byt 0
 6141 T:58c7  44 49 53 4b 45 54 54 ...           .asc "DISKETTE VOLL"
 6142 T:58d4  00                                 .byt 0
 6143 T:58d5  44 41 54 45 49 20 45 ...           .asc "DATEI EXISTIERT"
 6144 T:58e4  00                                 .byt 0
 6145 T:58e5  55 4e 54 45 52 56 45 ...           .asc "UNTERVERZEICHNIS NICHT LEER"
 6146 T:5900  00                                 .byt 0
 6147 T:5901  55 4e 45 52 4c 41 55 ...           .asc "UNERLAUBTES LAUFWERK"
 6148 T:5915  00                                 .byt 0
 6149 T:5916  4c 41 55 46 57 45 52 ...           .asc "LAUFWERK NICHT BEREIT"
 6150 T:592b  00                                 .byt 0
 6151 T:592c  5a 55 56 49 45 4c 45 ...           .asc "ZUVIELE DATEIEN"
 6152 T:593b  00                                 .byt 0
 6153 T:593c  44 41 54 45 49 20 4f ...           .asc "DATEI OFFEN"
 6154 T:5947  00                                 .byt 0
 6155 T:5948  44 41 54 45 49 20 4e ...           .asc "DATEI NICHT OFFEN"
 6156 T:5959  00                                 .byt 0
 6157 T:595a  45 4e 44 45 20 44 45 ...           .asc "ENDE DER DATEI"
 6158 T:5968  00                                 .byt 0
 6159 T:5969  4b 45 49 4e 20 46 52 ...           .asc "KEIN FREIER PUFFER"
 6160 T:597b  00                                 .byt 0
 6161 T:597c  55 4e 54 45 52 42 52 ...           .asc "UNTERBRECHUNG"
 6162 T:5989  00                                 .byt 0
 6163 T:598a  4c 41 55 46 57 45 52 ...           .asc "LAUFWERK NICHT VORHANDEN"
 6164 T:59a2  00                                 .byt 0
 6165 T:59a3  53 43 48 52 45 49 42 ...           .asc "SCHREIBSCHUTZ AN"
 6166 T:59b3  00                                 .byt 0
 6167 T:59b4  54 4f 4f 20 4d 41 4e ...           .asc "TOO MANY FILES"
 6168 T:59c2  00                                 .byt 0
 6169 T:59c3  46 49 4c 45 20 4f 50 ...           .asc "FILE OPEN"
 6170 T:59cc  00                                 .byt 0
 6171 T:59cd  46 49 4c 45 20 4e 4f ...           .asc "FILE NOT OPEN"
 6172 T:59da  00                                 .byt 0
 6173 T:59db  46 49 4c 45 20 4e 4f ...           .asc "FILE NOT FOUND"
 6174 T:59e9  00                                 .byt 0
 6175 T:59ea  44 45 56 49 43 45 20 ...           .asc "DEVICE NOT PRESENT"
 6176 T:59fc  00                                 .byt 0
 6177 T:59fd  4e 4f 54 20 49 4e 50 ...           .asc "NOT INPUT FILE"
 6178 T:5a0b  00                                 .byt 0
 6179 T:5a0c  4e 4f 54 20 4f 55 54 ...           .asc "NOT OUTPUT FILE"
 6180 T:5a1b  00                                 .byt 0
 6181 T:5a1c  4d 49 53 53 49 4e 47 ...           .asc "MISSING FILENAME"
 6182 T:5a2c  00                                 .byt 0
 6183 T:5a2d  49 4c 4c 45 47 41 4c ...           .asc "ILLEGAL DEVICE NUMBER"
 6184 T:5a42  00                                 .byt 0
 6185 T:5a43  56 45 52 5a 45 49 43 ...           .asc "VERZEICHNISLISTE VOLL"
 6186 T:5a58  00                                 .byt 0
 6187 T:5a59  53 45 4b 54 4f 52 20 ...           .asc "SEKTOR NICHT GEFUNDEN"
 6188 T:5a6e  00                                 .byt 0
 6189 T:5a6f  4b 45 49 4e 45 20 41 ...           .asc "KEINE ADRESSMARKE"
 6190 T:5a80  00                                 .byt 0
 6191 T:5a81  43 52 43 2d 44 41 54 ...           .asc "CRC-DATENFEHLER"
 6192 T:5a90  00                                 .byt 0
 6193 T:5a91  46 4f 52 4d 41 54 46 ...           .asc "FORMATFEHLER"
 6194 T:5a9d  00                                 .byt 0
 6195 T:5a9e  48 45 41 44 45 52 2d ...           .asc "HEADER-PRUEFSUMMENFEHLER"
 6196 T:5ab6  00                                 .byt 0
 6197 T:5ab7  44 49 53 4b 45 54 54 ...           .asc "DISKETTENWECHSEL"
 6198 T:5ac7  00                                 .byt 0
 6199 T:5ac8  53 59 4e 54 41 58 46 ...           .asc "SYNTAXFEHLER"
 6200 T:5ad4  00                                 .byt 0
 6201 T:5ad5  4c 4f 41 44 20 45 52 ...           .asc "LOAD ERROR"
 6202 T:5adf  00                                 .byt 0
 6203 T:5ae0  49 2f 4f 2d 44 45 56 ...           .asc "I/O-DEVICE NOT PRESENT"
 6204 T:5af6  00                                 .byt 0
 6205 T:5af7  45 4e 44 42 46 20                  .asc "ENDBF "
 6206 T:5afd  00                                 .byt 0
 6207 T:5afe  45 4e 44 42 45 20                  .asc "ENDBE "
 6208 T:5b04  00                                 .byt 0
 6209 T:5b05  2d 4d 45 4c 44 55 4e 47  errnumt   .asc "-MELDUNG"
 6210 T:5b0d  00                                 .byt 0

 6212 T:5b0e  6c 3b 78 3b              mpma      .word mpm1-1,mpm2-1
 6213 T:5b12  84 3b 90 3b 9c 3b                  .word mpm3-1,mpm4-1,mpm5-1
 6214 T:5b18  aa 3b cb 3b              mpm1a     .word mpm11-1,mpm12-1
 6215 T:5b1c  20 3c 15 3c 00 00                  .word mpm13-1,mpm14-1,0
 6216 T:5b22  99 4e a7 4e ba 4e                  .word mpm51-1,mpm52-1,mpm53-1
 6217 T:5b28  cf 4e e4 4e                        .word mpm54-1,mpm55-1
 6218 T:5b2c  d1 49 b1 49              mpm2a     .word mpm21-1,mpm22-1
 6219 T:5b30  e2 4d 93 47 90 47                  .word mpm23-1,mpmread-1,mpmprint-1
 6220 T:5b36  f5 4d 07 4e 70 4d                  .word mpm24-1,mpm25-1,mpm26-1
 6221 T:5b3c  c6 36 7a 4e 2b 3c                  .word mrename-1,mpm27-1,mpm28-1
 6222 T:5b42  49 3f 4e 3c              mpm3a     .word mpm31-1,mpm32-1
 6223 T:5b46  f3 48 f0 48                        .word mpcread-1,mpcprint-1
 6224 T:5b4a  3e 40 7d 3c                        .word mpm33-1,mpm34-1
 6225 T:5b4e  b2 41 b0 43              mpm4a     .word mpm41-1,mpm42-1
 6226 T:5b52  99 45 00 00 f6 4f                  .word mpm43-1,0,mpm45-1
 6227 T:5b58  06 50 16 50                        .word mpm46-1,mpm47-1
 6228 T:5b5c  00 00                    mpm5a     .word 0

 6230 T:5b5e  68 51                              .word mppiec-1
 6231 T:5b60  70 51 00 00                        .word mppcentr-1,0
 6232 T:5b64  25 51 30 51                        .word mppnokon-1,mppacbm-1
 6233 T:5b68  3d 51 00 00                        .word mppcasc-1,0
 6234 T:5b6c  4a 51 55 51                        .word mppcr-1,mpplf-1
 6235 T:5b70                                    ;********
 6236 T:5b70                           mainmenu  
 6237 T:5b70  20 42 44 4f 53 20 20 ...           .asc " BDOS    PC    CBM    COPY   PRINT      "
 6238 T:5b98  05                                 .byt 5
 6239 T:5b99  08 80                              .byt 8,128
 6240 T:5b9b  ad 5b                              .word mallg
 6241 T:5b9d  0e 80                              .byt 14,128
 6242 T:5b9f  29 5c                              .word mpcdisk
 6243 T:5ba1  15 80                              .byt 21,128
 6244 T:5ba3  a6 5c                              .word mcbmdisk
 6245 T:5ba5  1c 80                              .byt 28,128
 6246 T:5ba7  e6 5c                              .word mcopy
 6247 T:5ba9  23 80                              .byt 35,128
 6248 T:5bab  45 5d                              .word mprint
 6249 T:5bad  0a                       mallg     .byt 10
 6250 T:5bae  0b 02 01                           .byt 11,2,1
 6251 T:5bb1  80                                 .byt 128
 6252 T:5bb2  20 43 4f 50 59 52 49 ...           .asc " COPYRIGHT "
 6253 T:5bbd  80                                 .byt 128
 6254 T:5bbe  20 46 41 52 42 45 4e ...           .asc " FARBEN    "
 6255 T:5bc9  80                                 .byt 128
 6256 T:5bca  20 43 4c 49 20 20 20 ...           .asc " CLI       "
 6257 T:5bd5  80                                 .byt 128
 6258 T:5bd6  20 45 4e 44 45 20 20 ...           .asc " ENDE      "
 6259 T:5be1  00                                 .byt 0
 6260 T:5be2  2d 53 4f 52 54 20 4e ...           .asc "-SORT NACH-"
 6261 T:5bed  80                                 .byt 128
 6262 T:5bee  20 4e 49 43 48 54 53 ... hk11      .asc " NICHTS    "
 6263 T:5bf9  80                                 .byt 128
 6264 T:5bfa  20 4e 41 4d 45 20 20 ... hk12      .asc " NAME      "
 6265 T:5c05  80                                 .byt 128
 6266 T:5c06  20 45 58 54 2f 53 50 ... hk13      .asc " EXT/SPUR  "
 6267 T:5c11  80                                 .byt 128
 6268 T:5c12  20 47 52 4f 45 53 53 ... hk14      .asc " GROESSE   "
 6269 T:5c1d  80                                 .byt 128
 6270 T:5c1e  20 41 55 46 2f 41 42 ... hk15      .asc " AUF/AB    "
 6271 T:5c29  0b                       mpcdisk   .byt 11
 6272 T:5c2a  0a 02 09                           .byt 10,2,9
 6273 T:5c2d  80                                 .byt 128
 6274 T:5c2e  20 44 49 52 20 20 20 ...           .asc " DIR      "
 6275 T:5c38  80                                 .byt 128
 6276 T:5c39  20 44 52 49 56 45 20 ...           .asc " DRIVE    "
 6277 T:5c43  80                                 .byt 128
 6278 T:5c44  20 50 46 41 44 20 20 ...           .asc " PFAD     "
 6279 T:5c4e  80                                 .byt 128
 6280 T:5c4f  20 52 45 41 44 20 20 ...           .asc " READ     "
 6281 T:5c59  80                                 .byt 128
 6282 T:5c5a  20 50 52 49 4e 54 20 ...           .asc " PRINT    "
 6283 T:5c64  80                                 .byt 128
 6284 T:5c65  20 4d 41 4b 45 20 44 ...           .asc " MAKE DIR "
 6285 T:5c6f  80                                 .byt 128
 6286 T:5c70  20 44 45 4c 20 44 49 ...           .asc " DEL DIR  "
 6287 T:5c7a  80                                 .byt 128
 6288 T:5c7b  20 44 45 4c 45 54 45 ...           .asc " DELETE   "
 6289 T:5c85  80                                 .byt 128
 6290 T:5c86  20 52 45 4e 41 4d 45 ...           .asc " RENAME   "
 6291 T:5c90  80                                 .byt 128
 6292 T:5c91  20 46 4f 52 4d 41 54 ...           .asc " FORMAT   "
 6293 T:5c9b  80                                 .byt 128
 6294 T:5c9c  20 43 4f 4d 4d 41 4e ...           .asc " COMMAND  "
 6295 T:5ca6  06                       mcbmdisk  .byt 6
 6296 T:5ca7  09 02 0f                           .byt 9,2,15
 6297 T:5caa  80                                 .byt 128
 6298 T:5cab  20 43 41 54 20 20 20 ...           .asc " CAT     "
 6299 T:5cb4  80                                 .byt 128
 6300 T:5cb5  20 55 4e 49 54 20 20 ...           .asc " UNIT    "
 6301 T:5cbe  80                                 .byt 128
 6302 T:5cbf  20 52 45 41 44 20 20 ...           .asc " READ    "
 6303 T:5cc8  80                                 .byt 128
 6304 T:5cc9  20 50 52 49 4e 54 20 ...           .asc " PRINT   "
 6305 T:5cd2  80                                 .byt 128
 6306 T:5cd3  20 53 43 52 41 54 43 ...           .asc " SCRATCH "
 6307 T:5cdc  80                                 .byt 128
 6308 T:5cdd  20 43 4f 4d 4d 41 4e ...           .asc " COMMAND "
 6309 T:5ce6  07                       mcopy     .byt 7
 6310 T:5ce7  0c 02 16                           .byt 12,2,22
 6311 T:5cea  80                                 .byt 128
 6312 T:5ceb  20 50 43 20 20 2d 3e ...           .asc " PC  -> PC  "
 6313 T:5cf7  80                                 .byt 128
 6314 T:5cf8  20 50 43 20 20 2d 3e ...           .asc " PC  -> CBM "
 6315 T:5d04  80                                 .byt 128
 6316 T:5d05  20 43 42 4d 20 2d 3e ...           .asc " CBM -> PC  "
 6317 T:5d11  00                                 .byt 0
 6318 T:5d12  2d 2d 54 45 58 54 43 ...           .asc "--TEXTCOPY--"
 6319 T:5d1e  80                                 .byt 128
 6320 T:5d1f  20 41 53 43 20 2d 3e ... hk21      .asc " ASC -> CBM "
 6321 T:5d2b  80                                 .byt 128
 6322 T:5d2c  20 43 42 4d 20 2d 3e ... hk22      .asc " CBM -> ASC "
 6323 T:5d38  80                                 .byt 128
 6324 T:5d39  20 41 55 53 20 20 20 ... hk23      .asc " AUS        "
 6325 T:5d45  0a                       mprint    .byt 10+rs232
 6326 T:5d46  0c 02 1a                           .byt 12,2,26
 6327 T:5d49  00                                 .byt 0
 6328 T:5d4a  2d 2d 2d 44 45 56 49 ...           .asc "---DEVICE---"

 6330 T:5d56  80                                 .byt 128

 6332 T:5d57                           hk56      

 6334 T:5d57  20 49 45 43 2d 42 55 ... hk57      .asc " IEC-BUS    "
 6335 T:5d63  80                                 .byt 128
 6336 T:5d64  20 43 45 4e 54 52 4f ... hk58      .asc " CENTRONICS "
 6337 T:5d70  00                                 .byt 0
 6338 T:5d71  2d 2d 4b 4f 4e 56 45 ...           .asc "--KONVERT---"
 6339 T:5d7d  80                                 .byt 128
 6340 T:5d7e  20 4b 45 49 4e 45 20 ... hk51      .asc " KEINE      "
 6341 T:5d8a  80                                 .byt 128
 6342 T:5d8b  20 41 53 43 20 2d 3e ... hk52      .asc " ASC -> CBM "
 6343 T:5d97  80                                 .byt 128
 6344 T:5d98  20 43 42 4d 20 2d 3e ... hk53      .asc " CBM -> ASC "
 6345 T:5da4  00                                 .byt 0
 6346 T:5da5  2d 2d 2d 43 52 2f 4c ...           .asc "---CR/LF----"
 6347 T:5db1  80                                 .byt 128
 6348 T:5db2  20 43 52 20 2d 3e 20 ... hk54      .asc " CR -> CRLF "
 6349 T:5dbe  80                                 .byt 128
 6350 T:5dbf  20 4c 46 20 2d 3e 20 ... hk55      .asc " LF -> CRLF "
 6351 T:5dcb                           coptxt    
 6352 T:5dcb  93                                 .asc 19+128        ;"{clr}"
 6353 T:5dcc  20 20 20 20 20 20 4d ...           .asc "      MENU V 2.4 "
 6354 T:5ddd  0d 0d                              .byt 13,13
 6355 T:5ddf  20 20 20 20 20 20 20 ...           .asc "       COPYRIGHT"
 6356 T:5def  0d 0d                              .byt 13,13
 6357 T:5df1  32 34 2e 30 38 2e 31 ...           .asc "24.08.1989 BY A.FACHAT"
 6358 T:5e07  0d 0d                              .byt 13,13
 6359 T:5e09  20 44 52 55 45 43 4b ...           .asc " DRUECKEN SIE 'RETURN'"
 6360 T:5e1f  00                                 .byt 0
 6361 T:5e20                           coltxt    
 6362 T:5e20  93                                 .asc 19+128        ;"{clr}"
 6363 T:5e21  20 56 45 52 41 45 4e ...           .asc " VERAENDERN DER FARBEN: "
 6364 T:5e39  0d                                 .byt 13
 6365 T:5e3a  20 20 48 49 4e 54 45 ...           .asc "  HINTERGRUND MIT :"
 6366 T:5e4d  0d                                 .byt 13
 6367 T:5e4e  20 20 20 20 43 55 52 ...           .asc "    CURSOR RECHTS/LINKS "
 6368 T:5e66  20 20 54 45 58 54 20 ...           .asc "  TEXT MIT :"
 6369 T:5e72  0d                                 .byt 13
 6370 T:5e73  20 20 20 20 43 55 52 ...           .asc "    CURSOR HOCH/RUNTER "
 6371 T:5e8a  0d 0d                              .byt 13,13
 6372 T:5e8c  20 57 45 49 54 45 52 ...           .asc " WEITER MIT 'RETURN'"
 6373 T:5ea0  00                                 .byt 0
 6374 T:5ea1                                    ;********
 6375 T:5ea1                                    menk=4

 6377 T:5ea1  1d 9d 11 0d              menkey    .byt 29,29+128,17,13
 6378 T:5ea5  6f 52 85 52 b4 52 9e 52  menka     .word menext-1,mevor-1,mesub-1,meret-1
 6379 T:5ead                                    ;********
 6380 T:5ead                                    smka=5

 6382 T:5ead  1d 9d 11 91 0d           smkey     .byt 29,29+128,17,17+128,13
 6383 T:5eb2  8e 53 93 53 98 53 b0 ... smadr     .word smnext-1,smvor-1,smdown-1,smup-1,smret-1
 6384 T:5ebc                                    ;********
 6385 T:5ebc  20 20 20 20 20 20 20 ... leerzei   .asc "                                       "
 6386 T:5ee3  00                                 .byt 0
 6387 T:5ee4                                    inpanz=10

 6389 T:5ee4  1d 11 91 9d 13 93 94     inpok     .asc 29,17,17+128,29+128,19,19+128,20+128
 6390 T:5eeb  0d 03 14                           .byt 13,3,20
 6391 T:5eee  44 52 49 56 45 3a        cppt1     .asc "DRIVE:"
 6392 T:5ef4  00                                 .byt 0

 6394 T:5ef5  13 44 41 54 45 49 20 ... gtnnt     .asc 19,"DATEI EXISTIERT SCHON !"
 6395 T:5f0d  0d 0d                              .byt 13,13
 6396 T:5f0f  3c 52 55 4e 2f 53 54 ...           .asc "<RUN/STOP>=ENDE"
 6397 T:5f1e  0d                                 .byt 13

 6399 T:5f1f  11 3c 3d 3e 20 20 20 ...           .asc 17,"<=>       =NEUEN NAMEN"
 6400 T:5f36  0d                                 .byt 13

 6402 T:5f37  11 3c 52 45 54 3e 20 ...           .asc 17,"<RET>     =WEITER"
 6403 T:5f49  00                                 .byt 0

 6405 T:5f4a  13 11 11 20 20 4c 45 ... adt       .asc 19,17,17,"  LEGEN SIE DIE"
 6406 T:5f5c  0d                                 .byt 13

 6408 T:5f5d  11 20 20 51 55 45 4c ...           .asc 17,"  QUELL- UND DIE ZIEL-"
 6409 T:5f74  0d                                 .byt 13

 6411 T:5f75  11 20 20 44 49 53 4b ...           .asc 17,"  DISKETTE EIN !"
 6412 T:5f86  00                                 .byt 0

 6414 T:5f87  0d 0a 11 91 13 93 1d 9d  chtkeys   .byt 13,10,17,17+128,19,19+128,29,29+128
 6415 T:5f8f                                    anztkey=8
 6416 T:5f8f  20 45 58 49 53 54 49 ... gtnnt3    .asc " EXISTIERT SCHON"
 6417 T:5f9f  00                                 .byt 0
 6418 T:5fa0  be 5f e3 5f 09 60 1c 60  ptta      .word ptt1,ptt2,ptt3,ptt4
 6419 T:5fa8  35 60 4d 60 74 60 96 ...           .word ptt5,ptt6,ptt7,ptt8,ptt9
 6420 T:5fb2  cf 60 e5 60 02 61 24 61            .word ptt10,ptt11,ptt12,ptt13
 6421 T:5fba  3c 61 56 61                        .word ptt14,ptt15
 6422 T:5fbe  47 45 42 45 4e 20 53 ... ptt1      .asc "GEBEN SIE SUCHMASKE EIN (Z.B. AB?C*)"
 6423 T:5fe2  00                                 .byt 0
 6424 T:5fe3  3c 52 55 4e 2f 53 54 ... ptt2      .asc "<RUN/STOP>,<SH.RET>=SUBDIR,<RET>=ENDE"
 6425 T:6008  00                                 .byt 0
 6426 T:6009  3c 52 45 54 3e 20 57 ... ptt3      .asc "<RET> WAEHLT DRIVE"
 6427 T:601b  00                                 .byt 0
 6428 T:601c  47 45 42 45 4e 20 53 ... ptt4      .asc "GEBEN SIE NEUEN PFAD EIN"
 6429 T:6034  00                                 .byt 0
 6430 T:6035  47 45 42 45 4e 20 53 ... ptt5      .asc "GEBEN SIE DEN NAMEN EIN"
 6431 T:604c  00                                 .byt 0
 6432 T:604d  3c 52 55 4e 2f 53 54 ... ptt6      .asc "<RUN/STOP>,<SH.RET>=SUBDIR,<=>=WAEHLEN"
 6433 T:6073  00                                 .byt 0
 6434 T:6074  3c 52 55 4e 2f 53 54 ... ptt7      .asc "<RUN/STOP>,<=>=WAEHLEN,<RET>=ENDE"
 6435 T:6095  00                                 .byt 0
 6436 T:6096  47 45 42 45 4e 20 53 ... ptt8      .asc "GEBEN SIE DRIVE + NAME DER DISK EIN"
 6437 T:60b9  00                                 .byt 0
 6438 T:60ba  47 45 42 45 4e 20 53 ... ptt9      .asc "GEBEN SIE BEFEHL EIN"
 6439 T:60ce  00                                 .byt 0
 6440 T:60cf  3c 52 55 4e 2f 53 54 ... ptt10     .asc "<RUN/STOP>,<RET>=ENDE"
 6441 T:60e4  00                                 .byt 0
 6442 T:60e5  3c 52 45 54 3e 20 57 ... ptt11     .asc "<RET> WAEHLT UNIT ODER DRIVE"
 6443 T:6101  00                                 .byt 0
 6444 T:6102  47 45 42 45 4e 20 53 ... ptt12     .asc "GEBEN SIE ZIELLAUFWERK + PFAD EIN"
 6445 T:6123  00                                 .byt 0
 6446 T:6124  44 52 55 45 43 4b 45 ... ptt13     .asc "DRUECKEN SIE EINE TASTE"
 6447 T:613b  00                                 .byt 0
 6448 T:613c  47 45 42 45 4e 20 53 ... ptt14     .asc "GEBEN SIE NEUEN NAMEN EIN"
 6449 T:6155  00                                 .byt 0
 6450 T:6156  3c 52 55 4e 2f 53 54 ... ptt15     .asc "<RUN/STOP>,<=>=WAEHLEN"
 6451 T:616c  00                                 .byt 0
 6452 T:616d  04                       mpdt      .byt 4
 6453 T:616e  0a 0a 0f                           .byt 10,10,15
 6454 T:6171  80                                 .byt 128
 6455 T:6172  20 44 52 49 56 45 20 ...           .asc " DRIVE A: "
 6456 T:617c  80                                 .byt 128
 6457 T:617d  20 44 52 49 56 45 20 ...           .asc " DRIVE B: "
 6458 T:6187  80                                 .byt 128
 6459 T:6188  20 44 52 49 56 45 20 ...           .asc " DRIVE C: "
 6460 T:6192  80                                 .byt 128
 6461 T:6193  20 44 52 49 56 45 20 ...           .asc " DRIVE D: "
 6462 T:619d  50 46 41 44 20 3a        ismpt     .asc "PFAD :"
 6463 T:61a3  00                                 .byt 0
 6464 T:61a4  4e 41 4d 45 20 3a        isnpt     .asc "NAME :"
 6465 T:61aa  00                                 .byt 0

 6467 T:61ab  93 11                    mwt       .asc 19+128,17

 6469 T:61ad  11 20 20 20 20 20 46 ...           .asc 17,"     FEHLER !"
 6470 T:61bb  0d 0d                              .byt 13,13

 6472 T:61bd  11 52 45 54 20 20 20 ...           .asc 17,"RET      = WEITER"
 6473 T:61cf  0d                                 .byt 13

 6475 T:61d0  11 52 55 4e 2f 53 54 ...           .asc 17,"RUN/STOP = ENDE"
 6476 T:61e0  00                                 .byt 0
 6477 T:61e1  20 3c 44 49 52 3e        sdirt     .asc " <DIR>"
 6478 T:61e7  00                                 .byt 0
 6479 T:61e8  20 42 59 54 45 53 20 ... dirbfrei  .asc " BYTES FREI"
 6480 T:61f3  00                                 .byt 0
 6481 T:61f4                                    ;********
 6482 T:61f4  07 09 07 0d              m32mt     .byt 7,9,7,13
 6483 T:61f8  80                                 .byt 128
 6484 T:61f9  20 55 4e 49 54 20 38 ...           .asc " UNIT 8  "
 6485 T:6202  80                                 .byt 128
 6486 T:6203  20 55 4e 49 54 20 39 ...           .asc " UNIT 9  "
 6487 T:620c  80                                 .byt 128
 6488 T:620d  20 55 4e 49 54 20 31 ...           .asc " UNIT 10 "
 6489 T:6216  80                                 .byt 128
 6490 T:6217  20 55 4e 49 54 20 31 ...           .asc " UNIT 11 "
 6491 T:6220  00                                 .byt 0
 6492 T:6221  20 20 20 20 20 20 20 ...           .asc "         "
 6493 T:622a  80                                 .byt 128
 6494 T:622b  20 44 52 49 56 45 20 ...           .asc " DRIVE 0 "
 6495 T:6234  80                                 .byt 128
 6496 T:6235  20 44 52 49 56 45 20 ...           .asc " DRIVE 1 "
 6497 T:623e  44 49 53 4b 2d 42 45 ... m34t      .asc "DISK-BEFEHL :"
 6498 T:624b  00                                 .byt 0
 6499 T:624c  4d 41 53 4b 45 20 3a     ismct     .asc "MASKE :"
 6500 T:6253  00                                 .byt 0
 6501 T:6254  20 42 4c 2e 46 52 45 49  m31bft    .asc " BL.FREI"
 6502 T:625c  00                                 .byt 0

 6504 T:625d                                    mdiranz=19
 6505 T:625d                                    mdirtbrt=27
 6506 T:625d                                    ;dirmenu am ende
 6507 T:625d                                    mdirtlen=mdiranz*(mdirtbrt+1)+4

 6509 T:625d  13                       ast       .asc 19
 6510 T:625e  0d                                 .byt 13
 6511 T:625f  20 53 49 4e 44 20 53 ...           .asc " SIND SIE SICH SICHER ?"
 6512 T:6276  0d 0d                              .byt 13,13
 6513 T:6278  20 20 20 20 52 55 4e ...           .asc "    RUN/STOP =NEIN"
 6514 T:628a  0d 0d                              .byt 13,13
 6515 T:628c  20 20 20 20 52 45 54 ...           .asc "    RETURN   =JA"
 6516 T:629c  00                                 .byt 0
 6517 T:629d  42 45 46 45 48 4c 20 3a  mbeft     .asc "BEFEHL :"
 6518 T:62a5  00                                 .byt 0
 6519 T:62a6  43 42 4d 3e 44           stlt1     .asc "CBM>D"
 6520 T:62ab  00                                 .byt 0
 6521 T:62ac  3a 50 43 3e              stlt2     .asc ":PC>"
 6522 T:62b0  00                                 .byt 0
 6523 T:62b1                                    stlend=39-5-4-5
 6524 T:62b1  02 00                    soname    .byt 2,0
 6525 T:62b3  12 08                    sonamend  .byt 18,8
 6526 T:62b5  13 08                    soext     .byt 19,8
 6527 T:62b7  14 0b                    soextend  .byt 20,11
 6528 T:62b9  00 0c                    sosize    .byt 0,12
 6529 T:62bb  02 10                    sosizend  .byt 2,16
 6530 T:62bd  14 13                    sollen    .byt 20,19

 6532 T:62bf                                     .end 

 6536 T:62bf                                     .bss 

 6538 B:4000                                    varanf=*

 6543 B:4000                                    ;PRD 2.4 .S28 ==0801==
 6544 B:4000  00 00                    prblen    .word 0
 6545 B:4002                           ddtp      

 6547 B:4002  00 fe cb 00 2c ff 00 ...           .dsb dtplen,0
 6548 B:4030  00                       fformat   .byt 0
 6549 B:4031  00 00                    fadr      .word 0
 6550 B:4033  00                       iecunit   .byt 0
 6551 B:4034  00                       prtdev    .byt 0
 6552 B:4035  00                       prtfl     .byt 0
 6553 B:4036  00                       prtdiv    .byt 0
 6554 B:4037  00 00                    vchout    .word 0

 6556 B:4039  00 00                    dosd0     .word 0
 6557 B:403b  00 00                    iecd0     .word 0
 6558 B:403d  00 00                    drvd0     .word 0
 6559 B:403f                                    ;*********
 6560 B:403f  00 00                    dircount  .word 0
 6561 B:4041  00 00                    dint1     .word 0
 6562 B:4043  00 00                    dint2     .word 0
 6563 B:4045  00 00                    dint3     .word 0
 6564 B:4047  00                       dabuf     .byt 0
 6565 B:4048  00 00 00 00              dword     .word 0,0
 6566 B:404c  00 00                    dcl       .word 0
 6567 B:404e  00 00                    dpa       .word 0
 6568 B:4050  00                       cnt       .byt 0
 6569 B:4051  00                       handle    .byt 0
 6570 B:4052  00                       handl2    .byt 0
 6571 B:4053  00                       st1       .byt 0
 6572 B:4054  00                       flag      .byt 0
 6573 B:4055  00                       dr1       .byt 0
 6574 B:4056  00                       dr2       .byt 0
 6575 B:4057  00 00                    nadr      .word 0
 6576 B:4059  00 00                    fad2      .word 0
 6577 B:405b  00 00                    tplen     .word 0
 6578 B:405d  00 00                    fl1       .word 0
 6579 B:405f  00 00 00 00              laenge    .byt 0,0,0,0
 6580 B:4063  00 00 00 00 00 00 00 ... pblock    .word 0,0,0,0,0
 6581 B:406d  00 00                    llvec     .word 0
 6582 B:406f  00                       clitcol   .byt 0
 6583 B:4070  00                       clibcol   .byt 0
 6584 B:4071                                    ;********

 6586 B:4071                                    int1=dint1
 6587 B:4071                                    int2=dint2
 6588 B:4071                                    int3=dint3

 6590 B:4071  00                       wmenu     .byt 0
 6591 B:4072  00                       wza       .byt 0
 6592 B:4073  00                       sma       .byt 0
 6593 B:4074  00                       wsmenu    .byt 0
 6594 B:4075  00                       smf       .byt 0
 6595 B:4076  00 00 00 00              oldsize   .byt 0,0,0,0
 6596 B:407a  00                       oldhdl    .byt 0
 6597 B:407b  00                       olderr    .byt 0
 6598 B:407c  00                       newhdl    .byt 0
 6599 B:407d  00                       olddrv    .byt 0
 6600 B:407e  00                       newdrv    .byt 0
 6601 B:407f  00 00                    ccnt      .byt 0,0
 6602 B:4081  00                       gtpd      .byt 0
 6603 B:4082  00                       mpdb      .byt 0
 6604 B:4083  00                       mpdcmd    .byt 0
 6605 B:4084  00 00                    cdir      .word 0
 6606 B:4086  00                       gdb       .byt 0
 6607 B:4087  00                       lanz      .byt 0
 6608 B:4088  00                       lmanz     .byt 0
 6609 B:4089  00                       mpdf      .byt 0
 6610 B:408a  00                       lseit     .byt 0
 6611 B:408b  00                       abuf      .byt 0
 6612 B:408c  00                       iecdrive  .byt 0
 6613 B:408d  00                       panzsub   .byt 0
 6614 B:408e  00                       menutcol  .byt 0
 6615 B:408f  00                       menubcol  .byt 0
 6616 B:4090  00                       cvfl      .byt 0

 6618 B:4091  00                       sofl      .byt 0
 6619 B:4092  00                       sonk      .byt 0
 6620 B:4093  00                       sofirst   .byt 0
 6621 B:4094  00                       solast    .byt 0
 6622 B:4095  00                       socount   .byt 0
 6623 B:4096  00                       sokrit    .byt 0
 6624 B:4097  00                       sokend    .byt 0
 6625 B:4098  00                       soelen    .byt 0
 6626 B:4099  00 00                    sofadr    .word 0
 6627 B:409b                           dirmenu   

 6629 B:409b  00 fe 3e 05 2c ff 00 ...           .dsb mdirtlen,0
 6630 B:42b3                           pcsuch    

 6632 B:42b3  00 fe b8 00 2c ff 00 ...           .dsb dsattr,0
 6633 B:42be                                    pcdta=ddtp
 6634 B:42be                                    liste=*

 6636 B:42be                                    buffer=bufanf
 6637 B:42be                                    dbuf=$0100
 6638 B:42be                                    listend=bufanf
 6639 B:42be                                     .end 

 6643 B:42be                                    varend=*

 6645 B:42be                                     .text 
 6646 T:62bf  be 42                              .word varend             ;=listanf
 6647 T:62c1  00 6c                              .word bufanf                ;=listend

 6649 T:62c3                                     .end 
